# Features Teams MCP Server - Current Architecture

## ğŸ—ï¸ System Overview

This diagram shows the current, cleaned-up architecture of the Features Teams MCP Server after consolidation and cleanup.

## ğŸ“ Current Project Structure

```
features-teams/
â”œâ”€â”€ server.py                    # Main MCP server (direct imports)
â”œâ”€â”€ connectors/                  # Modular connector system
â”‚   â”œâ”€â”€ jira/                   # Jira connector
â”‚   â”‚   â”œâ”€â”€ client.py           # Jira API client
â”‚   â”‚   â”œâ”€â”€ config.py           # Jira config loader
â”‚   â”‚   â””â”€â”€ tools/              # Jira MCP tools
â”‚   â”‚       â”œâ”€â”€ __init__.py     # Tool registration
â”‚   â”‚       â”œâ”€â”€ search_issues.py
â”‚   â”‚       â”œâ”€â”€ get_team_issues.py
â”‚   â”‚       â”œâ”€â”€ get_project_info.py
â”‚   â”‚       â”œâ”€â”€ get_user_info.py
â”‚   â”‚       â”œâ”€â”€ list_teams.py
â”‚   â”‚       â””â”€â”€ list_organizations.py
â”‚   â””â”€â”€ slack/                  # Slack connector
â”‚       â”œâ”€â”€ client.py           # Slack API client
â”‚       â”œâ”€â”€ config.py           # Slack config loader
â”‚       â””â”€â”€ tools/              # Slack MCP tools
â”‚           â”œâ”€â”€ __init__.py     # Tool registration
â”‚           â”œâ”€â”€ slack_dumper.py
â”‚           â”œâ”€â”€ slack_reader.py
â”‚           â””â”€â”€ search_slack_mentions.py
â”œâ”€â”€ config/                     # Configuration files
â”‚   â”œâ”€â”€ jira.yaml              # Jira teams & organizations
â”‚   â””â”€â”€ slack.yaml             # Slack channels & user mappings
â”œâ”€â”€ utils/                      # Shared utilities
â”‚   â”œâ”€â”€ responses.py            # Response helpers
â”‚   â””â”€â”€ validators.py           # Input validation
â”œâ”€â”€ slack_dumps_parsed/            # Parsed Slack dumps with real names
â”œâ”€â”€ slack_dumps/               # Slack data cache
â””â”€â”€ [container files]          # Containerfile, Makefile, etc.
```

## ğŸ”„ Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Features Teams MCP Server                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   MCP Client    â”‚    â”‚   MCP Server    â”‚    â”‚  Connectors â”‚ â”‚
â”‚  â”‚   (Cursor AI)   â”‚    â”‚   (server.py)   â”‚    â”‚             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ Tool requests â”‚    â”‚ â€¢ Direct importsâ”‚    â”‚ â€¢ Jira      â”‚ â”‚
â”‚  â”‚ â€¢ Natural lang  â”‚    â”‚ â€¢ Tool registry â”‚    â”‚ â€¢ Slack     â”‚ â”‚
â”‚  â”‚ â€¢ Results       â”‚    â”‚ â€¢ Error handlingâ”‚    â”‚ â€¢ Future... â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                       â”‚                       â”‚     â”‚
â”‚           â”‚                       â”‚                       â”‚     â”‚
â”‚           â–¼                       â–¼                       â–¼     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   User Query    â”‚    â”‚  Configuration  â”‚    â”‚   External  â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚   APIs      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ "Get toolchain  â”‚    â”‚ â€¢ jira.yaml     â”‚    â”‚ â€¢ Jira API  â”‚ â”‚
â”‚  â”‚  tickets"       â”‚    â”‚ â€¢ slack.yaml    â”‚    â”‚ â€¢ Slack API â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚ â€¢ user mappings â”‚    â”‚ â€¢ Data dumpsâ”‚ â”‚
â”‚  â”‚ "Search Slack   â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â”‚  mentions"      â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Tool Architecture

### Jira Tools (6 tools)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Jira Connector                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Jira Client   â”‚    â”‚   Jira Config   â”‚    â”‚  Jira Tools â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ API wrapper   â”‚    â”‚ â€¢ Teams config  â”‚    â”‚ â€¢ search_issuesâ”‚ â”‚
â”‚  â”‚ â€¢ Auth handling â”‚    â”‚ â€¢ Organizations â”‚    â”‚ â€¢ get_team_issuesâ”‚ â”‚
â”‚  â”‚ â€¢ Query builder â”‚    â”‚ â€¢ User mappings â”‚    â”‚ â€¢ get_project_infoâ”‚ â”‚
â”‚  â”‚ â€¢ Error handlingâ”‚    â”‚ â€¢ Team aliases  â”‚    â”‚ â€¢ get_user_infoâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ list_teamsâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ list_organizationsâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Slack Tools (10 tools)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Slack Connector                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Slack Client   â”‚    â”‚  Slack Config   â”‚    â”‚ Slack Tools â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ API wrapper   â”‚    â”‚ â€¢ Channel maps  â”‚    â”‚ â€¢ dump_slack_channelâ”‚ â”‚
â”‚  â”‚ â€¢ Auth handling â”‚    â”‚ â€¢ User mappings â”‚    â”‚ â€¢ dump_team_slack_dataâ”‚ â”‚
â”‚  â”‚ â€¢ Data fetching â”‚    â”‚ â€¢ Data settings â”‚    â”‚ â€¢ read_slack_channelâ”‚ â”‚
â”‚  â”‚ â€¢ Auto-caching  â”‚    â”‚ â€¢ Team mappings â”‚    â”‚ â€¢ read_team_slack_dataâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ list_slack_dumpsâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ get_slack_dump_summaryâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ force_fresh_slack_dumpâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ search_slack_mentionsâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ search_team_slack_mentionsâ”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ â€¢ list_team_slack_channelsâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Configuration System

### Configuration Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  config/jira   â”‚    â”‚  config/slack   â”‚    â”‚ consolidated_   â”‚
â”‚     .yaml      â”‚    â”‚     .yaml       â”‚    â”‚ user_mapping    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚     .yaml       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ teams:          â”‚    â”‚ slack_channels: â”‚    â”‚ user_mappings:  â”‚
â”‚   toolchain:    â”‚    â”‚   "C123":       â”‚    â”‚   "U123":       â”‚
â”‚     name:       â”‚    â”‚     "toolchain" â”‚    â”‚     "John Doe"  â”‚
â”‚     members:    â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚       - "John"  â”‚    â”‚ user_display_   â”‚    â”‚ # Master user   â”‚
â”‚       - "Jane"  â”‚    â”‚   names:        â”‚    â”‚ # mapping file  â”‚
â”‚                 â”‚    â”‚   "U123":       â”‚    â”‚ # (reference)   â”‚
â”‚ organizations:  â”‚    â”‚     "John Doe"  â”‚    â”‚                 â”‚
â”‚   SP:           â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚     - "John"    â”‚    â”‚ data_collection:â”‚    â”‚                 â”‚
â”‚     - "Jane"    â”‚    â”‚   history_days: â”‚    â”‚                 â”‚
â”‚                 â”‚    â”‚     30          â”‚    â”‚                 â”‚
â”‚ user_display_   â”‚    â”‚   dump_dir:     â”‚    â”‚                 â”‚
â”‚   names:        â”‚    â”‚     "dumps"     â”‚    â”‚                 â”‚
â”‚   "John":       â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚     "jdoe"      â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MCP Server (server.py)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Jira Connector â”‚    â”‚ Slack Connector â”‚    â”‚   Utils     â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ Loads jira    â”‚    â”‚ â€¢ Loads slack   â”‚    â”‚ â€¢ Response  â”‚ â”‚
â”‚  â”‚   config        â”‚    â”‚   config        â”‚    â”‚   helpers   â”‚ â”‚
â”‚  â”‚ â€¢ Creates       â”‚    â”‚ â€¢ Creates       â”‚    â”‚ â€¢ Validatorsâ”‚ â”‚
â”‚  â”‚   JiraClient    â”‚    â”‚   SlackClient   â”‚    â”‚ â€¢ Error     â”‚ â”‚
â”‚  â”‚ â€¢ Registers     â”‚    â”‚ â€¢ Registers     â”‚    â”‚   handling  â”‚ â”‚
â”‚  â”‚   6 tools       â”‚    â”‚   10 tools      â”‚    â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ User Mapping System

### Consolidated User Mapping Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Mapping System                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ consolidated_   â”‚    â”‚  config/slack   â”‚    â”‚  config/jiraâ”‚ â”‚
â”‚  â”‚ user_mapping    â”‚    â”‚     .yaml       â”‚    â”‚     .yaml   â”‚ â”‚
â”‚  â”‚     .yaml       â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ # Master file   â”‚    â”‚ # Slack tools   â”‚    â”‚ # Jira toolsâ”‚ â”‚
â”‚  â”‚ user_mappings:  â”‚    â”‚ user_display_   â”‚    â”‚ user_display_â”‚ â”‚
â”‚  â”‚   "U123":       â”‚    â”‚   names:        â”‚    â”‚   names:    â”‚ â”‚
â”‚  â”‚     "John Doe"  â”‚    â”‚   "U123":       â”‚    â”‚   "John":   â”‚ â”‚
â”‚  â”‚   "U456":       â”‚    â”‚     "John Doe"  â”‚    â”‚     "jdoe"  â”‚ â”‚
â”‚  â”‚     "Jane Smith"â”‚    â”‚   "U456":       â”‚    â”‚   "Jane":   â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚     "Jane Smith"â”‚    â”‚     "jsmith"â”‚ â”‚
â”‚  â”‚ # 42+ mappings  â”‚    â”‚                 â”‚    â”‚             â”‚ â”‚
â”‚  â”‚ # Conflicts     â”‚    â”‚ # Used by       â”‚    â”‚ # Used by   â”‚ â”‚
â”‚  â”‚ # resolved      â”‚    â”‚ # search tools  â”‚    â”‚ # team      â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚ # filtering â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                       â”‚                       â”‚     â”‚
â”‚           â”‚                       â”‚                       â”‚     â”‚
â”‚           â–¼                       â–¼                       â–¼     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    MCP Tools                               â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ search_slack_mentions â†’ Uses slack.yaml mappings         â”‚ â”‚
â”‚  â”‚ â€¢ get_team_issues â†’ Uses jira.yaml mappings                â”‚ â”‚
â”‚  â”‚ â€¢ All tools get consistent user identification             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Key Architectural Benefits

### âœ… **Simplified Structure**
- **Direct imports** in server.py (no complex auto-discovery)
- **Clean separation** between Jira and Slack connectors
- **Modular tools** with clear responsibilities

### âœ… **Consolidated Configuration**
- **Single source of truth** for user mappings (`config/slack.yaml`)
- **Separate configs** for different services (`jira.yaml`, `slack.yaml`)
- **Consistent user identification** across all tools

### âœ… **Efficient Data Flow**
- **Slack auto-caching** with smart refresh logic
- **Jira direct queries** with proper error handling
- **Unified response format** across all tools

### âœ… **Maintainable Code**
- **No dead code** (removed unused BaseConnector, auto-discovery)
- **Clear file organization** with logical grouping
- **Easy to extend** with new connectors or tools

## ğŸ”„ Tool Registration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tool Registration                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. server.py starts                                            â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  2. Import Jira connector                                       â”‚
â”‚     â”‚ â€¢ Load jira.yaml config                                  â”‚
â”‚     â”‚ â€¢ Create JiraClient                                      â”‚
â”‚     â”‚ â€¢ Import all 6 tools                                     â”‚
â”‚     â”‚ â€¢ Register with @mcp.tool()                              â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  3. Import Slack connector                                      â”‚
â”‚     â”‚ â€¢ Load slack.yaml config                                 â”‚
â”‚     â”‚ â€¢ Create SlackClient                                     â”‚
â”‚     â”‚ â€¢ Import all 10 tools                                    â”‚
â”‚     â”‚ â€¢ Register with @mcp.tool()                              â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  4. Register built-in tools                                     â”‚
â”‚     â”‚ â€¢ list_available_tools()                                 â”‚
â”‚     â”‚                                                           â”‚
â”‚     â–¼                                                           â”‚
â”‚  5. Server ready (17 total tools)                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Current Tool Inventory

### Jira Tools (6)
- `search_issues` - JQL-based issue search
- `get_team_issues` - Team-specific issue queries
- `get_project_info` - Project metadata
- `get_user_info` - User information
- `list_teams` - Available teams
- `list_organizations` - Available organizations

### Slack Tools (10)
- `dump_slack_channel` - Dump channel data
- `dump_team_slack_data` - Dump all team channels
- `read_slack_channel` - Read channel data (auto-refresh)
- `read_team_slack_data` - Read all team data
- `list_slack_dumps` - List available dumps
- `get_slack_dump_summary` - Dump statistics
- `force_fresh_slack_dump` - Force refresh
- `search_slack_mentions` - Search mentions
- `search_team_slack_mentions` - Team-wide search
- `list_team_slack_channels` - List team channels

### Built-in Tools (1)
- `list_available_tools` - List all available tools

**Total: 17 MCP Tools**

## ğŸ¯ Future Extensibility

The current architecture supports easy extension:

1. **New Connectors**: Add new `connectors/new_service/` directory
2. **New Tools**: Add to existing connector's `tools/` directory
3. **New Configs**: Add new `config/new_service.yaml`
4. **Server Updates**: Import and register new connector in `server.py`

This architecture provides a clean, maintainable foundation for the Features Teams MCP Server.
