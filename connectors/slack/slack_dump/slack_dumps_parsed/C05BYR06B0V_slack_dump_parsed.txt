Slack Channel Dump
Channel: #toolchain-infra
Channel ID: C05BYR06B0V
Generated: 2025-10-01 23:12:05
Total Messages: 1000
================================================================================

Message 1 - 2024-10-24 14:59
From: Hubert Stefanski
----------------------------------------
@Juanje Ojeda @Ozan Unsal I want to double-verify
https://eu-west-1.console.aws.amazon.com/s3/buckets/auto-product-build-downstream-staging?reg[…]cketType=general&amp;prefix=RHIVOS-1/&amp;showversions=false
(https://eu-west-1.console.aws.amazon.com/s3/buckets/auto-product-build-downstream-staging?region=eu-west-1&amp;bucketType=general&amp;prefix=RHIVOS-1/&amp;showversions=false)
are safe to delete?

Message 2 - 2024-10-24 15:00
From: Hubert Stefanski
----------------------------------------
want to check before merging that MR, just in case :see_no_evil:

Message 3 - 2024-10-24 15:02
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski Yes, that's only useful during the time the MR pipeline runs. After that, we don't
use it or need it. Go ahead! :trashcan: :ok_hand:

Message 4 - 2024-10-24 15:03
From: Hubert Stefanski
----------------------------------------
That's what I thought but didn't want to do something stupid :sweat_smile: thank you

Message 5 - 2024-10-24 15:04
From: Juanje Ojeda
----------------------------------------
Thanks for checking! Better safe than sorry :sweat_smile:

Message 6 - 2024-10-24 15:10
From: Hubert Stefanski
----------------------------------------
Cool cool, that got applied, we've just got to wait until midnight for the lifecycler to kick in
:crossed_fingers:

Message 7 - 2024-10-24 15:13
From: Juanje Ojeda
----------------------------------------
Thanks!!!

Message 8 - 2024-10-24 15:14
From: Hubert Stefanski
----------------------------------------
If my math is correct, this could mean a few hundred $ of savings :smile: per month

Message 9 - 2024-10-24 15:20
From: Ryan Smith
----------------------------------------
Hello fellow infra folks, could you please take a look at this MR
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/362) I've just
submitted?

Message 10 - 2024-10-24 16:54
From: Hubert Stefanski
----------------------------------------
approved, just one comment that I think you already know about, but left it just in case

Message 11 - 2024-10-25 12:19
From: Ryan Smith
----------------------------------------
@Hubert Stefanski and @Juanje Ojeda thanks to Hubes' keen eye I took out the changes to rename the
contcert automation user since it would induce regenerating access keys. The MR has been updated
with the latest changes having taken that commit out if you could take another look Id appreciate it

Message 12 - 2024-10-25 14:05
From: Hubert Stefanski
----------------------------------------
^^ re-approved

Message 13 - 2024-10-28 15:58
From: Ryan Smith
----------------------------------------
@Hubert Stefanski any insight in to this?
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/28369309#L207

Message 14 - 2024-10-30 13:35
From: Hubert Stefanski
----------------------------------------
@Ozan Unsal can you share that job log for the SSH issue you mentioned?

Message 15 - 2024-10-30 13:57
From: Steve Loranz
----------------------------------------
We're being asked to answer some questions for CMDB IDs VHCL-004 through VHCL-008, VHCL-012, and
VHCL-013 in https://issues.redhat.com/browse/EXDSP-2922 ... Each STI has a page in confluence with
questions about the service. It doesn't actually look too terrible, but I need help from this group.
Any takers?

Message 16 - 2024-10-30 20:15
From: Juanje Ojeda
----------------------------------------
I'm getting this kind of errors with the upstream `pipe-x_upstream_runner_aws_rosa_su` runner
:confused: https://gitlab.com/redhat/edge/ci-cd/pipe-x/tf-requests/-/jobs/8232457445

Message 17 - 2024-11-04 12:40
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/366 easy review for
anyone

Message 18 - 2024-11-04 12:41
From: Hubert Stefanski
----------------------------------------
(I'm still amazed at how well the CI trigger rules work here,)

Message 19 - 2024-11-04 13:08
From: Hubert Stefanski
----------------------------------------
And one more:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/367
This one offboards the decomissioned `auto-prod` cluster from the repository

Message 20 - 2024-11-07 12:20
From: Hubert Stefanski
----------------------------------------
@Nisha Saini @Paul Caramuto thanks for the input in https://issues.redhat.com/browse/EXDSP-2922, you
saved us a bunch of work it looks like :meow_dance:

Message 21 - 2024-11-07 12:30
From: Ryan Smith
----------------------------------------
+1, thank you both!

Message 22 - 2024-11-07 12:36
From: Ozan Unsal
----------------------------------------
I still have one :disappointed:

Message 23 - 2024-11-07 12:43
From: Ryan Smith
----------------------------------------
:headstone:

Message 24 - 2024-11-07 12:44
From: Ryan Smith
----------------------------------------
Which service?

Message 25 - 2024-11-07 12:49
From: Ozan Unsal
----------------------------------------
autosd-product-pipeline

Message 26 - 2024-11-07 13:22
From: Nisha Saini
----------------------------------------
Actually the vhcl-013 was skipped from the SOA requests given it is upstream which doesn’t come in
the realm of PPSC team. But i am not sure why is it still marked for self assessment in this epic.

Message 27 - 2024-11-07 13:38
From: Nisha Saini
----------------------------------------
I see why - it is marked criticality as C2. And as per Peggy's email they are auditing C1,C2 tier
STIs

Message 28 - 2024-11-07 13:56
From: Paul Caramuto
----------------------------------------
right, because it's marked as C2, let's see what Peggy comes back with as fas a refining the
questions. If we need to move forward with the 013, we should divide the work somehow and help Ozan
finish it off...

Message 29 - 2024-11-07 15:16
From: Ryan Smith
----------------------------------------
@Hubert Stefanski and @Eitan Raviv - did something change with the automation service account for
MP+? It used to be able to create Roles just fine, and now is being rejected as in here
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/28661606) and here
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/28661602)

Message 30 - 2024-11-07 15:56
From: Hubert Stefanski
----------------------------------------
hmm, this is odd, I don't recall making any changes, can you verify the token in the ci/cd store is
the same one as it is on the mpp ns?

Message 31 - 2024-11-07 15:56
From: Ryan Smith
----------------------------------------
I can, sec

Message 32 - 2024-11-07 16:10
From: Ryan Smith
----------------------------------------
Okay, I think the token has maybe been rotated
```$ oc get -o yaml sa tenantaccess-contcert-deployment-automation-sa apiVersion: v1
imagePullSecrets: - name: tenantaccess-contcert-deployment-automation-sa-dockercfg-r2bv8 kind:
ServiceAccount metadata: creationTimestamp: "2023-12-06T12:18:29Z" name:
tenantaccess-contcert-deployment-automation-sa namespace: contcert--config ownerReferences: -
apiVersion: tenantaccess.paas.redhat.com/v1beta1 (http://tenantaccess.paas.redhat.com/v1beta1)
blockOwnerDeletion: true controller: true kind: TenantServiceAccount name:
contcert-deployment-automation-sa uid: 17d38847-ab61-47ed-95ed-7771fd46b5da resourceVersion:
"4771181525" uid: 933b678e-7541-4989-8c1b-186664fac162 secrets: - name:
tenantaccess-contcert-deployment-automation-sa-dockercfg-r2bv8 - name:
tenantaccess-contcert-deployment-automation-sa-token-q6wzl```

Message 33 - 2024-11-07 16:11
From: Ryan Smith
----------------------------------------
That second secret there, `tenantaccess-contcert-deployment-automation-sa-token-q6wzl`, does not
match the token in CI/CD variables

Message 34 - 2024-11-07 16:12
From: Ryan Smith
----------------------------------------
However, when I
```$ oc describe sa tenantaccess-contcert-deployment-automation-sa Name:
tenantaccess-contcert-deployment-automation-sa Namespace: contcert--config Labels: &lt;none&gt;
Annotations: &lt;none&gt; Image pull secrets:
tenantaccess-contcert-deployment-automation-sa-dockercfg-r2bv8 Mountable secrets:
tenantaccess-contcert-deployment-automation-sa-dockercfg-r2bv8
tenantaccess-contcert-deployment-automation-sa-token-q6wzl Tokens:
tenantaccess-contcert-deployment-automation-sa-token
tenantaccess-contcert-deployment-automation-sa-token-54r4p
tenantaccess-contcert-deployment-automation-sa-token-q6wzl Events: &lt;none&gt;``` This token:
`tenantaccess-contcert-deployment-automation-sa-token-54r4p` does match

Message 35 - 2024-11-07 16:12
From: Ryan Smith
----------------------------------------
My assumption is that in this `describe` output, all tokens from history are shown

Message 36 - 2024-11-07 16:12
From: Ryan Smith
----------------------------------------
And the last one is latest, which matches what's in `oc get sa -o yaml`

Message 37 - 2024-11-07 16:21
From: Hubert Stefanski
----------------------------------------
completely lost as to why that happened :thinking_face:

Message 38 - 2024-11-07 16:22
From: Hubert Stefanski
----------------------------------------
I guess maybe we can ask Eitan on Monday if he accidentally rotated it with the runner work he's
doing

Message 39 - 2024-11-07 16:22
From: Hubert Stefanski
----------------------------------------
but that's a different tenant all together hmmmm

Message 40 - 2024-11-07 16:40
From: Ryan Smith
----------------------------------------
Let me ask IT cloud - maybe they auto-rotate

Message 41 - 2024-11-07 16:58
From: Ryan Smith
----------------------------------------
cc: @Marcin Sobczyk ^^

Message 42 - 2024-11-07 16:58
From: Marcin Sobczyk
----------------------------------------
gdmit...

Message 43 - 2024-11-07 16:59
From: Marcin Sobczyk
----------------------------------------
just pushed my MR and I was hoping to see the pipeline results :slightly_smiling_face:

Message 44 - 2024-11-07 17:02
From: Ryan Smith
----------------------------------------
Why did yours pass :thinking_meow:  did someone secretly rotate the token in CI/CD variables?

Message 45 - 2024-11-07 17:02
From: Ryan Smith
----------------------------------------
Eh, fudge it. I won't mess with that right now while we get that MR merged

Message 46 - 2024-11-13 13:48
From: Juanje Ojeda
----------------------------------------
@Kanitha Chim @Hubert Stefanski FYI, I did a small change to the webserver.

Message 47 - 2024-11-13 16:21
From: Kanitha Chim
----------------------------------------
does anybody know this repo https://gitlab.cee.redhat.com/automotive/demos/ces2025-vector-demo? I
was asked to create a main default branch

Message 48 - 2024-11-19 13:45
From: Marcin Sobczyk
----------------------------------------
Hi, I've rebased my MR
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/370) in the
`infrastructure` repository and CI is crying about some auth stuff
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/28996744). Is this a known
issue? @Hubert Stefanski :meow_pwettyplease:

Message 49 - 2024-11-19 13:46
From: Hubert Stefanski
----------------------------------------
We hit that a few times yesterday, no apparent root cause ;/

Message 50 - 2024-11-19 13:46
From: Hubert Stefanski
----------------------------------------
re-running it a few times made it pass eventually

Message 51 - 2024-11-19 13:47
From: Hubert Stefanski
----------------------------------------
It inherits the docker auth config from pipe-x
https://gitlab.cee.redhat.com/groups/automotive/pipe-x/-/settings/ci_cd

Message 52 - 2024-11-19 13:48
From: Hubert Stefanski
----------------------------------------
that has permissions to automotive-toolchain and auto-fusa

Message 53 - 2024-11-19 13:48
From: Marcin Sobczyk
----------------------------------------
ack, will retry, thanks!

Message 54 - 2024-11-19 14:13
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv do we have our own runners enabled for the infra repo? :thinking_face:

Message 55 - 2024-11-19 14:13
From: Hubert Stefanski
----------------------------------------
seems like this one is just using the release runner for whatever reason

Message 56 - 2024-11-19 14:14
From: Juanje Ojeda
----------------------------------------
We had that issue already with the tacocat image :confused:
https://issues.redhat.com/browse/VROOM-24342 It was affecting more runners, not just ours.

Message 57 - 2024-11-19 14:15
From: Juanje Ojeda
----------------------------------------
I worked around for a bit changing the pull-policy on the runner, but it was causing other issues

Message 58 - 2024-11-19 14:18
From: Juanje Ojeda
----------------------------------------
@Marcin Sobczyk sort answer: it's a known and annoying issue. but AFAIK, it wasn't affecting the
infra repo, tho :thinking_face:

Message 59 - 2024-11-19 14:58
From: Ryan Smith
----------------------------------------
This quirk seems to be a lot more common since I updated DOCKER_AUTH_CONFIG to include auths for
both `quay.io/automotive-toolchain (http://quay.io/automotive-toolchain)` and `quay.io/auto-fusa
(http://quay.io/auto-fusa)` even though this is valid w.r.t. the auth schema

Message 60 - 2024-11-19 15:07
From: Juanje Ojeda
----------------------------------------
Yep. And I tested that config inside a container to be sure that I wasn't using any local config and
it works as expected :confused: But for some reason, it doesn't work fine at the runners. (ours or
the instance runners)

Message 61 - 2024-11-19 15:09
From: Juanje Ojeda
----------------------------------------
What is more confusing is that now it worked.... ```Authenticating with credentials from
$DOCKER_AUTH_CONFIG Pulling docker image quay.io/automotive-toolchain/infrastructure:latest
(http://quay.io/automotive-toolchain/infrastructure:latest) ... Using docker image
sha256:a2c43abcd6364aa545a058d4520e9214a1bf05c836b6522391194b9321c9f42e for
quay.io/automotive-toolchain/infrastructure:latest
(http://quay.io/automotive-toolchain/infrastructure:latest) with digest
quay.io/automotive-toolchain/infrastructure@sha256:f7bea158190a69c6599718f62d3318cd94f448114380b4b18f2d00083a8250ee
(http://quay.io/automotive-toolchain/infrastructure@sha256:f7bea158190a69c6599718f62d3318cd94f448114380b4b18f2d00083a8250ee)
...``` It was using our runner, which doesn't have the workaround (the pull-policy to avoid
re-pulling images that already exists) anymore :thinking_face:

Message 62 - 2024-11-19 15:17
From: Ryan Smith
----------------------------------------
I suppose we could devise an experiment to determine if it's Quay (which Im most inclined to blame)
or if it's the runner(s)

Message 63 - 2024-11-19 15:24
From: Juanje Ojeda
----------------------------------------
I was also inclined to blame quay, but after testing it, I'm not sure anymore. It works fine with my
credentials and with the credentials at the CI/CD. I'm not sure if it's the runners, as it happens
in both ours and the instance runners. I wanted to do some experiments with a simple repo and CI, to
be able to experiment more quickly and test different things.

Message 64 - 2024-11-19 17:52
From: Juanje Ojeda
----------------------------------------
@Ozan Unsal @Kanitha Chim @Hubert Stefanski Something fishy is happening with the autosd webserver.
Apart from the fact that the latest compose has some files mixed (like it didn't sync completely),
the bucket show 5 dirs plus nightly. But the web shows 6 dirs plus nightly. Any ideas?

Message 65 - 2024-11-20 01:50
From: Michael Ho
----------------------------------------
Just want to add that I'm hitting the quay authentication issues still on the infra repo:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/377 ```ERROR: Job
failed: failed to pull image "quay.io/automotive-toolchain/infrastructure:latest
(http://quay.io/automotive-toolchain/infrastructure:latest)" with specified policies [always]: Error
response from daemon: {"message":"unauthorized: access to the requested resource is not authorized"}
(manager.go:250:1s)``` I had one pipeline that failed 100% consistently (while retrying the jobs).
On a new pipeline, one job passed but two still failed..

Message 66 - 2024-11-20 02:19
From: Michael Ho
----------------------------------------
I'll post it here so people don't miss the discussion I have in the thread above! The
DOCKER_AUTH_CONFIG doesn't fully support two tokens for registries sitting on the same domain. I
swapped the auto-foa and the automotive-toolchain tokens around to fix the infrastructure repository
jobs. But we expect something that used that auto-foa token to break :thinking_meow: I guess the
terraform jobs for managing auto-foa validator container image repos.

Message 67 - 2024-11-20 02:21
From: Michael Ho
----------------------------------------
Fyi, @Eitan Raviv, my MR to add a new GitLab repo looks like it also would destroy the AWS runners:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/29018472

Message 68 - 2024-11-20 12:05
From: Avihai Efrat
----------------------------------------
Hi @Michael Ho @Ryan Smith, @Eitan Raviv mentioned we are blocked by the gitlab-shared-runners -
Artifact upload permission denied issue. (https://redhat.service-now.com/surl.do?n=INC3064728) Also
that the url_close WA that was suggested there is not actually working.
Currently this ticket is with priority 5 (WA exist) and I want to reflect and escalate it further so
I have 2 options: • Raise to priority 2 : No WA buisness critical priority • Raise to priority 3: No
WA does NOT block buisness critical priority What do you suggest we choose and why ?
Also @Eitan Raviv he will check about old runners that might not have this issue until this is
resolved.
Another last Q: What have you been using so far to run the validators on and for how long can you
keep using it?

Message 69 - 2024-11-20 12:25
From: Michael Ho
----------------------------------------
@Jochen Breuer ^ When you asked about this, what was your expectation? Only do it if it's an easy
win, right?

Message 70 - 2024-11-20 12:26
From: Michael Ho
----------------------------------------
&gt; Another last Q: What have you been using so far to run the validators on and for how long can
you keep using it? We use the gitlab cee shared runners, we can continue to use them, we just wanted
to see if we could get better queueing/run speeds on private runners.

Message 71 - 2024-11-20 13:33
From: Ryan Smith
----------------------------------------
This request is only for CI runners to replace our use of the GitLab shared instance runners for FoA
validator project CI. The primary objective is to experiment with dedicated runners and gather data
to determine whether using dedicated vs shared runners will improve CI job queuing time.
In short - this is not business critical so Prio 3 at the most imo.
One last point: it seems strange that IT's "gitlab-shared-runners - Artifact upload permission
denied issue." experienced when turning on a new fleet of runners as result of an outage is somehow
blocking us from turning on a self-managed fleet of runners :thinking_meow: at the end of the day
like Michael said this was meant to be "do it if its an easy win" and so far this has neither been
easy nor a win

Message 72 - 2024-11-20 13:56
From: Jochen Breuer
----------------------------------------
> @Jochen Breuer > ^ When you asked about this, what was your expectation? Only do it if it's an
easy win, right? I would replace easy with "reasonable effort". If this becomes a problem, we should
run this past Steve to make sure we are not blocking other things that might be more important.

Message 73 - 2024-11-20 14:03
From: Ryan Smith
----------------------------------------
Yes, reasonable effort is a much better way to say "easy win", thank you for the correction.

Message 74 - 2024-11-20 14:12
From: Avihai Efrat
----------------------------------------
Thanks @Michael Ho and @Ryan Smith! I moved the gitlab-shared-runners - Artifact upload permission
denied issue (https://redhat.service-now.com/surl.do?n=INC3064728) ticket to pri 3. Also nudged the
assignee in the hope that we will get another WA or help .

Message 75 - 2024-11-20 15:48
From: Michael Ho
----------------------------------------
gentle ping for review
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/377 @Ryan Smith
@Hubert Stefanski

Message 76 - 2024-11-20 16:10
From: Nisha Saini
----------------------------------------
Hi All, For getting the auto-signing we need to get the SOA expedited - I am working with the
respective teams. Can the respective SMEs please confirm if the _services (in italics_) still
required Or if _*new services*_ added to the below list? VHCL-004 rhivos-package-level-pipeline
_*VHCL-006 auto-toolchain-sea-bridge*_ VHCL-007 contcert VHCL-008 rhivos-product-pipeline VHCL-009
auto-toolchain-infrastructure VHCL-012 rhivos-webserver VHCL-013 AutoSD Product Pipeline _*VHCL-015
test-console*_

Message 77 - 2024-11-20 16:12
From: Juanje Ojeda
----------------------------------------
I'd say that `auto-toolchain-sea-bridge` *no*, but `test-console` *yes*.

Message 78 - 2024-11-20 16:13
From: Juanje Ojeda
----------------------------------------
Well, maybe I spoke too soon... @Kanitha Chim @Michael Ho do we need sea-bridge?

Message 79 - 2024-11-20 16:14
From: Kanitha Chim
----------------------------------------
no we don't

Message 80 - 2024-11-20 16:14
From: Kanitha Chim
----------------------------------------
:smile:

Message 81 - 2024-11-20 16:15
From: Nisha Saini
----------------------------------------
Great! 1 less service :+1:

Message 82 - 2024-11-20 16:16
From: Kanitha Chim
----------------------------------------
thank you, Nisha!

Message 83 - 2024-11-25 12:57
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Hubert Stefanski I've noticed a bunch of errors like these (at least from yesterday,
not sure if before) with the upstream runners: ```Running with gitlab-runner 17.6.0 (374d34fd) on
pipe-x-gitlab-autoscale-runners-upstream t2_Kh5DTj, system ID: s_2e6b9886b188 Resolving secrets
Preparing the "docker-autoscaler" executor 45:10 ERROR: Preparation failed: unable to acquire
instance: context deadline exceeded Will be retried in 3s ... ERROR: Preparation failed: unable to
acquire instance: context deadline exceeded Will be retried in 3s ... ERROR: Preparation failed:
unable to acquire instance: context deadline exceeded Will be retried in 3s ... ERROR: Job failed
(system failure): unable to acquire instance: context deadline exceeded```

Message 84 - 2024-11-25 13:00
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv I'm trying to get
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/382 in for @Luigi
Pellecchia to back up the TC DB, but I'm seeing my plan overwrites some fields on the runners, did
you add any of these manually? :thinking_face:

Message 85 - 2024-11-25 13:00
From: Hubert Stefanski
----------------------------------------
don't wanna overwrite your changes if you did

Message 86 - 2024-11-26 11:39
From: Ozan Unsal
----------------------------------------
Any idea why this pipeline is stuck
https://gitlab.com/redhat/edge/ci-cd/pipe-x/image-info-generator/-/pipelines/1559618768 ?

Message 87 - 2024-11-27 10:47
From: Marcel Banas
----------------------------------------
Hello, I wanted to ask if I can have higher than `Developer` role in pipelines as code repo
(https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code) - current
justification to access/see CI/CD variables values for fixing one job. Thanks in advance.

Message 88 - 2024-11-27 13:36
From: Hubert Stefanski
----------------------------------------
Can we get one more approval here:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/385 ?

Message 89 - 2024-11-27 13:37
From: Hubert Stefanski
----------------------------------------
This adds the tf-integrations bucket properly, since it was created manually before it got added to
terraform it broke the plan

Message 90 - 2024-11-27 15:13
From: Luigi Pellecchia
----------------------------------------
Hi guys, actually plp timeout is blocking some report upload in polarion. In my case a test is
passing but gitlab job failed due timeout. Can we extend that to support Renesas performance?
https://gitlab.cee.redhat.com/automotive/pipe-x/package-level-pipelines/-/jobs/29214463

Message 91 - 2024-11-29 14:08
From: Michael Ho
----------------------------------------
@Kanitha Chim @Hubert Stefanski I'd like to change the repo name for one of the foa validators,
could I get a review please?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/388

Message 92 - 2024-12-02 14:40
From: Hubert Stefanski
----------------------------------------
We finally got a full month view for the recent cost savings :meow_dance:

Message 93 - 2024-12-02 14:40
From: Hubert Stefanski
----------------------------------------
[No text content]

Message 94 - 2024-12-03 02:09
From: Nisha Saini
----------------------------------------
Hi All, upon running the "weak passwords" report on bitwarden, 1 weak pwd was found. We should
change it @Hubert Stefanski /@Eitan Raviv

Message 95 - 2024-12-03 02:10
From: Nisha Saini
----------------------------------------
QQ: how are we managing access in Bitwarden vault? Is there role based access Or some rover group to
manage that?

Message 96 - 2024-12-03 08:38
From: Hubert Stefanski
----------------------------------------
It's managed by rover groups, each rover group gets automatically created when we add `@BW@` in the
notes of the rover group, anyone within that group is automatically added/removed based on their
membership status

Message 97 - 2024-12-03 08:38
From: Hubert Stefanski
----------------------------------------
I think this specific one we use somewhere in the ATC dashboard :thinking_face:

Message 98 - 2024-12-03 10:33
From: Michael Ho
----------------------------------------
Yeah

Message 99 - 2024-12-03 10:34
From: Michael Ho
----------------------------------------
It's used to access the news

Message 100 - 2024-12-03 10:34
From: Michael Ho
----------------------------------------
That password was generated for us btw when I requested it long ago

Message 101 - 2024-12-03 10:34
From: Michael Ho
----------------------------------------
Not sure it's changeable. It's more a token.

Message 102 - 2024-12-03 15:54
From: Nisha Saini
----------------------------------------
If we do not need this token anymore we can remove it.

Message 103 - 2024-12-03 15:56
From: Nisha Saini
----------------------------------------
Another question is related to gitlab runners- IIUC we are only relying on AWS hosted runners
because there is currently an ongoing issue with runners on MP+. 1. Do we have any ticket to track
the remediation for MP+ runners issue? 2. Do we plan to keep using the AWS runners long term as in
till July 2025 Or will move back to MP+ in near future?

Message 104 - 2024-12-03 15:58
From: Nisha Saini
----------------------------------------
^asking because AWS based runners are the only few things which are blocking the compliance part for
services hosted on gitlab.cee( rest runners are hosted on MP+ & maintained by IT) so no additional
steps are required there

Message 105 - 2024-12-03 16:02
From: Michael Ho
----------------------------------------
&gt; If we do not need this token anymore we can remove it. If you remove the news thing on the atc
dashboard, up to you

Message 106 - 2024-12-03 16:19
From: Robert O'Brien
----------------------------------------
In #C04JDFLHJN6| bookmarks we have links to ATC dashboard and the news page. I don't think we have
so many people using the dashboard, so for me, it appears to be a better option to remove news from
dashboard

Message 107 - 2024-12-03 21:26
From: Avihai Efrat
----------------------------------------
I think part of having a dashboard is being able to post issues/news clearly there , no? I think
it’s very useful and teams look there for updates and status changes.( we can ask in next open
toolchain meetup as well)
Can’t we change the password and keep the news important dashboard feature?
About not many folks using it I think it’s up to us to point other teams to check the dashboard
first or keep it updated instead of announcing in multiple channels but if this password change is
not possible then it’s a different story.

Message 108 - 2024-12-03 21:28
From: Paul Caramuto
----------------------------------------
one is internal (dashboard webserver) the other public (source), right?

Message 109 - 2024-12-04 05:28
From: Avihai Efrat
----------------------------------------
The news section is on the Red Hed source page (which is internal to Red Hat folks, no public AFAIK)

Message 110 - 2024-12-04 16:12
From: Michael Ho
----------------------------------------
Hi, can I get a reviewers eye on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/392 and
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/391 ?

Message 111 - 2024-12-04 19:12
From: Nisha Saini
----------------------------------------
Hi All, From next week we'll scrap p-l-p repo and use test-console, which means the ESS assessments
for VHCL-004 are not needed anymore. We can avoid unnecessary ESS related efforts &amp; policy
exceptions if we can get a list of services which will be scraped before the prod date July 2025.
Please let me know, if there any other services listed here
(https://spaces.redhat.com/pages/viewpage.action?pageId=363407648) which you think is not worth the
ESS effort. :slightly_smiling_face:

Message 112 - 2024-12-04 19:20
From: Juanje Ojeda
----------------------------------------
I think Sea-Bridge was mention that we don't need it, right? And I wonder why we have `Pipelines as
Code` in the services section and then each one of the pipelines (autosd and rhivos) in the
pipelines section. Isn't it a duplication or we need to declare them as both?

Message 113 - 2024-12-04 19:24
From: Nisha Saini
----------------------------------------
Yes sea-bridge, &amp; both volumes are N/A, I am now also marking p-l-p as N/A

Message 114 - 2024-12-04 19:24
From: Juanje Ojeda
----------------------------------------
Sorry, I mixed the infra repo and the pipelines repo :see_no_evil:

Message 115 - 2024-12-04 19:24
From: Nisha Saini
----------------------------------------
&gt; And I wonder why we have `Pipelines as Code` in the services section and then each one of the
pipelines (autosd and rhivos) in the pipelines section. Do you mean Infra-as-code?

Message 116 - 2024-12-04 19:25
From: Juanje Ojeda
----------------------------------------
Yes, never mind, I misread it

Message 117 - 2024-12-04 19:25
From: Nisha Saini
----------------------------------------
hehe, yeah I ll update the STI related page now.

Message 118 - 2024-12-05 15:49
From: Michael Ho
----------------------------------------
Hi, could I get some reviews here please?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/391

Message 119 - 2024-12-06 08:36
From: Luigi Pellecchia
----------------------------------------
Hi good morning, I saw some gating request in Test Console yesterday and Simon pointed out those are
against the "nightly" image. We should update it to use the latest-RHIVOS-1

Message 120 - 2024-12-06 08:37
From: Luigi Pellecchia
----------------------------------------
Moreover I was thinking on adding a job at the gating, before the testing to build glibc from source
for all the hws, so we don't have to do that in all our testing. Probably other packages need the
same, but I want to know other opinions about that.

Message 121 - 2024-12-06 08:46
From: Luigi Pellecchia
----------------------------------------

https://gitlab.cee.redhat.com/automotive/fences/gating/dummy-trigger/-/blob/main/lib/test-console.sh?ref_type=heads#L22

Message 122 - 2024-12-06 08:46
From: Luigi Pellecchia
----------------------------------------
I'll fix it

Message 123 - 2024-12-06 11:46
From: Luigi Pellecchia
----------------------------------------
https://gitlab.cee.redhat.com/automotive/fences/gating/gator/-/merge_requests/62
https://gitlab.cee.redhat.com/automotive/fences/gating/dummy-trigger/-/merge_requests/30

Message 124 - 2024-12-06 11:53
From: Tomas Golembiovsky
----------------------------------------
Shouldn't this come from a config? :thinking_meow:

Message 125 - 2024-12-06 11:59
From: Tomas Golembiovsky
----------------------------------------
It seems we don't have it there yet. But this needs to match the right image, no? So when running
tests against Tech Preview we need `RHIVOS-1.0-TechPreview`.

Message 126 - 2024-12-06 12:57
From: Luigi Pellecchia
----------------------------------------
This is package gating, that happen against the nightly build that now is named latest-RHIVOS-1

Message 127 - 2024-12-06 12:57
From: Luigi Pellecchia
----------------------------------------
so on a new glibc version, we install the new glibc on top of latest because we don't have yet an
image coming with that glibc version

Message 128 - 2024-12-06 13:00
From: Michal Skrivanek
----------------------------------------
...and it doesn't matter that it's going to take 3 days to run on S4 ?

Message 129 - 2024-12-06 13:41
From: Luigi Pellecchia
----------------------------------------
May I ask a review/merge to
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/395

Message 130 - 2024-12-09 20:55
From: Nisha Saini
----------------------------------------
Hi @Eitan Raviv @Hubert Stefanski : Can you please confirm for self-hosted gitlab runner
registration : 1. We are using auth token as stated https://docs.gitlab.com/runner/register/ 2. We
are auto-rotating those token on regular basis FYI - @Avihai Efrat

Message 131 - 2024-12-12 14:21
From: Eitan Raviv
----------------------------------------
Hi @Nisha Saini, sorry - totally missed this message. We are using an auth token but not rotating
it. I added a task (https://issues.redhat.com/browse/VROOM-25098) to the epic. Also commented on
INC3278825 (https://redhat.service-now.com/surl.do?n=INC3278825)

Message 132 - 2024-12-12 15:29
From: Hubert Stefanski
----------------------------------------
:howdy: can we get one more review for Lev here?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/400

Message 133 - 2024-12-12 15:42
From: Juanje Ojeda
----------------------------------------
```instance_type = "m7i.xlarge"``` :astonished:

Message 134 - 2024-12-12 15:46
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski I'm curious, do you know where the repo for that dashboard is? I can't find it
:thinking_face:

Message 135 - 2024-12-12 15:46
From: Hubert Stefanski
----------------------------------------
@Sameera Kalgudi @Eli Mesika @Lev Veyde  can probably point us to it :sweat_smile:

Message 136 - 2024-12-12 16:14
From: Hubert Stefanski
----------------------------------------
need to run a quick errand but I'll check on the deployment and update the DNS in ~30 mins

Message 137 - 2024-12-12 17:33
From: Hubert Stefanski
----------------------------------------
Quick review from anyone here pls:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/403 cc @Lev Veyde

Message 138 - 2024-12-12 17:33
From: Hubert Stefanski
----------------------------------------
@Sameera Kalgudi

Message 139 - 2024-12-12 17:52
From: Hubert Stefanski
----------------------------------------
@Ryan Smith are you around perhaps ^^?

Message 140 - 2024-12-12 17:53
From: Hubert Stefanski
----------------------------------------
thanks @Kanitha Chim!

Message 141 - 2024-12-12 17:59
From: Hubert Stefanski
----------------------------------------
for you dashboard folk, `10.60.4.157` is the new IP address

Message 142 - 2024-12-12 18:02
From: Hubert Stefanski
----------------------------------------
Actually, hat's the same as the old one, it picked up the same IP address :sweat_smile: (that
doesn't happen all the time)

Message 143 - 2024-12-12 18:04
From: Sameera Kalgudi
----------------------------------------
Yes I was surprised.

Message 144 - 2024-12-12 20:59
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/404

Message 145 - 2024-12-12 20:59
From: Hubert Stefanski
----------------------------------------
whoops merge request not found

Message 146 - 2024-12-12 20:59
From: Hubert Stefanski
----------------------------------------
this should create the iam policies for dashboard people (sorry I need to find a new name for you
folks :p)

Message 147 - 2024-12-12 21:00
From: Hubert Stefanski
----------------------------------------
once that's merged @Eitan Raviv can you log into the AWS UI and enable console login? so that they
can stop/start the instance through the UI?

Message 148 - 2024-12-12 21:00
From: Hubert Stefanski
----------------------------------------
that will be available regardless through the CLI once we generate the aws access key/secret pair

Message 149 - 2024-12-17 23:23
From: Juanje Ojeda
----------------------------------------
In case anyone is still around. I have this MR fox fixing one job for the nightly build downstream.
It's an interesting case, as the job only work downstream when it uses our runner (the `release`
runner), when it uses the instance runners it fails. Even if they have the `docker` tag
:thinking_face:
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/merge_requests/431
The job uses buildah for pulling some images and create a multiarch manifest. I think it fails
because the userspaces are not enabled.

Message 150 - 2024-12-17 23:24
From: Juanje Ojeda
----------------------------------------
For this case: • our runner: 1 • cee runners: 0 :stuck_out_tongue:

Message 151 - 2024-12-18 10:03
From: Tomas Golembiovsky
----------------------------------------
yeah, that think does not work with cee runners. Year ago it made our efforts of building multi-arch
container a real pain.

Message 152 - 2025-01-09 18:22
From: Ryan Smith
----------------------------------------
Anyone around that can bestow a second ACK here
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/413)? This project
was already archived so this is just getting the terraform plan up-to-date

Message 153 - 2025-01-10 09:41
From: Michael Ho
----------------------------------------
Can we get another ACK on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/412 ? Would be nice
to have this project.

Message 154 - 2025-01-10 09:56
From: Hubert Stefanski
----------------------------------------
@Michael Ho happy to approve, but I think you don't want capitilized path names :wink:

Message 155 - 2025-01-10 09:56
From: Hubert Stefanski
----------------------------------------
the good o'l project name -> path name keeps capitilization, so you'll end up with
`gitlab.cee/Binary-Analysis`

Message 156 - 2025-01-10 10:10
From: Michael Ho
----------------------------------------
nooo

Message 157 - 2025-01-10 12:54
From: Ryan Smith
----------------------------------------
I don't think this is true

Message 158 - 2025-01-10 12:55
From: Ryan Smith
----------------------------------------
Either way it won't hurt to put the desired path there explicitly, I'll fix that later

Message 159 - 2025-01-10 12:55
From: Hubert Stefanski
----------------------------------------
Is that for the terraform provider or for gitlab docs?

Message 160 - 2025-01-10 12:55
From: Ryan Smith
----------------------------------------
GitLab API

Message 161 - 2025-01-10 12:55
From: Hubert Stefanski
----------------------------------------
IIRC the terraform behaviour didn't match that of gitlab itself

Message 162 - 2025-01-10 12:55
From: Ryan Smith
----------------------------------------
Why terraform :facepalm:

Message 163 - 2025-01-10 12:55
From: Hubert Stefanski
----------------------------------------
terrorform

Message 164 - 2025-01-10 12:56
From: Ryan Smith
----------------------------------------
Fr

Message 165 - 2025-01-10 12:56
From: Ryan Smith
----------------------------------------
I'll add the path explicitly, safer that way anyways

Message 166 - 2025-01-10 13:33
From: Michael Ho
----------------------------------------
We should always set the path explicitly.. so if we copy+paste from another one, we won't forget
this again..

Message 167 - 2025-01-10 14:15
From: Ryan Smith
----------------------------------------
I actually copy/pasted this from one :sweat_smile:

Message 168 - 2025-01-10 14:16
From: Ryan Smith
----------------------------------------
project_code-review.tf (http://project_code-review.tf)

Message 169 - 2025-01-10 14:17
From: Michael Ho
----------------------------------------
Yeah that's what I expected :sweat_smile: cause this happened to me last time from copy+paste

Message 170 - 2025-01-10 14:18
From: Ryan Smith
----------------------------------------
Path added :muscle:

Message 171 - 2025-01-10 14:19
From: Ryan Smith
----------------------------------------
!412 is ready for another look

Message 172 - 2025-01-15 13:11
From: Ryan Smith
----------------------------------------
@Hubert Stefanski or @Kanitha Chim have either of you (or anyone else here I didnt tag) seen
anything from IT w.r.t. automatic log forwarding to Splunk on MPP coming to an end?

Message 173 - 2025-01-15 13:18
From: Hubert Stefanski
----------------------------------------
@Ryan Smith this is the only mention of it i've seen, other than that I wasn't made aware of any
changes

Message 174 - 2025-01-15 13:34
From: Ryan Smith
----------------------------------------
Many thanks HubeGPT - I didn't catch this thread

Message 175 - 2025-01-15 13:47
From: Hubert Stefanski
----------------------------------------
:meow_salute: at your service

Message 176 - 2025-01-15 13:48
From: Ryan Smith
----------------------------------------
"Hey HubeGPT, will I ever hit it big with meme coins?"

Message 177 - 2025-01-20 16:07
From: Michael Ho
----------------------------------------
Hey HubeGPT, can you code review this MR for me?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/420/diffs#note_14181184

Message 178 - 2025-01-21 08:35
From: Hubert Stefanski
----------------------------------------
Whoops, Sorry I dropped off already by that time, approved

Message 179 - 2025-01-21 08:37
From: Hubert Stefanski
----------------------------------------
&gt; "Hey HubeGPT, will I ever hit it big with meme coins?" Unfortunately as a small language model,
I can only provide 8-ball level answers, but since I don't want to disappoint, chose one of "Yes",
"No" or "Ask again later"

Message 180 - 2025-01-21 08:38
From: Michael Ho
----------------------------------------
Thanks, HubeGPT! HubeGPT, please message @Iker Galardi and notify him that the MR was merged

Message 181 - 2025-01-21 09:26
From: Hubert Stefanski
----------------------------------------
Hey @Iker Galardi, your merge request in the Infrastructure repository was merged!!

Message 182 - 2025-01-21 09:27
From: Michael Ho
----------------------------------------
I hope HubeGPT is an approved AI helper in the Red Hat AI Policy

Message 183 - 2025-01-21 09:41
From: Hubert Stefanski
----------------------------------------
For AI to be considered AI it must have some aspect of Artificial, and Intelligence, the latter is
missing in HubeGPT

Message 184 - 2025-01-22 15:34
From: Michael Ho
----------------------------------------
Hi, I'm still considered the application owner of auto-toolchain-dashboard, but can I hand this off
to someone? @Nisha Saini? The context is I'm being emailed double checking I'm still the owner:
```App Name: Auto Toolchain Dashboard App ID: VHCL-005 App Owner: Steve Loranz App Delegate: Michael
Ho ``` cc @Steve Loranz @Hubert Stefanski @Avihai Efrat

Message 185 - 2025-01-22 15:37
From: Hubert Stefanski
----------------------------------------
delegate that to me please

Message 186 - 2025-01-22 15:43
From: Michael Ho
----------------------------------------
Ack

Message 187 - 2025-01-22 15:44
From: Michael Ho
----------------------------------------
Can I set you as the owner+delegate?

Message 188 - 2025-01-22 16:36
From: Nisha Saini
----------------------------------------
Hi Michael, that field was not changed, I ll update it in catalog , once merged &amp; synced you
should be good

Message 189 - 2025-01-22 16:37
From: Nisha Saini
----------------------------------------
Are there any more services where delegate needs to be updated?

Message 190 - 2025-01-22 16:37
From: Michael Ho
----------------------------------------
I only had that one

Message 191 - 2025-01-23 07:46
From: Kanitha Chim
----------------------------------------
FYI

Message 192 - 2025-01-23 11:12
From: Avihai Efrat
----------------------------------------
Thanks for adding it here @Kanitha Chim ! I hope it will not break anything.
I so for ATC the group name is the same with updated folks to who we have today in the team to
reflect that . @Hubert Stefanski do we have any service/automation that require someone specific to
be on the toolchain rover group to work that might hint of possible breakage from this change?

Message 193 - 2025-01-23 11:14
From: Hubert Stefanski
----------------------------------------
We should be fine, the groups that affect things are in Shawn's "will not be touching" section, so
we're good

Message 194 - 2025-01-29 10:29
From: Hubert Stefanski
----------------------------------------
:howdy: https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/421 for
anyone willing review, ty :raised_hands: I'm trying to configure renovate to get the ESS control
remediation resolved

Message 195 - 2025-01-29 12:13
From: Hubert Stefanski
----------------------------------------
whoops, wrong repo link
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/423 this one should
fix it :sweat_smile:

Message 196 - 2025-01-30 15:45
From: Hubert Stefanski
----------------------------------------
^^ if someone could take a look at !423 :meow_peek:

Message 197 - 2025-02-03 12:31
From: Lev Veyde
----------------------------------------
@Eitan Raviv You need to request access here

Message 198 - 2025-02-04 16:30
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Hubert Stefanski Do you know why this upstream runner takes so long to initiate the
job? https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/jobs/9039451502 I stopped it
and retried because 8 min in it wasn't even starting the job :confused: I've seen this a few times
in the past.

Message 199 - 2025-02-05 14:21
From: Michael Ho
----------------------------------------
@Hubert Stefanski Do you have some guidance/experience with setting up a bot account on gitlab.com
(http://gitlab.com)?

Message 200 - 2025-02-05 14:21
From: Michael Ho
----------------------------------------
I'd like one to use to generate access tokens for contcert usage.

Message 201 - 2025-02-05 14:25
From: Hubert Stefanski
----------------------------------------
I'm not sure if this is a "prodsec approved" method, but what I did for the ATC bots was to use one
of our team mailing lists with email capabilities enabled to create the account.
Then we just store the password in bitwarden (and you can also enable 2FA through it)

Message 202 - 2025-02-05 14:25
From: Hubert Stefanski
----------------------------------------
If you wanna go real fine-grained you can set up a rover group for only those that can access it and
enable the email capability on that

Message 203 - 2025-02-05 14:26
From: Hubert Stefanski
----------------------------------------
ATC has a blanket access for upstream auto-bot for all of auto-toolchain-devel

Message 204 - 2025-02-05 14:43
From: Michael Ho
----------------------------------------
I wonder if we can piggyback on you?

Message 205 - 2025-02-05 14:43
From: Michael Ho
----------------------------------------
Would you be against letting us share your bot?

Message 206 - 2025-02-05 14:43
From: Michael Ho
----------------------------------------
It's mainly for read-only purposes

Message 207 - 2025-02-05 14:48
From: Hubert Stefanski
----------------------------------------
I've nothing against it, just make sure to name the access tokens something that won't easily be
deleted :sweat_smile:

Message 208 - 2025-02-05 14:48
From: Hubert Stefanski
----------------------------------------
you've got access to that BW group still, right?

Message 209 - 2025-02-06 07:43
From: Michael Ho
----------------------------------------
Let me check

Message 210 - 2025-02-06 07:44
From: Michael Ho
----------------------------------------
Seems so!

Message 211 - 2025-02-06 07:46
From: Michael Ho
----------------------------------------
```You are signed in as auto-gitlab-bot. For added security, you'll need to verify your identity.
We've sent a verification code to au***************@r*****.com``` I might need your help here

Message 212 - 2025-02-06 08:27
From: Hubert Stefanski
----------------------------------------
Can anyone see that email in their inbox? i've also tried to log in and it doesn't appear in any of
my mailing lists... :grimacing:

Message 213 - 2025-02-06 08:29
From: Hubert Stefanski
----------------------------------------
apparently it was registered on automotive-a-team@redhat.com (mailto:automotive-a-team@redhat.com),
but nothing there

Message 214 - 2025-02-06 08:31
From: Michael Ho
----------------------------------------
Oh no :D

Message 215 - 2025-02-06 08:32
From: Hubert Stefanski
----------------------------------------
I'll see if I can switch the email address

Message 216 - 2025-02-06 09:13
From: Hubert Stefanski
----------------------------------------
For everyone's situational awareness: I switched the email address from
`automotive-a-team@redhat.com (mailto:automotive-a-team@redhat.com)` to
`automotive-toolchain-devel@redhat.com (mailto:automotive-toolchain-devel@redhat.com)` and the
subsequent e-mails were Michael logging in and setting up some tokens for the Follow-On-Activities
team, so no need to worry about the emails on `automotive-toolchain-devel@redhat.com
(mailto:automotive-toolchain-devel@redhat.com)`

Message 217 - 2025-02-06 09:32
From: Michael Ho
----------------------------------------
Thanks for the help, Hubert!

Message 218 - 2025-02-10 08:30
From: Jochen Breuer
----------------------------------------
Hey folks, is there a central place, where we collect information like this? So that the next
person, that hasn't inherited that tribal knowledge already, can take a look there and figure out
what to do and where to look?

Message 219 - 2025-02-10 08:32
From: Hubert Stefanski
----------------------------------------
How will I keep myself employed if I don't act the only source of truth?

Message 220 - 2025-02-10 08:32
From: Hubert Stefanski
----------------------------------------
^ sarcasm if anyone didn't catch it :p

Message 221 - 2025-02-10 08:32
From: Hubert Stefanski
----------------------------------------
I think our confluence pages had quite a bit of that info

Message 222 - 2025-02-10 08:32
From: Hubert Stefanski
----------------------------------------
I'll check to see what's up to date

Message 223 - 2025-02-10 08:38
From: Jochen Breuer
----------------------------------------
Awesome. Thanks a lot!

Message 224 - 2025-02-10 08:44
From: Michael Ho
----------------------------------------
@Hubert Stefanski I got some feedback today that the auto-bot account can't seem to access
https://gitlab.com/redhat/rhel/src/kernel/rhel-8.git - I might need to log in to check manually

Message 225 - 2025-02-10 08:46
From: Michael Ho
----------------------------------------
Ah yes.... it's in the Red Hat org but not in the rhel group...

Message 226 - 2025-02-10 08:47
From: Hubert Stefanski
----------------------------------------
any idea what we need to do to join it? or who can add us there?

Message 227 - 2025-02-10 08:47
From: Michael Ho
----------------------------------------
I have no idea

Message 228 - 2025-02-10 08:47
From: Michael Ho
----------------------------------------
Maybe Don?

Message 229 - 2025-02-10 08:47
From: Michael Ho
----------------------------------------
Do you have access to https://gitlab.com/redhat/rhel/ ?

Message 230 - 2025-02-10 08:48
From: Michael Ho
----------------------------------------
It appears to be done via SAML

Message 231 - 2025-02-10 08:49
From: Hubert Stefanski
----------------------------------------
I guess not, since I get a 404 on that page

Message 232 - 2025-02-10 08:49
From: Michael Ho
----------------------------------------
Maybe it's by getting package maintainer rights

Message 233 - 2025-02-10 08:51
From: Hubert Stefanski
----------------------------------------
Do you need access to just one or more repos there?

Message 234 - 2025-02-10 08:53
From: Michael Ho
----------------------------------------
Would be good to just get the broad rhel access since we might need to access the source repo of any
package there

Message 235 - 2025-02-10 08:55
From: Michael Ho
----------------------------------------
I'm guessing it's because I'm in the bugzilla-redhat
(https://rover.redhat.com/groups/group/bugzilla-redhat) rover group

Message 236 - 2025-02-10 08:55
From: Michael Ho
----------------------------------------
And I bet you're not

Message 237 - 2025-02-10 08:56
From: Michael Ho
----------------------------------------
Ah yes, they even documented it: https://gitlab.com/redhat/rhel/gitlab#user-content-membership

Message 238 - 2025-02-10 08:57
From: Michael Ho
----------------------------------------
I'm not sure if we should try sign up the mailing list auto-toolchain-devel in the bugzilla or find
another way... but probably it would be fine...

Message 239 - 2025-02-10 09:05
From: Michael Ho
----------------------------------------
@Hubert Stefanski Michael Hofmann authored some of that doc, maybe you could ask him for some help?
:sweat_smile:

Message 240 - 2025-02-10 09:05
From: Michael Ho
----------------------------------------
The other authors are Stephen Gallagher, and Veronika Kabátová

Message 241 - 2025-02-10 09:20
From: Hubert Stefanski
----------------------------------------
Luckily @U01TD879DV5  is already in this channel :sweat_smile:

Message 242 - 2025-02-10 09:21
From: Hubert Stefanski
----------------------------------------
Michael, can you help us out here?

Message 243 - 2025-02-10 15:36
From: Hubert Stefanski
----------------------------------------
@Michael Ho once you get the password reset can you update
https://spaces.redhat.com/display/Automotive/General+Purpose+LDAP+Service+accounts with the
bitwarden entry?

Message 244 - 2025-02-10 15:38
From: Michael Ho
----------------------------------------
of course

Message 245 - 2025-02-11 15:18
From: Hubert Stefanski
----------------------------------------
Hey folks, Heads up, we got an abuse report from aws
&gt; Hello, &gt; &gt; We've received a report(s) that your AWS resource(s) &gt; &gt; AWS ID:
587138297281 Region: us-east-1 EC2 Instance ID: i-088a197c07574e738 &gt; AWS ID: 587138297281
Region: us-east-1 EC2 Instance ID: eni-07071fe262c03fd85 &gt; &gt; has been implicated in activity
which resembles attempts to access remote hosts on the internet without authorization. Activity of
this nature is forbidden in the AWS Acceptable Use Policy (https://aws.amazon.com/aup/). We've
included the original report below for your review. &gt; &gt; Please take action to stop the
reported activity and reply directly to this email with details of the corrective actions you have
taken. If you do not consider the activity described in these reports to be abusive, please reply to
this email with details of your use case. &gt; &gt; If you're unaware of this activity, it's
possible that your environment has been compromised by an external attacker, or a vulnerability is
allowing your machine to be used in a way that it was not intended. &gt; &gt; The logs provided in
the report(s) indicate your instance has attempted to deliver a malicious payload to our trusted
third party reporter. &gt; &gt; * The "Payload_class" section of the report indicates a known
vulnerability your instance attempted to exploit. &gt; * The "Payload_data" section contains the
base64 encoded malicious payload your instance attempted to deliver. &gt; Based on the report, we
believe your instance has most likely been compromised or is being exploited by a bad actor. &gt;
&gt; We require one of the following actions to resolve this case: &gt; &gt; 1. If your instance has
been compromised we recommend you investigate for any malware, malicious scripts or backdoors, and
respond to us confirming that malicious items have been identified and removed. &gt; 2. If you
cannot identify the source of the reported activity the best course of action is to migrate your
applications to a new, secured instance, and terminate the reported one. &gt; 3. If you believe this
traffic is intended we will require a use-case that explains why your instance attempted to deliver
this payload to the reported target. &gt; &gt; Please remember that you are responsible for ensuring
that your instances and all applications are properly secured. If you require any further
information to assist you in identifying or rectifying this issue, please let us know in a direct
reply to this message.

Message 246 - 2025-02-11 15:19
From: Hubert Stefanski
----------------------------------------
Please DO NOT, delete this instance, or touch it, I've stopped it for the time being

Message 247 - 2025-02-11 15:20
From: Hubert Stefanski
----------------------------------------
From what I can see, the instance was started with @Juanje Ojeda keys, but I'm sure Juanje wouldn't
be trying to brute force other instances

Message 248 - 2025-02-11 15:21
From: Hubert Stefanski
----------------------------------------
&gt; Details of the abusive activity: &gt; &gt; Amazon resource identifier:
arn:aws:ec2:us-east-1:587138297281:instance/i-088a197c07574e738 &gt; Report begin time: 2025-02-11
03:57:15 UTC &gt; Report end time: 2025-02-11 03:57:15 UTC &gt; &gt; Remote IP/Ports: &gt;
35.159.195.2 222 Protocol: TCP &gt; &gt; &gt; It appears the instance(s) may be compromised and
triggered an attack. It is advisable to update all applications and ensure the most current patches
are applied. &gt; It is recommended that no ports be open to the public (0.0.0.0/0
(http://0.0.0.0/0) or ::0). Opening ports with vulnerable applications can cause abusive behavior.
&gt; &gt; --------------------------- &gt; { &gt; "destination_ip": "35.159.195.2", &gt;
"destination_port": 222, &gt; "payload_class": "exploit:gen/ssh_intrusion", &gt; "payload_data":
"dW5hbWUgLXMgLW0=", &gt; "protocol": "tcp", &gt; "source_domain":
"ec2-184-72-188-233.compute-1.amazonaws.com (http://ec2-184-72-188-233.compute-1.amazonaws.com)",
&gt; "source_ip": "184.72.188.233", &gt; "timestamp": 1739246235 &gt; }

Message 249 - 2025-02-11 15:21
From: Juanje Ojeda
----------------------------------------
Is it one instance or two?

Message 250 - 2025-02-11 15:21
From: Hubert Stefanski
----------------------------------------
an instance and a network interface

Message 251 - 2025-02-11 15:22
From: Juanje Ojeda
----------------------------------------
Hmmmm... that's from today?

Message 252 - 2025-02-11 15:22
From: Hubert Stefanski
----------------------------------------
It was started on Sunday Feb 9th

Message 253 - 2025-02-11 15:22
From: Hubert Stefanski
----------------------------------------
assuming you don't work on Sundays :wink:

Message 254 - 2025-02-11 15:22
From: Juanje Ojeda
----------------------------------------
:see_no_evil:

Message 255 - 2025-02-11 15:23
From: Michael Ho
----------------------------------------
Sun Feb 09 2025 15:35:23 GMT+0100 (Central European Standard Time) (2 days)

Message 256 - 2025-02-11 15:23
From: Michael Ho
----------------------------------------
Instance type t3.micro

Message 257 - 2025-02-11 15:23
From: Juanje Ojeda
----------------------------------------
I think I started the instance. But I thought I destroyed it. Maybe I didn't :disappointed: I
created another one, but I'm sure I destroyed that other one

Message 258 - 2025-02-11 15:23
From: Michael Ho
----------------------------------------
auto-osbuild-qemu-rhivos-fusa-minimal-ostree-x86_64-10743603.1e9584d3

Message 259 - 2025-02-11 15:23
From: Juanje Ojeda
----------------------------------------
Yep, that's the second one I created :confused:

Message 260 - 2025-02-11 15:23
From: Michael Ho
----------------------------------------
One bad thing:
https://us-east-1.console.aws.amazon.com/vpcconsole/home?region=us-east-1#NetworkAclDetails:networkAclId=acl-81df36fd

Message 261 - 2025-02-11 15:23
From: Michael Ho
----------------------------------------
the firewall is set to literally open everything

Message 262 - 2025-02-11 15:23
From: Juanje Ojeda
----------------------------------------
I guess I didn't terminated properly :confused:

Message 263 - 2025-02-11 15:24
From: Michael Ho
----------------------------------------
@Juanje Ojeda does that image have a default password set?

Message 264 - 2025-02-11 15:24
From: Michael Ho
----------------------------------------
i.e. the root password is password?

Message 265 - 2025-02-11 15:24
From: Michael Ho
----------------------------------------
I thought we disabled awhile back the default open ssh state of these images...

Message 266 - 2025-02-11 15:25
From: Juanje Ojeda
----------------------------------------
yes

Message 267 - 2025-02-11 15:25
From: Juanje Ojeda
----------------------------------------
They shouldn't be able to modify the image (ostree, composefs, signed modules, etc), but they could
access with root

Message 268 - 2025-02-11 15:25
From: Hubert Stefanski
----------------------------------------
yes == we disabled it, or yes == it uses `password`? :sweat_smile:

Message 269 - 2025-02-11 15:26
From: Juanje Ojeda
----------------------------------------
the second line answer that. Yes is uses password

Message 270 - 2025-02-11 15:26
From: Michael Ho
----------------------------------------
:meow_crying:

Message 271 - 2025-02-11 15:27
From: Michael Ho
----------------------------------------
That's a pity.. I know QE found it annoying to not be able to ssh into systems easily but it is such
a dangerous thing to do..

Message 272 - 2025-02-11 15:28
From: Juanje Ojeda
----------------------------------------
the idea was to have the image manifest to be very explicit and avoid to pass many options during
build time, to make the images more predictable and reproducibles

Message 273 - 2025-02-11 15:29
From: Juanje Ojeda
----------------------------------------
Before we add it only for the boards, and not for the AMI. But now that it's in the image
definition, the option is for all the images :confused:

Message 274 - 2025-02-11 15:29
From: Juanje Ojeda
----------------------------------------
Maybe we need to move it back to the build time

Message 275 - 2025-02-11 15:29
From: Michael Ho
----------------------------------------
:sweat_smile: This could be making the testing-farm open for security attacks

Message 276 - 2025-02-11 15:30
From: Juanje Ojeda
----------------------------------------
I mean, normally it's not that unsafe, as the instance will be up for a few minutes. But the problem
was that I left the instance running a couple of days by mistake :confused:

Message 277 - 2025-02-11 15:31
From: Michael Ho
----------------------------------------
Yeah but sometimes QE might trigger an instance and leave it running for debug, or long running
tests..

Message 278 - 2025-02-11 15:31
From: Michael Ho
----------------------------------------
And you might be able to jump from one open instance to something else

Message 279 - 2025-02-11 15:31
From: Michael Ho
----------------------------------------
Even if it's only a few minutes, once someone figures out these instances are coming up and down
regularly, they can target them

Message 280 - 2025-02-11 15:31
From: Hubert Stefanski
----------------------------------------
We'll be moving the specific conversation to #C08CL3Y7GF8|, that was set up by the infosec folks for
this incident

Message 281 - 2025-02-11 15:31
From: Michael Ho
----------------------------------------
ack

Message 282 - 2025-02-11 15:33
From: Juanje Ojeda
----------------------------------------
&gt; Yeah but sometimes QE might trigger an instance and leave it running for debug, or long running
tests.. Not really, they don't have aws credentials, so they can't.

Message 283 - 2025-02-11 16:27
From: Juanje Ojeda
----------------------------------------
Sorry for the incident and for the noise with the MR to fix the images. Here is an updated MR for
removing the access to the ssh via password. It still allow access as root, because it's how TF
access and the public ssh keys are set for that user. But the only way to access to the EC2
instances will be as before, via public ssh keys.
https://gitlab.com/redhat/edge/ci-cd/pipe-x/custom-images/-/merge_requests/59/diffs

Message 284 - 2025-02-11 16:42
From: Jochen Breuer
----------------------------------------
Thanks for the quick fix!

Message 285 - 2025-02-11 16:50
From: Juanje Ojeda
----------------------------------------
The good thing is that this wasn't used in production yet. We weren't building the fusa-minimal in
the pipeline, it was just in a MR, so the impact was minimal (:sweat_smile:). But at least we detect
it before we started to use it for ALL the pipelines every day :sweat_smile:

Message 286 - 2025-02-11 20:02
From: Michal Skrivanek
----------------------------------------
yay cloud. That's the public ranch? With rhivos image??

Message 287 - 2025-02-12 00:38
From: Juanje Ojeda
----------------------------------------
It wasn't a public ranch, it wasn't in TF. I create an ec2 instance out of the AMI from the pipeline
to test why the smoke-test weren't working on those images. But it was an autosd fusa-iminimal
image.

Message 288 - 2025-02-12 06:35
From: Michal Skrivanek
----------------------------------------
We still call autosd rhivos? Ok. Best to build as without pwd indeed, but I still think we either
should remove it only for aws or remove it for all and e.g. have a devel key documented at sigdocs.
Otherwise it really is a horrible experience

Message 289 - 2025-02-13 12:22
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv did anything change with the rhivos webserver's ssl cert? From CKI they reported me
this error, which they think wasn't before: ```requests.exceptions.SSLError:
HTTPSConnectionPool(host='rhivos.auto-toolchain.redhat.com
(http://rhivos.auto-toolchain.redhat.com)', port=443): Max retries exceeded with url:
/in-vehicle-os-9/RHIVOS-1/latest-RHIVOS-1/test_images_info.json (Caused by
SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed:
self-signed certificate in certificate chain (_ssl.c:1006)'))```

Message 290 - 2025-02-13 14:25
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv Is anything going on right now with that URL. It's on and off all the time

Message 291 - 2025-02-13 14:25
From: Juanje Ojeda
----------------------------------------
https://rhivos.auto-toolchain.redhat.com/in-vehicle-os-9/

Message 292 - 2025-02-14 09:59
From: Hubert Stefanski
----------------------------------------
Hey, small review here for anyone :)
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/434

Message 293 - 2025-02-14 09:59
From: Hubert Stefanski
----------------------------------------
I yet again, failed to provide the correct url

Message 294 - 2025-02-14 09:59
From: Hubert Stefanski
----------------------------------------
this one _should_ work

Message 295 - 2025-02-17 11:52
From: Hubert Stefanski
----------------------------------------
Hi folks, regarding `[AWS-ATEAM-STAGE] Your Amazon Web Services Multi-Factor Authentication (MFA)
Has Been Deactivated External` Was this anyone here? If not I need to escalate this somewhere, that
MFA was in our bitwarden, so I'm quite concerned how this could have happened

Message 296 - 2025-02-17 13:02
From: Hubert Stefanski
----------------------------------------
https://redhat.service-now.com/surl.do?n=CHG0106915 this was an expected removal, but I didn't catch
any of the communication leading up to it, my inbox has no mention of it. And apparently we were one
of the few accounts that actually enabled MFA for ourselves, so nothing to be concerned about in the
end :phew-obama:

Message 297 - 2025-02-18 15:20
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv, in your time, could we onboard the gator repo to our custom runners? right now one of
the test run pipelines is taking a bit of time, and i'm 99% confident it'll reach a timeout before
we get a response from test console with all the results we need
https://gitlab.cee.redhat.com/automotive/fences/gating/gator/-/jobs/31582407 I believe currently
we're limited by the shared runners to 4 hours

Message 298 - 2025-02-18 15:58
From: Hubert Stefanski
----------------------------------------
^^ actually, hold on that, I think there might be a better way

Message 299 - 2025-02-25 15:14
From: Nisha Saini
----------------------------------------
Hi All, looks like we have 2 CMDB IDs for the same service Test Console. Can someone confirm which
one should be used? VHCL-015 was created as part of the SOA &amp; ESS coverage. I am not sure when
TCA-001 was created. Cc : @Luigi Pellecchia, @Roni Eliezer, @Juanje Ojeda, @Steve Loranz, @Avihai
Efrat , @Paul Caramuto Background: The delegate-owner was updated as part of MR!7147
(https://gitlab.cee.redhat.com/catalog/catalog/-/merge_requests/7147/diffs#252c6481726b7fc1970762c2e6a999df0a50183c)
in Jan, whereas I am still getting Test-Console email notifications. When I checked with the CMDB
team they told we have 2 test console applications.

Message 300 - 2025-02-25 17:20
From: Avihai Efrat
----------------------------------------
I vaguely remember @Roni Eliezer asking for slack or mailing list to notify TC announcements and he
might have created another CMDB ID , not sure why. Maybe @Luigi Pellecchia knows more

Message 301 - 2025-02-25 19:59
From: Luigi Pellecchia
----------------------------------------
I'm only aware about the TCA-001

Message 302 - 2025-02-25 19:59
From: Luigi Pellecchia
----------------------------------------
I'll take a look tomorrow and I'll let you know

Message 303 - 2025-02-26 08:12
From: Nisha Saini
----------------------------------------
@Luigi Pellecchia: VHCL-015 was created as part of RHIVOS services. The epic VROOM-24606
(https://issues.redhat.com/browse/VROOM-24606) covers all the RHIVOS services &amp; the spreadsheet
(https://docs.google.com/spreadsheets/d/1J6KqIrTH5aLMhsHKJrXlIm-MfPV_NZgG-ldaSAs0IDQ/edit?gid=0#gid=0)
covers all the details of ESS &amp; SOA. IMHO if the TCA-001 has not started any work then we can
remove that &amp; continue to use VHCL-015 because that has all the prodSec work tracked. WDYT?

Message 304 - 2025-02-26 09:55
From: Kanitha Chim
----------------------------------------
Are we pulling a lot from Docker Hub? seems they are going to lower the limit per hour
https://docs.docker.com/docker-hub/usage/

Message 305 - 2025-02-26 09:57
From: Kanitha Chim
----------------------------------------
already hitting the issue here:
https://gitlab.cee.redhat.com/automotive/services/supply-chain-webserver/-/jobs/31822893

Message 306 - 2025-02-26 10:03
From: Hubert Stefanski
----------------------------------------
I _think_ we can mitigate at least part of that by shifting more jobs to the runners that @Eitan
Raviv is provisioning

Message 307 - 2025-02-26 10:03
From: Hubert Stefanski
----------------------------------------
but, 10 pulls PER HOUR, is insanely low...

Message 308 - 2025-02-26 10:04
From: Hubert Stefanski
----------------------------------------
I guess we could add docker auth to our runners somehow, and increase that to 100

Message 309 - 2025-02-26 10:04
From: Hubert Stefanski
----------------------------------------
Which we'd probbaly be good with for quite a while since we don' use dockerhub all that much in our
pipelines

Message 310 - 2025-02-26 10:04
From: Hubert Stefanski
----------------------------------------
except for some lint jobs i.e this one

Message 311 - 2025-02-26 11:01
From: Robert O'Brien
----------------------------------------
There was a mail on 10 January with subject "[REMINDER - ACTION REQUIRED] Cease use of Docker
Desktop and Docker Hub" and a link to
https://docs.google.com/document/d/17rJ8x57ao8wZ3Twyyr3zpBQHStceZXMoLFKfiuBYQw8/preview?tab=t.0#heading=h.v94vn0afrs7p
Could that be a factor here?

Message 312 - 2025-02-26 11:41
From: Kanitha Chim
----------------------------------------
yeah it seems that we might have to migrate from Docker Hub

Message 313 - 2025-02-26 11:41
From: Kanitha Chim
----------------------------------------
thanks @Robert O'Brien for sharing!

Message 314 - 2025-02-26 12:16
From: Juanje Ojeda
----------------------------------------
We did move away from DockerHub some time ago. We have some copies of those images in quay. For
example, for that job we have this image container instead: ```quay.io/automotive-toolchain/hadolint
(http://quay.io/automotive-toolchain/hadolint)```

Message 315 - 2025-02-26 12:18
From: Juanje Ojeda
----------------------------------------
I guess we forgot about that repo :thinking_face:

Message 316 - 2025-02-26 12:18
From: Kanitha Chim
----------------------------------------
yeah I guess so

Message 317 - 2025-02-26 12:19
From: Kanitha Chim
----------------------------------------
anyway, we can also use google cache, it was recommended in that doc so I updated

Message 318 - 2025-02-26 12:20
From: Juanje Ojeda
----------------------------------------
I'd use our own images in quay as much as possible. We have more control there and the images are
scanned.

Message 319 - 2025-02-26 13:48
From: Hubert Stefanski
----------------------------------------
ezpz review for anyone :)
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/441

Message 320 - 2025-02-27 08:05
From: Michal Skrivanek
----------------------------------------
eh, anything going on with aws? dowloading image from rhivos.auto-toolchain.redhat.com
(http://rhivos.auto-toolchain.redhat.com) at 200-400KB/s, from within RH internal network...bleh

Message 321 - 2025-02-27 08:33
From: Hubert Stefanski
----------------------------------------
Haven't seen anything on my outage/announce lists, must be the server itself...

Message 322 - 2025-02-27 08:33
From: Hubert Stefanski
----------------------------------------
there's an epic that I want to pick up in the next sprint or two to replace this with a geo-based
edge cache through cloudfront

Message 323 - 2025-02-27 08:34
From: Hubert Stefanski
----------------------------------------
that should be much faster and not rely on any self-managed web servers

Message 324 - 2025-02-27 12:45
From: Ozan Unsal
----------------------------------------
Rhivos download mirror seems offline :disappointed:
https://dashboard.auto-toolchain.redhat.com/overview

Message 325 - 2025-02-27 12:53
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv any ideas?

Message 326 - 2025-02-27 12:53
From: Juanje Ojeda
----------------------------------------
I can log in :thinking_face:  (ssh)

Message 327 - 2025-02-27 12:54
From: Hubert Stefanski
----------------------------------------
What's the instance IP?

Message 328 - 2025-02-27 12:54
From: Juanje Ojeda
----------------------------------------
10.30.77.218

Message 329 - 2025-02-27 12:55
From: Juanje Ojeda
----------------------------------------
did it have a container? I don't see any running

Message 330 - 2025-02-27 12:56
From: Hubert Stefanski
----------------------------------------
yeah, it should be running one, but I can't find the instance in our account :thinking_face:

Message 331 - 2025-02-27 12:57
From: Juanje Ojeda
----------------------------------------
I don't see anything weird in the logs, but I don't see the container running...

Message 332 - 2025-02-27 12:58
From: Juanje Ojeda
----------------------------------------
I started it

Message 333 - 2025-02-27 13:00
From: Juanje Ojeda
----------------------------------------
It's running, but I can't reach the web yet :thinking_face:

Message 334 - 2025-02-27 13:02
From: Kanitha Chim
----------------------------------------
wait @Juanje Ojeda download mirror doesn't need container

Message 335 - 2025-02-27 13:04
From: Juanje Ojeda
----------------------------------------
I thought so :sweat_smile: I remember having the same doubts some time ago

Message 336 - 2025-02-27 13:04
From: Juanje Ojeda
----------------------------------------
I stopped it

Message 337 - 2025-02-27 13:04
From: Kanitha Chim
----------------------------------------
so it's not our side, we can't reach this now https://download.hosts.prod.upshift.rdu2.redhat.com/

Message 338 - 2025-02-27 13:04
From: Juanje Ojeda
----------------------------------------
There is some container image there and some commands related to it in the history, but I think
someone was testing a container there

Message 339 - 2025-02-27 13:04
From: Juanje Ojeda
----------------------------------------
Ahhhhhhh

Message 340 - 2025-02-27 13:05
From: Kanitha Chim
----------------------------------------
let's remove that container to avoid confusion

Message 341 - 2025-02-27 13:05
From: Juanje Ojeda
----------------------------------------
yep

Message 342 - 2025-02-27 13:38
From: Juanje Ojeda
----------------------------------------
Is Test Console down? https://test-console.corp.redhat.com/

Message 343 - 2025-02-27 13:40
From: Hubert Stefanski
----------------------------------------
[No text content]

Message 344 - 2025-02-27 13:40
From: Hubert Stefanski
----------------------------------------
I'll address it real quick

Message 345 - 2025-02-27 13:41
From: Juanje Ojeda
----------------------------------------
Yep, the container image tag is not in quay

Message 346 - 2025-02-27 13:42
From: Hubert Stefanski
----------------------------------------
hmm, I was checking if the docker auth config got expired or something

Message 347 - 2025-02-27 13:43
From: Hubert Stefanski
----------------------------------------
yeah, the build is stuck

Message 348 - 2025-02-27 13:43
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/services/test-console/-/jobs/31871179

Message 349 - 2025-02-27 13:44
From: Juanje Ojeda
----------------------------------------
Ouch :confused: We merged too soon the infra MR :confused: Next time we need to make sure the TC
image is already in quay

Message 350 - 2025-02-27 13:46
From: Juanje Ojeda
----------------------------------------
It looks like the RH infra problems made the previous job to build the image. It couldn't reach
`repository-basic.engineering.redhat.com (http://repository-basic.engineering.redhat.com)`
:confused:

Message 351 - 2025-02-27 13:46
From: Juanje Ojeda
----------------------------------------
```NFO[0110] Running: [/bin/sh -c curl -X GET
https://repository-basic.engineering.redhat.com/nexus/repository/dno-raw/droute-client/1.2.2/droute-linux-386
-o "${DROUTE_PATH}" &amp;&amp; chmod +x "${DROUTE_PATH}"] % Total % Received % Xferd Average Speed
Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- 0:02:07 --:--:--
0 curl: (28) Failed to connect to repository-basic.engineering.redhat.com
(http://repository-basic.engineering.redhat.com) port 443: Connection timed out error building
image: error building stage: failed to execute command: waiting for process to exit: exit status
28```

Message 352 - 2025-02-27 13:47
From: Juanje Ojeda
----------------------------------------
I think it's better to come back to the previous tag until this start to work again and we can build
the image

Message 353 - 2025-02-27 13:48
From: Juanje Ojeda
----------------------------------------
Or we could even use (for now) the tag from the MR: `ride4-inventory-change`

Message 354 - 2025-02-27 13:48
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/443

Message 355 - 2025-02-27 13:48
From: Hubert Stefanski
----------------------------------------
if you want to revert

Message 356 - 2025-02-27 13:49
From: Juanje Ojeda
----------------------------------------
Let's revert it. It's the safest bet for now

Message 357 - 2025-02-27 13:49
From: Juanje Ojeda
----------------------------------------
@Kanitha Chim @Ozan Unsal could you approve that MR?

Message 358 - 2025-02-27 13:52
From: Hubert Stefanski
----------------------------------------
back now

Message 359 - 2025-02-27 13:52
From: Hubert Stefanski
----------------------------------------
IaC doing what it does best :)

Message 360 - 2025-02-27 13:55
From: Juanje Ojeda
----------------------------------------
I wonder why that job was still looking for a runner. I cancel it because it was 16 min in and
nothing :thinking_face: I restarted it again, to see if now it pick a runner.

Message 361 - 2025-02-27 13:57
From: Kanitha Chim
----------------------------------------
I have MR that has been pending for awhile as well

Message 362 - 2025-02-27 14:03
From: Hubert Stefanski
----------------------------------------
a future improvement we can use openshift image streams to build on the cluster and have it
available in the local registry

Message 363 - 2025-02-27 14:03
From: Hubert Stefanski
----------------------------------------
on top of the quay build we do

Message 364 - 2025-02-28 11:57
From: Luigi Pellecchia
----------------------------------------
May I ask a review at
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/444

Message 365 - 2025-02-28 12:53
From: Hubert Stefanski
----------------------------------------
merged ^^

Message 366 - 2025-02-28 13:08
From: Luigi Pellecchia
----------------------------------------
thanks

Message 367 - 2025-03-04 13:01
From: U04QNBZUT2R
----------------------------------------
Hi @Hubert Stefanski I've created a patch for introducing a python313-pdm image in
https://gitlab.com/redhat/edge/ci-cd/pipe-x/tools/auto-toolchain-containers/-/merge_requests/85
IIUC, I need an image registry to upload the image to. Can you please create one for it?

Message 368 - 2025-03-04 13:07
From: Hubert Stefanski
----------------------------------------
Yeah, I'll create the repo for it now

Message 369 - 2025-03-04 13:07
From: Hubert Stefanski
----------------------------------------
@Michael Ho you want this public right? ^^

Message 370 - 2025-03-04 13:37
From: Ryan Smith
----------------------------------------
Yes, as the other ones are

Message 371 - 2025-03-04 13:39
From: Michael Ho
----------------------------------------
@Hubert Stefanski Why don't you manage the toolchain container images in IaC like Ryan set up for
FoA?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/tree/main/quay/auto-fusa?ref_type=heads

Message 372 - 2025-03-04 13:40
From: Hubert Stefanski
----------------------------------------
We'd like to, but given the lack of interns in toolchain I haven't found the time myself :wink:

Message 373 - 2025-03-04 13:40
From: Hubert Stefanski
----------------------------------------
but it is absolutely something I'd like to have

Message 374 - 2025-03-05 11:53
From: Juanje Ojeda
----------------------------------------
I didn't know @Ryan Smith has done that. It looks really good. Did you share it before? I don't
remember seeing anything about it. We definitively should use it for toolchain's containers
:slightly_smiling_face:

Message 375 - 2025-03-06 12:23
From: Juanje Ojeda
----------------------------------------
@Kanitha Chim I was checking the TC and confirming with Roni that we're not using the mirror
anymore. We had the mirror to avoid the test failing due to long downloads for the images, but it
seems like that's no longer an issue. Should we remove the the mirror? Less traffic and one infra
piece less to maintain. WDYT?

Message 376 - 2025-03-06 12:24
From: Kanitha Chim
----------------------------------------
I think the performance and scale team might use it

Message 377 - 2025-03-06 12:25
From: Kanitha Chim
----------------------------------------
there's not much thing to maintain there, I would keep it until we have better solution for rhivos
webserver

Message 378 - 2025-03-06 12:26
From: Kanitha Chim
----------------------------------------
since right now, we have plan on regularly maintaining webserver host and updating container

Message 379 - 2025-03-06 12:31
From: Juanje Ojeda
----------------------------------------
Well, we do a lot of transfer there and we need to update it every time we do a release. Not a lot
of maintenance, but some. And costs.

Message 380 - 2025-03-06 12:32
From: Juanje Ojeda
----------------------------------------
We can ask P&amp;S. I'm not sure which URL are they using :thinking_face:

Message 381 - 2025-03-06 12:40
From: Kanitha Chim
----------------------------------------
yes, let's make sure nobody will use it

Message 382 - 2025-03-06 12:42
From: Kanitha Chim
----------------------------------------
always better to not maintaining many services but onece we give back the resources(volume) it's a
bit time consuming to ask back again

Message 383 - 2025-03-06 16:18
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Kanitha Chim the rhivos webserver is down :disappointed: I'm chekcing but I still
don't see anything. The container is running, but I don't see anything from the container logs

Message 384 - 2025-03-06 16:19
From: Kanitha Chim
----------------------------------------
has there any changes?

Message 385 - 2025-03-06 16:19
From: Juanje Ojeda
----------------------------------------
None that I can see

Message 386 - 2025-03-06 16:20
From: Kanitha Chim
----------------------------------------
Status: up 2 days

Message 387 - 2025-03-06 16:20
From: Kanitha Chim
----------------------------------------
maybe there is recent change

Message 388 - 2025-03-06 16:21
From: Kanitha Chim
----------------------------------------
maybe try restarting for now?

Message 389 - 2025-03-06 16:21
From: Kanitha Chim
----------------------------------------
oh it's back

Message 390 - 2025-03-06 16:21
From: Juanje Ojeda
----------------------------------------
Maybe it's me, I see the keepalive doing fine. Could you check the web?

Message 391 - 2025-03-06 16:21
From: Kanitha Chim
----------------------------------------
lol

Message 392 - 2025-03-06 16:21
From: Juanje Ojeda
----------------------------------------
Maybe it's my vpn

Message 393 - 2025-03-06 16:21
From: Juanje Ojeda
----------------------------------------
Oh

Message 394 - 2025-03-06 16:22
From: Kanitha Chim
----------------------------------------
no it was down for me too

Message 395 - 2025-03-06 16:22
From: Kanitha Chim
----------------------------------------
but now it's back

Message 396 - 2025-03-06 16:22
From: Juanje Ojeda
----------------------------------------
magic

Message 397 - 2025-03-06 16:22
From: Juanje Ojeda
----------------------------------------
weird

Message 398 - 2025-03-06 16:22
From: Juanje Ojeda
----------------------------------------
do we have a splurk logs we can check?

Message 399 - 2025-03-06 16:23
From: Kanitha Chim
----------------------------------------
maybe but I don't know where to find

Message 400 - 2025-03-06 16:23
From: Kanitha Chim
----------------------------------------
@Eitan Raviv ^^

Message 401 - 2025-03-06 16:26
From: Eitan Raviv
----------------------------------------
look for a dashboard with the name `rhivos-webserver-10.33.77.220` on
https://rhcorporate.splunkcloud.com/en-US/app/launcher/home

Message 402 - 2025-03-06 16:28
From: Kanitha Chim
----------------------------------------
thanks @Eitan Raviv

Message 403 - 2025-03-06 16:32
From: Eitan Raviv
----------------------------------------
but I think it would be easier to search journalctl on the machine, the splunk logs are horrible to
navigate unless you are familiar with its DSL

Message 404 - 2025-03-07 10:11
From: Michal Skrivanek
----------------------------------------
```curl -kO
https://rhivos.auto-toolchain.redhat.com/in-vehicle-os-9/RHIVOS-1/latest-RHIVOS-1/raw-images/auto-osbuild-qemu-rhivos-qa-regular-aarch64-10969896.dc98bc06.raw.xz
% Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed
8 512M 8 44.3M 0 0 379k 0 0:23:03 0:01:59 0:21:04 335k``` this is so slooow...

Message 405 - 2025-03-07 10:17
From: Michal Skrivanek
----------------------------------------
bah, it's 4x faster to rebuild it myself than to download it

Message 406 - 2025-03-07 10:32
From: Kanitha Chim
----------------------------------------
I'll take a look into the issue

Message 407 - 2025-03-07 10:46
From: Kanitha Chim
----------------------------------------
```aws ec2 describe-instance-types --filters "Name=instance-type,Values=t2.*" --query
"InstanceTypes[].[InstanceType, NetworkInfo.NetworkPerformance,
NetworkInfo.NetworkCards[0].BaselineBandwidthInGbps] | sort_by(@,&amp;[2])" --output table
-------------------------------------------- | DescribeInstanceTypes |
+-------------+-------------------+--------+ | t2.nano | Low to Moderate | 0.032 | | t2.micro | Low
to Moderate | 0.064 | | t2.small | Low to Moderate | 0.128 | | t2.medium | Low to Moderate | 0.256 |
| t2.large | Low to Moderate | 0.512 | | t2.xlarge | Moderate | 0.75 | | t2.2xlarge | Moderate | 1.0
|``` rhivos webserver is t2.large I think we can try to update the instance type

Message 408 - 2025-03-07 15:11
From: Kanitha Chim
----------------------------------------
I updated to t3.xlarge, hope it's better ```-------------------------------------------- |
DescribeInstanceTypes | +-------------+-------------------+--------+ | t3.nano | Up to 5 Gigabit |
0.032 | | t3.micro | Up to 5 Gigabit | 0.064 | | t3.small | Up to 5 Gigabit | 0.128 | | t3.medium |
Up to 5 Gigabit | 0.256 | | t3.large | Up to 5 Gigabit | 0.512 | | t3.xlarge | Up to 5 Gigabit |
1.024 | | t3.2xlarge | Up to 5 Gigabit | 2.048 | +-------------+-------------------+--------+```

Message 409 - 2025-03-07 15:16
From: Michal Skrivanek
----------------------------------------
let's see next friday:) thanks!

Message 410 - 2025-03-11 16:22
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Hubert Stefanski did we changed anything in the runners for the d-p-a-c project? The
pipeline got stuck in this job:
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/32239775

Message 411 - 2025-03-14 12:45
From: Hubert Stefanski
----------------------------------------
pretty easy review for anyone around
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/455

Message 412 - 2025-03-14 12:45
From: Hubert Stefanski
----------------------------------------
@Simon Walter ^^ this onboards bos2

Message 413 - 2025-03-17 10:56
From: Hubert Stefanski
----------------------------------------
Hey @Eitan Raviv, @Albert Esteve was wondering if you could help out getting a runner up for
https://gitlab.cee.redhat.com/automotive/functional-safety/kernel-test-sufficiency

Message 414 - 2025-03-17 16:30
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv Any idea why this jobs is not picking up the runner? :thinking_face:
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/32417456 The
`release` runner seems to be online :thinking_face:

Message 415 - 2025-03-19 15:53
From: Juanje Ojeda
----------------------------------------
I just wanted to say that I'm very happy that we have new runners and that they seem to work fine
and faster :slightly_smiling_face: The last pipeline took `155 minutes` ~ 2.5 hours :thinking_face:
:slightly_smiling_face:

Message 416 - 2025-03-19 15:54
From: Juanje Ojeda
----------------------------------------
Thanks, @Eitan Raviv for all the work and @Hubert Stefanski for all the help there :clap:

Message 417 - 2025-03-20 10:23
From: Avihai Efrat
----------------------------------------
Great news ! Thank you both @Eitan Raviv and @Hubert Stefanski :clap: :clap: :clap:

Message 418 - 2025-03-28 12:52
From: Hubert Stefanski
----------------------------------------
Any reviews welcome here:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/435/diffs simple MR
to configure renovate for our repositories

Message 419 - 2025-03-28 12:52
From: Hubert Stefanski
----------------------------------------
You'll also see it sending out merge requests for renovate.json, to enable dependency updates for
the relevant groups

Message 420 - 2025-03-28 12:53
From: Hubert Stefanski
----------------------------------------
@Ryan Smith if you'd like to have contcert included here as well, feel free to extend:
`RENOVATE_EXTRA_FLAGS: --autodiscover=true
--autodiscover-namespaces=automotive/pipe-x,automotive/fences,automotive/services`

Message 421 - 2025-03-31 08:01
From: Hubert Stefanski
----------------------------------------
^^ one approval remaining, if anyone would be so kind :meow_pwettyplease:

Message 422 - 2025-03-31 11:48
From: Ryan Smith
----------------------------------------
Any idea why Im not able to run manual deploy jobs on the latest infrastructure pipeline?

Message 423 - 2025-03-31 11:49
From: Ryan Smith
----------------------------------------
Do I have to submit an empty MR for contcert in order to run those jobs?

Message 424 - 2025-03-31 11:50
From: Ryan Smith
----------------------------------------
Looks like I can do manual run against the main branch

Message 425 - 2025-03-31 12:02
From: Hubert Stefanski
----------------------------------------
What I usually do is take the latest pipeline and run the relevant job manually from there

Message 426 - 2025-03-31 12:15
From: Ryan Smith
----------------------------------------
yeah that's what I mean is I cant do that

Message 427 - 2025-03-31 12:15
From: Ryan Smith
----------------------------------------
It says Im not authorized to run those jobs

Message 428 - 2025-03-31 12:48
From: Hubert Stefanski
----------------------------------------
oh, :thinking_face:  alright let me run that one for you, preprod or prod?

Message 429 - 2025-03-31 12:48
From: Hubert Stefanski
----------------------------------------
I didn't remove you from any of those groups, and I'm pretty certain you had those permissions
before

Message 430 - 2025-03-31 12:56
From: Ryan Smith
----------------------------------------
Id like to run these two in order: • `deploy-ansible-mpp-contcert-admin-prod` •
`deploy-ansible-mpp-contcert-prod`

Message 431 - 2025-03-31 13:13
From: Hubert Stefanski
----------------------------------------
done

Message 432 - 2025-03-31 13:22
From: Ryan Smith
----------------------------------------
:thinking_meow:

Message 433 - 2025-03-31 13:23
From: Ryan Smith
----------------------------------------
I must not have the limit ranges up to date in the playbook then

Message 434 - 2025-03-31 13:24
From: Ryan Smith
----------------------------------------
I do, so why didn't it apply correctly

Message 435 - 2025-03-31 13:24
From: Hubert Stefanski
----------------------------------------
are you exceeding the limit ranges or the appliedResourceQuota for the tenant?

Message 436 - 2025-03-31 13:24
From: Ryan Smith
----------------------------------------
No those should match preprod already

Message 437 - 2025-03-31 13:24
From: Hubert Stefanski
----------------------------------------
not sure if you've requested a resource increase already

Message 438 - 2025-03-31 13:24
From: Hubert Stefanski
----------------------------------------
if not, it's quite easy, if yes, then ignore me

Message 439 - 2025-03-31 13:25
From: Ryan Smith
----------------------------------------
Yeah I had both clusters get a boost at the same time, they match

Message 440 - 2025-03-31 13:26
From: Ryan Smith
----------------------------------------
Trying to bring to limit ranges up-to-speed, I suspect something with my use of include means the
task didn't actually get run

Message 441 - 2025-03-31 13:26
From: Ryan Smith
----------------------------------------
Going to try this locally

Message 442 - 2025-03-31 13:52
From: Ryan Smith
----------------------------------------
okay, figured out what's going on there. Since the tasks in `limits.yml` don't have tags the include
task runs, but none of the included tasks are run

Message 443 - 2025-03-31 13:52
From: Ryan Smith
----------------------------------------
Submitting an MR to fix

Message 444 - 2025-03-31 14:24
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski do you know why are we getting this error in the ansible validator for deploying a
new TC release? https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/32940049 I
just changed the container image tag, but I see more changes in the ansible output. I don't see any
errors, but the job fails :thinking_face: Sounds familiar?

Message 445 - 2025-03-31 14:25
From: Ryan Smith
----------------------------------------
Ive seen this before and usually solved it by re-running the job

Message 446 - 2025-03-31 14:25
From: Ryan Smith
----------------------------------------
It seems to be a transient thing

Message 447 - 2025-03-31 14:25
From: Juanje Ojeda
----------------------------------------
Never mind, it seems like someone retried it and now passed

Message 448 - 2025-04-01 09:52
From: Hubert Stefanski
----------------------------------------
Howdy, can anyone take a look at
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/419? looks like it's
been running stable on preprod

Message 449 - 2025-04-01 11:35
From: Hubert Stefanski
----------------------------------------
@Ryan Smith @Michael Ho I'm taking a look at the renovate config, it seems to be running stuff for:
```automotive/fences/manual-reviews automotive/fences/contcert automotive/fences/cc-kpi-scripts
automotive/fences/uas-middleware automotive/fences/contcert-in-action
automotive/fences/certified-nvras``` Can we archive any of these? I'll submit an MR to do so if
you're not using these anymore :meow_thx:

Message 450 - 2025-04-01 11:35
From: Michael Ho
----------------------------------------
afaik, these can be archived - but can't renovate just be configured to ignore automotive/fences?

Message 451 - 2025-04-01 11:53
From: Hubert Stefanski
----------------------------------------
we've got other things in automotive/fences that we want it to run for

Message 452 - 2025-04-01 11:55
From: Michael Ho
----------------------------------------
ack

Message 453 - 2025-04-01 11:55
From: Michael Ho
----------------------------------------
then yeah, should be fine to archive

Message 454 - 2025-04-01 12:05
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/472 for reviews ;)

Message 455 - 2025-04-01 13:12
From: Hubert Stefanski
----------------------------------------
@Juanje Ojeda @Luigi Pellecchia @Roni Eliezer can we get
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/445 merged?

Message 456 - 2025-04-01 13:12
From: Hubert Stefanski
----------------------------------------
I'll create followup tickets to resolve the SSL issue and the eventual preprod migration to the new
UI (that requires a bit more work)

Message 457 - 2025-04-01 16:15
From: Ozan Unsal
----------------------------------------
jobs in scheduled-jobs seem to be stuck
https://gitlab.cee.redhat.com/automotive/pipe-x/scheduled-jobs/-/pipelines :disappointed:

Message 458 - 2025-04-01 16:21
From: Juanje Ojeda
----------------------------------------
The group runners weren't enabled for that project and they probably couldn't find any runner
because the `docker` tag. I've just enabled the group runners

Message 459 - 2025-04-01 16:21
From: Juanje Ojeda
----------------------------------------
I stopped the stuck pipelines and I retried the last one

Message 460 - 2025-04-01 16:22
From: Juanje Ojeda
----------------------------------------
Now is running

Message 461 - 2025-04-02 11:36
From: Hubert Stefanski
----------------------------------------
Easy review for someone
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/474

Message 462 - 2025-04-02 11:36
From: Hubert Stefanski
----------------------------------------
just re-arranging variables for easier readability

Message 463 - 2025-04-02 13:04
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Ozan Unsal @Hubert Stefanski we should create a ticket to increase the size for the
volume used in the autosd webserver. With the new policy retention we definitively will need more
space. Here is were is defined right now:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/main/openshift/ma[…]-platform+/autosd-webserver/vars/common.yml?ref_type=heads
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/main/openshift/managed-platform+/autosd-webserver/vars/common.yml?ref_type=heads#L10)

Message 464 - 2025-04-02 13:07
From: Juanje Ojeda
----------------------------------------
Question about `Renovate` : does anyone knows if it's possible to group the updates? I see a lot of
individual MRs with a single update instead a single one with all the updates. I kinda remember
seeing MRs with multiple updates in the past. Or maybe I imagined :thinking_face:

Message 465 - 2025-04-02 15:02
From: Luigi Pellecchia
----------------------------------------
I see the most of the pipelines in gitlab are paused. any issue there?

Message 466 - 2025-04-02 16:00
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv we have a problem with the runners used by the Test Console. They were having the issue
with the `docker` tag... I made a change so they use the tag `shared-podman` and they seemed to
work, but I'm seeing other issues now. I don't think those runners are very reliable... Would it be
possible to use our pool of runners for TC and TC-frontend? Or to add another pool for them? That
service is critical for us and they need their pipelines working.

Message 467 - 2025-04-02 20:40
From: Nisha Saini
----------------------------------------
Hi All, there seems to be a misconfigured CMDB ID for autosd webserver here it should be AUTO-001

Message 468 - 2025-04-03 08:10
From: Luigi Pellecchia
----------------------------------------
Hi everyone, I still see gitlab pipelines in pause. Any updates on that side? Thanks

Message 469 - 2025-04-03 09:11
From: Avihai Efrat
----------------------------------------
Which ones @Luigi Pellecchia ? DPAC or test console one?

Message 470 - 2025-04-03 09:12
From: Luigi Pellecchia
----------------------------------------
Test console

Message 471 - 2025-04-03 09:12
From: Luigi Pellecchia
----------------------------------------
I'm referring to the code repositories

Message 472 - 2025-04-03 09:18
From: Avihai Efrat
----------------------------------------
Is this related to the docker runners issue from yesterday?
https://redhat.enterprise.slack.com/archives/C05BYR06B0V/p1743609634767319
(https://redhat.enterprise.slack.com/archives/C05BYR06B0V/p1743609634767319)

Message 473 - 2025-04-03 09:19
From: Avihai Efrat
----------------------------------------
@Juanje Ojeda @Eitan Raviv @Hubert Stefanski can we have a quick mitigation here?

Message 474 - 2025-04-03 09:24
From: Luigi Pellecchia
----------------------------------------
We need it working if we want to run we CTC as well

Message 475 - 2025-04-03 09:29
From: Robert O'Brien
----------------------------------------
2 of the 3 smoke tests failed in DPAC nightly. The successful job has just completed. I'll push
retry on the DPAC pipeline...

Message 476 - 2025-04-03 09:46
From: Hubert Stefanski
----------------------------------------
I think Eitan is going to provision some more runners that should cover TC pipelines as well,

Message 477 - 2025-04-03 09:46
From: Hubert Stefanski
----------------------------------------
did you update the tags to run on shared-podman?

Message 478 - 2025-04-03 09:49
From: Luigi Pellecchia
----------------------------------------
yes we merged that changes

Message 479 - 2025-04-03 09:50
From: Luigi Pellecchia
----------------------------------------
some pipeline there restarted but the one I need that is the one related to the patterfly-ui branch

Message 480 - 2025-04-03 09:51
From: Luigi Pellecchia
----------------------------------------
and this one in the frontend project
https://gitlab.cee.redhat.com/automotive/services/test-console-frontend/-/merge_requests/8

Message 481 - 2025-04-03 09:53
From: Luigi Pellecchia
----------------------------------------
I'm trying to cancel them and to restart again let see

Message 482 - 2025-04-03 09:54
From: Luigi Pellecchia
----------------------------------------
oh I think I have to change the tag in the branch as well right?

Message 483 - 2025-04-03 09:58
From: Luigi Pellecchia
----------------------------------------
that's the problem, now the pipeline are running

Message 484 - 2025-04-03 12:48
From: Luigi Pellecchia
----------------------------------------
guys what about this error:
https://gitlab.cee.redhat.com/automotive/services/test-console/-/jobs/33081961

Message 485 - 2025-04-03 13:13
From: Ryan Smith
----------------------------------------
Retried it, very strange

Message 486 - 2025-04-03 14:24
From: Juanje Ojeda
----------------------------------------
Oh, I saw that error in another repo yesterday. It's related with the runners config and the image
specify in the job. If the runner doesn't set any pattern for accepting images, it'll use the
format: `*/*:*` which means: `registry_name+namespace/image_name:tag` In this case, the image is
missing the tag. We need to put some tag to the image there.

Message 487 - 2025-04-03 14:26
From: Juanje Ojeda
----------------------------------------
That change I see in the MR should fix it: ```- image: quay.io/automotive-toolchain/prettier
(http://quay.io/automotive-toolchain/prettier) + image: quay.io/automotive-toolchain/prettier:latest
(http://quay.io/automotive-toolchain/prettier:latest)```

Message 488 - 2025-04-03 14:27
From: Juanje Ojeda
----------------------------------------
But maybe the problem is because there is some conflict with the main branch. @Luigi Pellecchia you
should rebase fixing those conflicts and you should be fine.

Message 489 - 2025-04-03 15:42
From: Hubert Stefanski
----------------------------------------
I peed myself a little with excitement

Message 490 - 2025-04-03 15:42
From: Hubert Stefanski
----------------------------------------
https://d1ewg8xlqy08zb.cloudfront.net/?p=autosd9-202504030201/

Message 491 - 2025-04-03 15:43
From: Hubert Stefanski
----------------------------------------
autosd downloads edge-replicated through cloudfront

Message 492 - 2025-04-03 15:43
From: Hubert Stefanski
----------------------------------------
still a few small issues, but I've been fighting getting the index and configuration all day today

Message 493 - 2025-04-03 15:45
From: Hubert Stefanski
----------------------------------------
now to get the file download working :)

Message 494 - 2025-04-03 18:19
From: Juanje Ojeda
----------------------------------------
I was testing it and everything was great until I realized what you just said in this last comment
:sweat_smile:

Message 495 - 2025-04-03 18:24
From: Hubert Stefanski
----------------------------------------
I think it's close, this access denied stuff I think is just the bucket ACL

Message 496 - 2025-04-04 07:53
From: Michael Ho
----------------------------------------
@Hubert Stefanski Is that a javascript rendered web ui? Probably will break recursive wget users..

Message 497 - 2025-04-04 07:59
From: Hubert Stefanski
----------------------------------------
It is, and it will, but since the path is actually a url param, you can drop the param and use the
full path to hit cloudfront directly circumventing the UI I still need to test that theory though
i.e for Web UI views:
https://d1ewg8xlqy08zb.cloudfront.net/?p=autosd9-202504030201/integration-testing/fusa-minimal/
-&gt; for wget:
https://d1ewg8xlqy08zb.cloudfront.net/autosd9-202504030201/integration-testing/fusa-minimal/

Message 498 - 2025-04-04 08:00
From: Hubert Stefanski
----------------------------------------
by navigating through the web UI you never really leave the top level index.html

Message 499 - 2025-04-04 08:00
From: Hubert Stefanski
----------------------------------------
anyhow, all theory until proven in practice, so I'm trying to figure out what hidden permissions are
causing the access denied

Message 500 - 2025-04-04 08:07
From: Michael Ho
----------------------------------------
Not sure wget recursive/spider handles that (I think it parses out all anchor tags in a html page to
find links)

Message 501 - 2025-04-04 08:07
From: Michael Ho
----------------------------------------
I mean, up to you guys, just saying that you might break wget recursive users which to me is a
useful/expected thing to use when downloading releases etc

Message 502 - 2025-04-04 08:10
From: Hubert Stefanski
----------------------------------------
hmm, It might still be possible _I think_ if the underlying s3 bucket has static web hosting
enabled, that usually worked for recursive wgets? cloudfront has the ability to "front" s3 static
websites as opposed to the s3 itself, so still experimenting

Message 503 - 2025-04-04 08:40
From: Luigi Pellecchia
----------------------------------------
May I ask for a review at
https://gitlab.cee.redhat.com/automotive/services/test-console/-/merge_requests/343 It is to
configure this weekend CTC, thanks

Message 504 - 2025-04-04 08:45
From: Michael Ho
----------------------------------------
@Hubert Stefanski Can you give me access to the rhivos-dashboard ec2 instance (ssh key) just so I
can take a quick look? There's a high prio item going on that could be resolved easily but the
Israeli's are on their weekend and Sameera is some hours away from starting

Message 505 - 2025-04-04 11:50
From: Luigi Pellecchia
----------------------------------------
To trigger weekend CTC
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/479

Message 506 - 2025-04-07 14:00
From: Juanje Ojeda
----------------------------------------
@Kanitha Chim do you know if we need this repo anymore?
https://gitlab.cee.redhat.com/automotive/services/build-manifest-producer I see a few MRs from
renovate, but I think we're not using that repo anymore, correct? Maybe we should archive the repos
we're not using. It'll avoid some noise from renovate and makes easy to find things. WDYT?

Message 507 - 2025-04-08 14:11
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Kanitha Chim any reason not to use ubi9 instead of fedora for this?
https://gitlab.cee.redhat.com/automotive/services/supply-chain-webserver/-/merge_requests/44/diffs

Message 508 - 2025-04-08 14:13
From: Kanitha Chim
----------------------------------------
probably goofys was not available there

Message 509 - 2025-04-08 14:14
From: Kanitha Chim
----------------------------------------
I was thinking if we should use this instead in the future
https://docs.aws.amazon.com/AmazonS3/latest/userguide/mountpoint-installation.html

Message 510 - 2025-04-08 14:19
From: Juanje Ojeda
----------------------------------------
Good question :thinking_face: I saw some benchmarks comparing goofys with s3fs, and goofys was way
better, but I guess this one from AWS should work fine :thinking_face:

Message 511 - 2025-04-08 14:19
From: Juanje Ojeda
----------------------------------------
&gt; probably goofys was not available there Well, it's not available on fedora either. We download
and install it from the tarball :thinking_face:

Message 512 - 2025-04-08 14:38
From: Kanitha Chim
----------------------------------------
we can update to ubi if it's preferred, maybe let's try to switch to amazon mountpoint since goofys
has not many activities recently

Message 513 - 2025-04-08 14:40
From: Juanje Ojeda
----------------------------------------
I think ubi is preferred by Prod&amp;Sec as it's RH maintained supposed to be production ready.

Message 514 - 2025-04-08 14:43
From: Juanje Ojeda
----------------------------------------
I did some basic tests with mountpoint and it's easy to setup and seems to be working fine. But I'm
not sure about the performance. ```# time find /mnt/RHIVOS-1/latest-RHIVOS-1/repos/ &gt; /dev/null
real 0m24.306s user 0m0.012s sys 0m0.063s``` vs goofys: ```# time find
/mnt/buckets/in-vehicle-os-9/RHIVOS-1/latest-RHIVOS-1/repos/ &gt; /dev/null
real 0m9.347s user 0m0.008s sys 0m0.018s``` I need to configure locally the goofys, so it's a fair
comparison, but my laptop should be equally or more powerful than the webserver :thinking_face:

Message 515 - 2025-04-08 14:43
From: Juanje Ojeda
----------------------------------------
And the results are almost 3 times slower.

Message 516 - 2025-04-08 14:44
From: Kanitha Chim
----------------------------------------
yeah last time, I tried it was also pretty slow

Message 517 - 2025-04-08 14:51
From: Juanje Ojeda
----------------------------------------
I repeated the goofys in my machine and it was a bit slower, but still much faster than mountpoint:
```# time find /mnt/RHIVOS-1/latest-RHIVOS-1/repos/ &gt; /dev/null
real 0m11.446s user 0m0.005s sys 0m0.019s``` And the second time it took now time at all. I guess it
was cached. I need to try that with mountpoint :thinking_face:

Message 518 - 2025-04-16 12:29
From: Michael Ho
----------------------------------------
Hi, I need to do an SIA for auto-toolchain-dashboard, does someone know if I can change the owner of
that and who that might be in toolchain now?

Message 519 - 2025-04-16 12:30
From: Michael Ho
----------------------------------------
(afaik, we're still using auto-toolchain-dashboard)

Message 520 - 2025-04-16 12:31
From: Michael Ho
----------------------------------------
@Nisha Saini Do you know?

Message 521 - 2025-04-16 12:36
From: Hubert Stefanski
----------------------------------------
Do we need SIA for internal tooling? That dashboard has no "functional" purpose for the product
itself

Message 522 - 2025-04-16 12:36
From: Nisha Saini
----------------------------------------
Hi Michael, yes we can change the owner & delegate. It needs to go through the catalog team Or if
this is urgent you can just email `techresilience@redhat.com (mailto:techresilience@redhat.com)`
with below details: 1. *Application Name* (as it appears in the ServiceNow CMDB) 2. *Application ID*
(as it appears in the ServiceNow CMDB) 3. *SIA Respondent* (the full name and Red Hat email address
of the person that will complete the survey)

Message 523 - 2025-04-16 12:50
From: Kanitha Chim
----------------------------------------
@Robert O'Brien could you be the owner of dashboard?

Message 524 - 2025-04-16 13:06
From: Michael Ho
----------------------------------------
&gt; Hi Michael, yes we can change the owner &amp; delegate. It needs to go through the catalog team
Or if this is urgent you can just email It's not urgent, I can close up the current SIA as it has a
deadline but would be good to handover this after that

Message 525 - 2025-04-16 13:08
From: Michael Ho
----------------------------------------
I see you did it, @Nisha Saini! Thank you!

Message 526 - 2025-04-17 14:59
From: Hubert Stefanski
----------------------------------------
Heads up, i'll be doing some work on the preprod instance of the autosd webserver, don't think
anyone will notice, but just wanted to FYI it for clarity

Message 527 - 2025-04-17 18:40
From: Ozan Unsal
----------------------------------------
@Eitan Raviv is there an issue with runners maybe no space on disk :good_question:
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/33575776? It is
blocking the TPU release respin :confused:

Message 528 - 2025-04-18 07:19
From: Eitan Raviv
----------------------------------------
@Ozan Unsal yes, 2 out of 4 instances reached no space on disk despite the regular podman prune
cron. Currently cleared, I will look into it. Was there an extreme load of pipelines invoked around
this time?

Message 529 - 2025-04-21 12:50
From: U03NPDKU3S8
----------------------------------------
Hi all! https://rhivos.auto-toolchain.redhat.com/in-vehicle-os-9/ is dead - returns 500: ```An error
occurred.
Sorry, the page you are looking for is currently unavailable. Please try again later.
If you are the system administrator of this resource then you should check the error log for
details.
Faithfully yours, nginx.``` Known issue? Thanks
Copied from:
https://redhat-internal.slack.com/archives/C0659G4HAF9/p1745232911037999

Message 530 - 2025-04-24 08:23
From: Kanitha Chim
----------------------------------------
@Eitan Raviv could you check this runner's log `#52629 (wJ4-rL4ms) gating_aws_docker_runner_pool`? I
think it's a bit stuck/slow

Message 531 - 2025-04-24 10:48
From: Juanje Ojeda
----------------------------------------
Do we know if there is something going on lately in GitLab CEE? I've seen a couple of nights the
pipeline failing then restarting and passing, But when you see the link for the failure
notification, it points to the GitLab CEE Staging :thinking_face:

Message 532 - 2025-04-24 10:50
From: Michael Ho
----------------------------------------
I also got emails about something from a GitLab CEE Staging instance

Message 533 - 2025-04-24 10:50
From: Michael Ho
----------------------------------------
I think they're running a staging instance to do tests and we're seeing pipeline runs from it. Tbh,
pretty scary, what if those pipeline runs did something bad...

Message 534 - 2025-04-24 10:58
From: Juanje Ojeda
----------------------------------------
yeah... they are producing false negatives and it's a bit confusing. Also, not sure if/when they run
our stuff in prod vs staging...

Message 535 - 2025-04-24 11:08
From: Michael Ho
----------------------------------------
Someone should ask in #C04HGR58KKL| to find out what this staging instance is doing

Message 536 - 2025-04-24 11:12
From: Kanitha Chim
----------------------------------------
@Juanje Ojeda could you share the notification or detail? probably easier to ask with some context

Message 537 - 2025-04-24 11:13
From: Juanje Ojeda
----------------------------------------
https://redhat-internal.slack.com/archives/C04QLT849KN/p1745373619644459

Message 538 - 2025-04-24 11:14
From: Juanje Ojeda
----------------------------------------
I commented there the link thing

Message 539 - 2025-04-24 11:15
From: Juanje Ojeda
----------------------------------------
Hmmm it didn't link the thread :thinking_face:

Message 540 - 2025-04-24 11:18
From: Kanitha Chim
----------------------------------------
other people also hit the same issues
https://redhat-internal.slack.com/archives/C04HGR58KKL/p1745397244166879

Message 541 - 2025-04-24 15:06
From: Michael Ho
----------------------------------------
In case someone read the above messages but didn't follow the thread in #C04HGR58KKL|, they fixed it
by disabling all scheduled pipelines in staging...
https://redhat-internal.slack.com/archives/C04HGR58KKL/p1745501334974399?thread_ts=1745397244.166879&amp;cid=C04HGR58KKL

Message 542 - 2025-04-30 09:59
From: Hubert Stefanski
----------------------------------------
I just stumbled across https://github.com/GoogleCloudPlatform/terraformer, wish I found it sooner...
I'll share some thoughts once I start using it

Message 543 - 2025-04-30 10:00
From: Hubert Stefanski
----------------------------------------
&gt; CLI tool that generates `tf`/`json` and `tfstate` files based on existing infrastructure
(reverse Terraform).

Message 544 - 2025-04-30 10:00
From: Hubert Stefanski
----------------------------------------
Would have been useful a dozen times or so already :meow_angery2:

Message 545 - 2025-04-30 12:24
From: Hubert Stefanski
----------------------------------------
Small update, it's pretty cool... I had some dependency issues setting it up locally, but that seems
to be more of an effect of my smoothbrain than it is of the tool itself. With some minimal config
and one command run, it generated the entire terraform file for the autosd cloudfront deployment in
not even 5 seconds

Message 546 - 2025-04-30 12:25
From: Hubert Stefanski
----------------------------------------
This is super impressive, and useful, which now means in theory we can fully deploy stuff manually
on the staging AWS account, capture it with terraformer, and then move it over to auto-prod with
some minimal config alterations

Message 547 - 2025-04-30 12:26
From: Hubert Stefanski
----------------------------------------
The supported modules are also quite impressive, i.e
https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/gitlab.md would have been useful
when I imported our entire gitlab.cee configuration by hand, one-by-one :swear:

Message 548 - 2025-04-30 12:28
From: Michael Ho
----------------------------------------
You should blog post this to share the knowledge :)

Message 549 - 2025-04-30 12:29
From: Hubert Stefanski
----------------------------------------
https://github.com/GoogleCloudPlatform/terraformer/blob/master/docs/kubernetes.md would also be
nice, but this seems to struggle from the fact that the upstream module provider isn't that well
fleshed out in the first place, so it's really limited to the base k8s API, without any CRDs (custom
resource definitions)

Message 550 - 2025-04-30 12:29
From: Hubert Stefanski
----------------------------------------
Not that I'd want to use it, I think helm is much better for handling k8s deployments anyways, but
the option is there, which is nice enough by itself

Message 551 - 2025-04-30 12:31
From: Hubert Stefanski
----------------------------------------
&gt; You should blog post this to share the knowledge :) I've been meaning to blog about more
things, need to set up a blog page first :sweat_smile: I now refuse to "the source" :sick-8411: on
principle

Message 552 - 2025-04-30 13:07
From: Ryan Smith
----------------------------------------
I have used dev.to (http://dev.to) for personal blog posts

Message 553 - 2025-04-30 13:08
From: Ryan Smith
----------------------------------------
I like it pretty well if you want one out of the box instead of building your own solution

Message 554 - 2025-04-30 14:35
From: Hubert Stefanski
----------------------------------------
I think I'll self-host mine in the end, but dev.to (http://dev.to) might be a good place to throw
stuff into until i get around to it

Message 555 - 2025-05-02 14:47
From: Luigi Pellecchia
----------------------------------------
may I ask a review to
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/503?

Message 556 - 2025-05-05 09:48
From: Michael Ho
----------------------------------------
@Eitan Raviv Hey, I hear you've set up the GitLab runners for toolchain on a set of ec2 instances
that auto-scale, are configured per group, etc. Can you set up a small pool for FoA to try out
again? Prefereably with a large ec2 instance to back it so we can develop at speed :)

Message 557 - 2025-05-05 11:22
From: Juanje Ojeda
----------------------------------------
@Michael Ho any preference about the region? We have deployed lately the runners on US, so they are
closer to the service that generates the composes and other stuff we heavily use. Not sure if you
have this sort of constraints.

Message 558 - 2025-05-05 11:29
From: Michael Ho
----------------------------------------
No constraints

Message 559 - 2025-05-05 13:26
From: Hubert Stefanski
----------------------------------------
Anyone for reviews
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/505

Message 560 - 2025-05-06 08:52
From: Kanitha Chim
----------------------------------------
@Eitan Raviv I'm seeing this pipeline is taking very long again
https://gitlab.cee.redhat.com/automotive/fences/gating/gator/-/merge_requests/143/pipelines maybe
something is wrong there

Message 561 - 2025-05-06 09:27
From: Hubert Stefanski
----------------------------------------
Can I get some reviews here?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/486
the pipelines won't pass and that's expected, I'll need to do some manual cleanup on the namespace
prior to deploying this new instance

Message 562 - 2025-05-06 14:21
From: Juanje Ojeda
----------------------------------------
I'm not sure why the generate-compose job
(https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/34249244) takes
90 mins to finish. It was so much faster after we moved to the new runners. Most of the time is
uploading the rpms, which supposed to be faster now :thinking_face: I see the job running here
`pipe-x-ds-gitlab-docker-runner-pool-us-east-2` so it should be in the right region. cc @Eitan Raviv
@Ozan Unsal

Message 563 - 2025-05-06 14:24
From: Michal Skrivanek
----------------------------------------
@Hubert Stefanski / @Jochen Breuer do we still run any OCP cluster ourselves or everything has been
moved to MP+ and ITUP ? Any with admin privileges?

Message 564 - 2025-05-06 14:27
From: Hubert Stefanski
----------------------------------------
yep, only MP/ITUP

Message 565 - 2025-05-06 14:27
From: Hubert Stefanski
----------------------------------------
What do you need from it?

Message 566 - 2025-05-06 14:35
From: Michal Skrivanek
----------------------------------------
for devspaces deployment we're still pondering where to run that. ideally hosted by _someone_. But
the deployment needs privileged pods and custom CRDs so....IIUC MP+ is out, and admin on the cluster
is needed

Message 567 - 2025-05-06 14:38
From: Michal Skrivanek
----------------------------------------
if that _someone_ is toolchain that is still better than building and managing yet another complete
cluster

Message 568 - 2025-05-06 14:46
From: Hubert Stefanski
----------------------------------------
I complain about this regularly, but the platform tooling (i.e Ready to go Openshift clusters, CDNs,
web servers, etc. etc.) is abysmall in RH

Message 569 - 2025-05-06 14:47
From: Hubert Stefanski
----------------------------------------
I really wish it wasn't the case that we had to look to deploy and manage stuff ourselves from
scratch every time

Message 570 - 2025-05-06 14:47
From: Hubert Stefanski
----------------------------------------
Why can't we just have an IT-provided ansible playbook/terraform config etc. for a specific bit of
technology and just use that on our own Cost Centre based AWS accounts

Message 571 - 2025-05-06 14:49
From: Michal Skrivanek
----------------------------------------
@Hubert Stefanski so in a separate thread they mentioned "a Single Tenant Cluster (STC), perhaps
with a hosted control plan, that gives you more of a hosted experience, but you have cluster admin".
I'll add you to the thread. We wanna find something reasonable so that the devspaces people don't
have to manage the cluster, and sure, ideally not even toolchain would have to.

Message 572 - 2025-05-07 08:54
From: Hubert Stefanski
----------------------------------------
&gt; &gt;&gt; * Give you a Single Tenant Cluster (STC), perhaps with a hosted control plan, that
gives you more of a hosted experience, but you have cluster admin Ah, in the context of the email
you CC'd this makes much more sense

Message 573 - 2025-05-07 08:54
From: Hubert Stefanski
----------------------------------------
I think that's probably the best solution out of the ones they've listed

Message 574 - 2025-05-07 08:55
From: Hubert Stefanski
----------------------------------------
That _should_ give free reign over the node to admin level, while also not caring about the entire
cluster

Message 575 - 2025-05-07 08:55
From: Hubert Stefanski
----------------------------------------
(Hosted Control Planes are just :chefs-kiss-blob:)

Message 576 - 2025-05-07 09:40
From: Hubert Stefanski
----------------------------------------
Any reviewers available for:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/507? This adds the
nightly cache invalidation policy for AutoSD builds on cloudfront @Eitan Raviv I see the plan is
attempting to change some QE IAM policies, I'm wondering why that is, I thought we merged them
already?

Message 577 - 2025-05-07 09:55
From: Eitan Raviv
----------------------------------------
@Hubert Stefanski I played around with the qe policy yesterday manually due to a new request from
Rachel and restored the settings back. probably missed sth. I'll fix it, also looking at !507

Message 578 - 2025-05-07 09:58
From: Hubert Stefanski
----------------------------------------
ah, cool, just wanted to know I wasn't messing something up if I got this merged :sweat_smile:
thanks for clarifying

Message 579 - 2025-05-07 11:08
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski excuse my ignorance, but I always get lost with the cache configs. Which would be
the effect of this config? ``` default_ttl = 43200 # 12 hours default TTL for nightly builds min_ttl
= 3600 # 1 hour minimum TTL max_ttl = 43200 # 12 hour maximum TTL```

Message 580 - 2025-05-07 11:13
From: Hubert Stefanski
----------------------------------------
Basically:
min_ttl - the minimum amount of time the objects will be retained in the cloudfront cach, so in our
case at least 1 hour before cloudfront will reach out to the s3 bucket for a refresh max_ttl - the
maximum of ^^ so at most our objects will live for 12 hours in the cache, then cloudfront will
forward the next "out of TTL" request to the s3 bucket for a refresh default - the one we really
care about, so halving the default cache time from cloudfront itself, which IIRC is 24hrs

Message 581 - 2025-05-07 11:14
From: Hubert Stefanski
----------------------------------------
The reason for that is users can pass headers in the request to circumvent the cache and force a
refresh from the s3 bucket

Message 582 - 2025-05-07 11:14
From: Hubert Stefanski
----------------------------------------
min is the one that will say "it's too early" and will reject that request with the cache request
headers

Message 583 - 2025-05-07 11:15
From: Juanje Ojeda
----------------------------------------
I see :thinking_face:

Message 584 - 2025-05-07 11:17
From: Juanje Ojeda
----------------------------------------
What would happen if the nightly change at 11 am and a user try to access it at that time or a bit
earlier? Will it get the old nightly for 12 hours? (unless it forces to avoid the cache or something
like that?

Message 585 - 2025-05-07 11:17
From: Hubert Stefanski
----------------------------------------
hmm, perhaps I should drop it down a bit more

Message 586 - 2025-05-07 11:18
From: Hubert Stefanski
----------------------------------------
Ideally, the pipeline would send a cache invalidation to the distribution once it completes the
nightly

Message 587 - 2025-05-07 11:18
From: Hubert Stefanski
----------------------------------------
but I saw that as additional functionality for the future, and didn't want to bother the pipeline

Message 588 - 2025-05-07 11:18
From: Juanje Ojeda
----------------------------------------
Oh, that's interesting

Message 589 - 2025-05-07 11:19
From: Juanje Ojeda
----------------------------------------
That would solve the issue, but maybe dropping it a bit more for now, it's good enough

Message 590 - 2025-05-07 11:19
From: Hubert Stefanski
----------------------------------------
so, basically once the pipeline completes we should be able to add a new step: ```aws cloudfront
create-invalidation \ --distribution-id DISTRIBUTION_ID \ --paths "/AutoSD-9/nightly"```

Message 591 - 2025-05-07 11:20
From: Juanje Ojeda
----------------------------------------
Looks easy enough :thinking_face: We could try to add it once the pipelines are working again
:ok_hand:

Message 592 - 2025-05-07 11:21
From: Hubert Stefanski
----------------------------------------
yep, didn't wanna throw that :wrench:  into the :gear:  prior to the RC :sweat_smile:

Message 593 - 2025-05-07 11:22
From: Juanje Ojeda
----------------------------------------
Good call! :wink:

Message 594 - 2025-05-07 17:16
From: Hubert Stefanski
----------------------------------------
@Juanje Ojeda @Ozan Unsal if you're still around:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/509 mind taking a
look at ^^?

Message 595 - 2025-05-07 17:16
From: Hubert Stefanski
----------------------------------------
ahhh, nvm

Message 596 - 2025-05-07 17:16
From: Hubert Stefanski
----------------------------------------
give me 2 more minutes :sweat_smile:

Message 597 - 2025-05-07 17:17
From: Hubert Stefanski
----------------------------------------
I was about to say something worked but it doesn't

Message 598 - 2025-05-07 17:21
From: Juanje Ojeda
----------------------------------------
These changes looks good. I see how it can improve what we had. Did you finish what you were
changing or we do wait for approving?

Message 599 - 2025-05-07 17:22
From: Hubert Stefanski
----------------------------------------
please wait

Message 600 - 2025-05-07 17:50
From: Hubert Stefanski
----------------------------------------
Can you take a look now please?

Message 601 - 2025-05-07 17:51
From: Hubert Stefanski
----------------------------------------
I didn't change much from the last time you looked, just some volumemount paths

Message 602 - 2025-05-07 17:52
From: Juanje Ojeda
----------------------------------------
I was about to ask you that. It looks very similar. What I should focus on?

Message 603 - 2025-05-07 17:53
From: Hubert Stefanski
----------------------------------------
It's the same since last time,  I just reverted a mountpath change that broke something

Message 604 - 2025-05-07 17:53
From: Hubert Stefanski
----------------------------------------
https://autosd.stg.sig.centos.org/AutoSD-9/autosd9-202505020201/test_images_info.json Should
redirect to: https://download.autosd.sig.centos.org/AutoSD-9/autosd9-202505020201/info.txt

Message 605 - 2025-05-07 17:53
From: Hubert Stefanski
----------------------------------------
I copied two different paths.. but you get the point

Message 606 - 2025-05-07 17:54
From: Hubert Stefanski
----------------------------------------
https://autosd.stg.sig.centos.org/AutoSD-9/autosd9-202505020201/test_images_info.json -&gt;
https://download.autosd.sig.centos.org/AutoSD-9/autosd9-202505020201/test_images_info.json

Message 607 - 2025-05-07 17:54
From: Hubert Stefanski
----------------------------------------
Then the Terraform plan updates should put the builds under /AutoSD-9

Message 608 - 2025-05-07 17:54
From: Hubert Stefanski
----------------------------------------
they currently throw it into the root dir

Message 609 - 2025-05-07 17:55
From: Hubert Stefanski
----------------------------------------
but they'll be applied after merging

Message 610 - 2025-05-07 17:55
From: Juanje Ojeda
----------------------------------------
Hmmm... ```&lt;Error&gt; &lt;Code&gt;NoSuchKey&lt;/Code&gt; &lt;Message&gt;The specified key does
not exist.&lt;/Message&gt;
&lt;Key&gt;AutoSD-9/autosd9-202505020201/test_images_info.json&lt;/Key&gt;
&lt;RequestId&gt;KSCZGPNXAJJ9R3SP&lt;/RequestId&gt;
&lt;HostId&gt;VTFAFCObf7txNKBlJ4eV5t5s9dfsbndhnzSg2Z8ZmL/13/OVJWMSkFdTQ4zCAOuy0w8kBnXjkVc=&lt;/HostId&gt;
&lt;/Error&gt;```

Message 611 - 2025-05-07 17:55
From: Hubert Stefanski
----------------------------------------
that's because cloudfront still has them in the root dir

Message 612 - 2025-05-07 17:55
From: Hubert Stefanski
----------------------------------------
the .tf files in this MR will make that work

Message 613 - 2025-05-07 17:56
From: Juanje Ojeda
----------------------------------------
Let me check the MR

Message 614 - 2025-05-07 17:56
From: Hubert Stefanski
----------------------------------------
specifically this line:
``` origin_id = "auto-product-build-origin" origin_path = "/AutoSD-9" # Add origin path to make all
content serve from /AutoSD-9```

Message 615 - 2025-05-07 17:56
From: Hubert Stefanski
----------------------------------------
says "from this origin, put everyting under /AutoSD-9"

Message 616 - 2025-05-07 17:57
From: Juanje Ojeda
----------------------------------------
Approved

Message 617 - 2025-05-07 17:57
From: Hubert Stefanski
----------------------------------------
Thank you, I'll merge it and do some more tests

Message 618 - 2025-05-07 18:00
From: Hubert Stefanski
----------------------------------------
aaand terraform plans failed :cry-laugh:

Message 619 - 2025-05-07 18:05
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/510

Message 620 - 2025-05-07 18:05
From: Hubert Stefanski
----------------------------------------
typo

Message 621 - 2025-05-07 18:18
From: Hubert Stefanski
----------------------------------------
... one more issue :cry:

Message 622 - 2025-05-07 18:30
From: Juanje Ojeda
----------------------------------------
Life... :shrug:

Message 623 - 2025-05-07 19:05
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/511

Message 624 - 2025-05-07 19:05
From: Hubert Stefanski
----------------------------------------
if you're still around

Message 625 - 2025-05-07 19:06
From: Hubert Stefanski
----------------------------------------
To summarise: 1. we add the key so it exists so the user can make a request 2. we strip the key so
it doesn't exist so that CDN/s3 can actually find it

Message 626 - 2025-05-07 19:06
From: Hubert Stefanski
----------------------------------------
mind blown

Message 627 - 2025-05-07 19:07
From: Juanje Ojeda
----------------------------------------
What is in the lambda.zip file? :thinking_face:

Message 628 - 2025-05-07 19:08
From: Hubert Stefanski
----------------------------------------
&gt; So... why the lambda@edge function? Basically.... &gt; 1. We need to have the /AutoSD-9 prefix
in the key for backward compatibility &gt; 2. That key doesn't exist on s3 or CDN &gt; 3. Since that
Key doesn't exist, we need to insert it everywhere so that it retains the same format, but.... since
that key DOESN"T exist, we need to strip it out before we actually hit the CDN and s3 so that the
request can actually find that key.... &gt;

Message 629 - 2025-05-07 19:08
From: Hubert Stefanski
----------------------------------------
it's just the lambda function script zipped

Message 630 - 2025-05-07 19:09
From: Hubert Stefanski
----------------------------------------
actually I need to fix the reference for it :sweat_smile:

Message 631 - 2025-05-07 19:09
From: Hubert Stefanski
----------------------------------------
I look forward to 10 years down the line someone tracking me down in the bahamas where I'll live my
nomad lifestyle

Message 632 - 2025-05-07 19:09
From: Hubert Stefanski
----------------------------------------
to ask what this ancient lambda function does and why it's there

Message 633 - 2025-05-07 19:10
From: Hubert Stefanski
----------------------------------------
because people hardcoded that URL for autosd

Message 634 - 2025-05-07 19:10
From: Hubert Stefanski
----------------------------------------
and i'll stare silently into their eyes

Message 635 - 2025-05-07 19:11
From: Hubert Stefanski
----------------------------------------
nod

Message 636 - 2025-05-07 19:11
From: Hubert Stefanski
----------------------------------------
and walk off into the sunset without saying a word

Message 637 - 2025-05-07 19:22
From: Juanje Ojeda
----------------------------------------
So, it's ready or are you going to change the reference?

Message 638 - 2025-05-07 19:22
From: Hubert Stefanski
----------------------------------------
should be ready now

Message 639 - 2025-05-07 19:25
From: Juanje Ojeda
----------------------------------------
Approved. LGTM

Message 640 - 2025-05-07 19:25
From: Hubert Stefanski
----------------------------------------
thank you

Message 641 - 2025-05-07 19:25
From: Hubert Stefanski
----------------------------------------
back to testing now

Message 642 - 2025-05-07 19:26
From: Juanje Ojeda
----------------------------------------
Good idea to use the lambda@edge

Message 643 - 2025-05-07 19:26
From: Hubert Stefanski
----------------------------------------
that single /AutoSD-9 is currently the bane of my existence

Message 644 - 2025-05-07 19:27
From: Hubert Stefanski
----------------------------------------
literally, soo much effort to add it for requests and then drop it again so it actually resolves
:see_no_evil:

Message 645 - 2025-05-07 19:27
From: Hubert Stefanski
----------------------------------------
why do people hard code things

Message 646 - 2025-05-07 19:27
From: Hubert Stefanski
----------------------------------------
why :crycat:

Message 647 - 2025-05-07 19:29
From: Juanje Ojeda
----------------------------------------
well... the problem is not the hardcoding... the autosd repositories were defined for very long time
with that URL, and it's used in the documentation, configs, etc, because it's not expected to
change, like the CentOS and RHEL repos.

Message 648 - 2025-05-07 19:31
From: Hubert Stefanski
----------------------------------------
okay, well I messed something up :cry:

Message 649 - 2025-05-07 19:32
From: Hubert Stefanski
----------------------------------------
I didn't catch the renaming of the cloudfront distribution :facepalm:

Message 650 - 2025-05-07 19:32
From: Hubert Stefanski
----------------------------------------
I'll need to update the DNS tomorrow morning

Message 651 - 2025-05-07 19:33
From: Juanje Ojeda
----------------------------------------
Is it possible to revert the process and testing again in staging (now that we know the main issues
we can find), or it harder than moving forward at this point?

Message 652 - 2025-05-07 19:34
From: Hubert Stefanski
----------------------------------------
oh ,wait I think it might have retained the domain name

Message 653 - 2025-05-07 19:34
From: Hubert Stefanski
----------------------------------------
nope, nevermind it bork

Message 654 - 2025-05-07 19:36
From: Hubert Stefanski
----------------------------------------
yeah I'll deploy the old version

Message 655 - 2025-05-07 20:10
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/513

Message 656 - 2025-05-07 20:10
From: Hubert Stefanski
----------------------------------------
this should revert it

Message 657 - 2025-05-07 20:21
From: Juanje Ojeda
----------------------------------------
https://autosd.sig.centos.org/AutoSD-9/autosd9-202504011405/info.txt :partying_face:

Message 658 - 2025-05-07 20:22
From: Juanje Ojeda
----------------------------------------
Still syncing the nightlies, but it does work :slightly_smiling_face:

Message 659 - 2025-05-08 10:40
From: Hubert Stefanski
----------------------------------------
Fresh new day, new attempts:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/514
reviews here please ^^ Setting up cloudfront to point to my test bucket

Message 660 - 2025-05-09 15:00
From: Hubert Stefanski
----------------------------------------
Hey folks, Happy Friday, hope y'all learnt something
Just an update on the AutoSD webserver situation https://autosd.stg.sig.centos.org I've set up the
staging instance that I hope has resolved all of the issues we've seen when I pushed the change to
production. If people could take a look at this one, and run any scripts/automation they have
against it, I'd be super thankful. Or if you can point me to something that broke last time around
so that I can run a test myself, please do.

Message 661 - 2025-05-11 13:31
From: Avihai Efrat
----------------------------------------
@Hubert Stefanski please consider posting this at the #C0801T4TEQP| channel to get AIB folks testing
on the new stage instance and have awarness of your new AIB fixes. The one that knows more about aib
in this wg is @Juanje Ojeda .

Message 662 - 2025-05-12 12:39
From: Hubert Stefanski
----------------------------------------
Thank you @Juanje Ojeda for testing out the stage deployment of the new CDN :thanks-ty:
Based on this, I'd like to plan out the deployment for something non-stage, Currently I'm on the
fence between two options:
1. *Request a new DNS entry for summit.autosd.sig.centos.org (http://summit.autosd.sig.centos.org) -
that will host the new deployment specifically for the summit demo* a. *Con:* It doesn't work out of
the box with AIB and would require the URL to be updated in the configs b. *Pro:* Worst case
scenario, bringing down autosd.sig.centos.org (http://autosd.sig.centos.org) won't happen since this
willbe a separate deployment 2. *Deploy the changes to prod* a. *Con:* Fairly evident based on my
previous attemp, but seeing as Juanje tested our "currently known" cases, it might not yield any
complaints, this also needs the `auto-product-build` bucket to be updated to nest all existing
builds under `AutoSD-9` (not a big deal since we'll still retain the root-directory location, if
anyone else is still using that ) b. *Pro:* No config changes anywhere for the summit demo,

Message 663 - 2025-05-12 12:40
From: Hubert Stefanski
----------------------------------------
Option 2: will happen inevitably anyway, but the question is whether before or after summit

Message 664 - 2025-05-12 12:52
From: Daniel Farrell
----------------------------------------
@Hubert Stefanski no need to request a new DNS entry, we can not do any changes on our side anymore
as the lab infra code is frozen now

Message 665 - 2025-05-12 12:54
From: Hubert Stefanski
----------------------------------------
So option 2 is the only option? :sweat_smile:

Message 666 - 2025-05-12 12:55
From: Daniel Farrell
----------------------------------------
not if it eventually breaks some things - i guess our best hope now is to pray to the demo gods
:wink:

Message 667 - 2025-05-12 12:56
From: Daniel Farrell
----------------------------------------
i suggest that we do option 2 but the right way with proper testing etc. even if that means we can
not do it before summit

Message 668 - 2025-05-12 13:01
From: Hubert Stefanski
----------------------------------------
Based on Juanje's testing here:
https://redhat-internal.slack.com/archives/C05BYR06B0V/p1746802822517889 We think we're covered for
the use cases

Message 669 - 2025-05-12 13:06
From: Avihai Efrat
----------------------------------------
Also, I believe Summit Demo will use AIB for building the images(correct me if I'm wrong here
@Daniel Farrell), and as AIB is pretty impossible to change from autosd.sig.centos.org
(http://autosd.sig.centos.org) to something else, option 2 seems like our only option here.
About proper testing - I'll leave it to @Juanje Ojeda to decide, one note I have is: If all the
testing are done on our ATC side(as mentioned by Juanje) I think it's also good to get more feedback
fast and a heads-up to the #C0801T4TEQP| we plan to roll out our deployment after they test or
confirm Juanje's testing are enough. WDYT @Juanje Ojeda ?
As you @Hubert Stefanski are on PTO May15-May19 we do not have much time to test or rollback. BTW,
in the case we'll need to roll back, can you have @Eitan Raviv in the loop if needed on how to do
that when you are in PTO?

Message 670 - 2025-05-12 13:10
From: Hubert Stefanski
----------------------------------------
I can get those changes out today, looking at our staging deployment it seems to be fairly stable,
might have a bit of downtime in-between, worst case scenario we roll back like we did last week and
keep it as-is for summit

Message 671 - 2025-05-12 13:10
From: Juanje Ojeda
----------------------------------------
&gt; I believe Summit Demo will use AIB for building the images(correct me if I'm wrong here @Daniel
Farrell), and as AIB is pretty impossible to change from autosd.sig.centos.org
(http://autosd.sig.centos.org) to something else, option 2 seems like our only option here. Agreed.

Message 672 - 2025-05-12 13:11
From: Hubert Stefanski
----------------------------------------
Though, our webserver doesn't really do much apart from redirecting to cloudfront, In any case, I
would refrain from redeployments from the infra repo during that time :sweat_smile:

Message 673 - 2025-05-12 13:12
From: Juanje Ojeda
----------------------------------------
When we need this change to be done? Because we need to build and deliver the RC2 between today and
tomorrow. I'd be nice if we could do the change after the RC2 is out. it shouldn't affect the
release, but it would be easier to focus on just one important change a the time, and to avoid
blocking possible changes in the pipeline, if needed.

Message 674 - 2025-05-12 13:14
From: Avihai Efrat
----------------------------------------
As Hubert is on PTO on May15-19 we need this done latest May14 and for someone to be ready to
rollback it it fails in production.

Message 675 - 2025-05-12 13:19
From: Avihai Efrat
----------------------------------------
We can use the time till May14 for you Juanje to work only on the 1.0RC2 build planned for May13 and
in that time give a heads up to #C0801T4TEQP| folks already ASAP and let them also test against our
staging ENV to get more tests by then and if they find anything on stage they can raise it or at
least be aware of this incoming change. WDYT @Juanje Ojeda@Hubert Stefanski?

Message 676 - 2025-05-12 13:35
From: Michal Skrivanek
----------------------------------------
I see the links in directory listing of e.g. https://autosd.stg.sig.centos.org/AutoSD-9/nightly/
points to download.autosd.sig.centos.org (http://download.autosd.sig.centos.org) but a direct
request to e.g. https://autosd.sig.centos.org/AutoSD-9/nightly/info.txt works fine. is it going to
be pointing to `download.`?

Message 677 - 2025-05-12 13:37
From: Hubert Stefanski
----------------------------------------
I'm sorry I'm having a hard time understanding the question

Message 678 - 2025-05-12 13:38
From: Hubert Stefanski
----------------------------------------
https://autosd.stg.sig.centos.org/AutoSD-9/nightly/info.txt should also redirect to download, if
that's what you're asking

Message 679 - 2025-05-12 13:41
From: Michal Skrivanek
----------------------------------------
it doesn't do 301 redirect...so i hope that's going to be fine.

Message 680 - 2025-05-12 13:43
From: Avihai Efrat
----------------------------------------
Maybe related to last implementation that broke from May7 that mentioned redirect to
`download.autosd.sig.centos.org (http://download.autosd.sig.centos.org)` :
https://redhat-internal.slack.com/archives/C05BYR06B0V/p1746640413654059
`It's the same since last time, I just reverted a mountpath change that broke something` `[8:53 PM]
hstefans`
`https://autosd.stg.sig.centos.org/AutoSD-9/autosd9-202505020201/test_images_info.json` `Should
redirect to:` `https://download.autosd.sig.centos.org/AutoSD-9/autosd9-202505020201/info.txt` `[8:53
PM] hstefans`
`I copied two different paths.. but you get the point` `[8:54 PM] hstefans`
`https://autosd.stg.sig.centos.org/AutoSD-9/autosd9-202505020201/test_images_info.json -&gt;
https://download.autosd.sig.centos.org/AutoSD-9/autosd9-202505020201/test_images_info.json` `[8:54
PM] hstefans`
`Then the Terraform plan updates should put the builds under /AutoSD-9`

Message 681 - 2025-05-12 13:44
From: Michal Skrivanek
----------------------------------------
i think in some of the tURLs in tests are parsed from the listing...i wouldn't be sure it handles
redirects fine, but this way it should work...the paths are the same

Message 682 - 2025-05-12 13:47
From: Hubert Stefanski
----------------------------------------
&gt; it doesn't do 301 redirect...so i hope that's going to be fine. Ahh, as in it goes a 404 then
redirects?

Message 683 - 2025-05-12 13:48
From: Juanje Ojeda
----------------------------------------
So, I get this: ```$ curl https://autosd.stg.sig.centos.org/AutoSD-9/nightly/info.txt !DOCTYPE HTML
PUBLIC "-//IETF//DTD HTML 2.0//EN" &lt;html&gt;&lt;head&gt; &lt;title&gt;302 Found&lt;/title&gt;
&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Found&lt;/h1&gt; &lt;p&gt;The document has moved &lt;a
href="https://download.autosd.sig.centos.org/AutoSD-9/nightly/info.txt"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/body&gt;&lt;/html&gt;``` because of the redirection. Maybe it should be a 301 and not 302
redirection? :thinking_face: But it works fine with this `-L`: ```$ curl -L
https://autosd.stg.sig.centos.org/AutoSD-9/nightly/info.txt Started: 2025-05-08T02:01:55Z Project:
redhat/edge/ci-cd/pipe-x/pipelines-as-code Branch: main Commit:
c543cede503b7ecaa6c892a508222d4b12584a24 Release ID: AutoSD-9-202505080201 Upstream distro: centos-9
UUID: 1806481067.c543cede Config REF: main Pungi REF: main OSBUILD REF: main Custom Images REF: main
Pipelines-as-code REF: Pipeline_URL:
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/pipelines/1806481067 Pipeline_ID:
1806481067``` And from our Python code (or dnf, osbuild, etc). So, unless someones uses a `curl`
with no "follow redirections", it should be fine.

Message 684 - 2025-05-12 13:50
From: Hubert Stefanski
----------------------------------------
I think that's just a one liner:
```&lt;VirtualHost *:8080&gt;     ServerAdmin root@localhost     DocumentRoot "/var/www/html"
&lt;Directory "/var/www/html"&gt; Options Indexes FollowSymLinks AllowOverride None Require all
granted DirectoryIndex index.html
RewriteEngine On # If file or directory does not exist, redirect to external fallback RewriteCond
%{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule ^(.*)$
https://download.autosd.sig.centos.org/$1 [R=302,L] &lt;------ here &lt;/Directory&gt;```

Message 685 - 2025-05-12 13:50
From: Hubert Stefanski
----------------------------------------
so shouldn't be a big deal

Message 686 - 2025-05-12 13:50
From: Juanje Ojeda
----------------------------------------
Yep, that I think will avoid issues

Message 687 - 2025-05-12 13:51
From: Hubert Stefanski
----------------------------------------
alright, 2 secs and ill push the change to stage

Message 688 - 2025-05-12 13:57
From: Avihai Efrat
----------------------------------------
`i think in some of the tURLs in tests are parsed from the listing...i wouldn't be sure it handles
redirects fine, but this way it should work...the paths are the same` Are the mentioned tests the
new AIB CTC tests added also to test console that failed last time after deployment @Michal
Skrivanek? If so is there any way we can run those on our staging ENV from test console before
deploying to prod to make sure they also work and won't fail in CTC.

Message 689 - 2025-05-12 14:07
From: Michal Skrivanek
----------------------------------------
yeah i think it's likely there is a curl without -L somewhere

Message 690 - 2025-05-12 14:07
From: Juanje Ojeda
----------------------------------------
Oh, I forgot about that package test for the aib :facepalm: It works fine

Message 691 - 2025-05-12 14:07
From: Avihai Efrat
----------------------------------------
@Hubert Stefanski in the meantime, can you please inform #C0801T4TEQP| about the changes we did and
ask for feedbacks or tests they want to run on our staging ENV?

Message 692 - 2025-05-12 14:07
From: Juanje Ojeda
----------------------------------------
```$ ./automotive-image-builder compose --distro autosd --dump-variables --fusa empty.aib.yml
empty.json | jq -c '.denylist_rpms // []'
["dosfstools","e2fsprogs","erofs-utils","libbpf","xfsprogs"]```

Message 693 - 2025-05-12 14:07
From: Juanje Ojeda
----------------------------------------
Using the staging URL.

Message 694 - 2025-05-12 14:08
From: Juanje Ojeda
----------------------------------------
Basically, it ueses aib, which works fine with that URL, so it works.

Message 695 - 2025-05-12 14:08
From: Michal Skrivanek
----------------------------------------
you'll see once you roll it out:) that's why it's so much fun!

Message 696 - 2025-05-12 14:10
From: Juanje Ojeda
----------------------------------------
In any case, we had a discussion last week about changing that test to use rhivos instead of autosd.
I still think we should change it.

Message 697 - 2025-05-12 14:17
From: Michal Skrivanek
----------------------------------------
for the above denylist?

Message 698 - 2025-05-12 14:29
From: Hubert Stefanski
----------------------------------------
that 301 change should be deployed now, got sidetracked and forgot to msg here

Message 699 - 2025-05-12 15:25
From: Juanje Ojeda
----------------------------------------
@Avihai Efrat @Hubert Stefanski it looks like we're not going to build the RC2 today, and probably
not tomorrow either. I'd say that we should move forward with the CDN migration, so we can have more
time for fixing stuff before Hubert goes to PTO. WDYT?

Message 700 - 2025-05-12 15:44
From: Hubert Stefanski
----------------------------------------
Sure thing, I can get working on that tomorrow morning if it suits? I'd just send out a warning
email to auto-devel and auto-sig

Message 701 - 2025-05-12 15:46
From: Hubert Stefanski
----------------------------------------
It shouldn't take long, but there are a few things that we need to do, the main one being to merge
your @Juanje Ojeda MR that moves the product builds into X_STREAM directories

Message 702 - 2025-05-12 15:56
From: Juanje Ojeda
----------------------------------------
BTW, I did anther check. Not sure if it's useful or if anyone is using this, but I tried to download
recursively the whole compose. From the current webserver, this command works: ```wget2 -m -e
robots=off --max-threads 8 -np -nH --cut-dirs=3 -R index.html*
https://autosd.sig.centos.org/AutoSD-9/nightly/repos/AutoSD/``` But the same command using the
staging (`https://autosd.stg.sig.centos.org/AutoSD-9/nightly/repos/AutoSD/`), only download the
structure, but not the actual files.

Message 703 - 2025-05-12 18:19
From: Hubert Stefanski
----------------------------------------
I still need to figure that out, It's not ideal that that doesn't work, but I haven't found a way to
make it work thus far... The main issue blocking that is the fact that these files don't actually
exist on the webserver, and the ones you see through the web UI are generated in a single index.html
based on the bucket contents

Message 704 - 2025-05-12 18:19
From: Hubert Stefanski
----------------------------------------
Upgrade announcement sent btw! I'll set up the merge requests for a merge train tomorrow morning

Message 705 - 2025-05-12 18:30
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/515 &lt;- Need some
reviews here

Message 706 - 2025-05-12 18:32
From: Hubert Stefanski
----------------------------------------
The pipelines will keep on failing until the migration begins. The current failure is because the
playbook is trying to provision 525 gigs in total of volumes, and we're at a 500gb limit, but I'll
manually clean up the namespace to drop that previous volume before deploying

Message 707 - 2025-05-12 20:04
From: Avihai Efrat
----------------------------------------
Maybe @Daniel Farrell can add some insights about what the Demo Summit session is actually going to
use for image downloads and building (is it using automotive image builder and if so how ?) so we
can know we’re testing the main usage at least for Summit sake.
@Juanje Ojeda thanks for the extra testing and going the extra mile! Just so we’ll know the impact
of your latest test, Do we have something (tool, pipeline,script) that tries to do what you tested
that might be broken?

Message 708 - 2025-05-12 22:18
From: Juanje Ojeda
----------------------------------------
Ohhhh... @Hubert Stefanski thanks for this -&gt;
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/5e8a0f9c89474b93d[…]522/openshift/managed-platform+/autosd-webserver/README.md
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/5e8a0f9c89474b93d0c705d5cc1061ed90082522/openshift/managed-platform+/autosd-webserver/README.md)
:clap:

Message 709 - 2025-05-13 08:40
From: Hubert Stefanski
----------------------------------------
One approval here please
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/515 Juanje's
approval got reset by a rebase

Message 710 - 2025-05-13 08:48
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv if you're around? :sweat_smile:

Message 711 - 2025-05-13 09:01
From: Hubert Stefanski
----------------------------------------
and https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/merge_requests/394

Message 712 - 2025-05-13 10:12
From: Hubert Stefanski
----------------------------------------
@Daniel Farrell when is this demo going to take place exactly?

Message 713 - 2025-05-13 10:13
From: Hubert Stefanski
----------------------------------------
just so we know when to pay extra attention

Message 714 - 2025-05-13 10:13
From: Daniel Farrell
----------------------------------------
May 20th, 10:30 AM EST

Message 715 - 2025-05-13 10:15
From: Hubert Stefanski
----------------------------------------
@Avihai Efrat in that case I'll be back from PTO already, to keep an eye out

Message 716 - 2025-05-13 10:40
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/517 or one small
fix, but not time sensitiv

Message 717 - 2025-05-13 10:41
From: Hubert Stefanski
----------------------------------------
Overall I would say the migration is finished, but still keeping an eye and ear out for any issues

Message 718 - 2025-05-13 10:47
From: Ozan Unsal
----------------------------------------
There are 3 MRs in rhivos.git and I guess, these MRs allocates disk space and cause failures in
generate-compose job.
• update for rhivos-1.0.0 config:
https://gitlab.cee.redhat.com/automotive/rhivos/-/merge_requests/554 • sync rhivos-1.0 config:
https://gitlab.cee.redhat.com/automotive/rhivos/-/merge_requests/556 • update rhivos-1.1.0 config:
https://gitlab.cee.redhat.com/automotive/rhivos/-/merge_requests/553

Message 719 - 2025-05-13 11:38
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski what's the current status for the migration. I get errors for these URLs. Is that
expected at this moment? • https://autosd.sig.centos.org/AutoSD-9/ •
https://autosd.sig.centos.org/AutoSD-9/nightly/

Message 720 - 2025-05-13 11:46
From: Hubert Stefanski
----------------------------------------
It should be completed... :thinking_face:

Message 721 - 2025-05-13 11:46
From: Hubert Stefanski
----------------------------------------
weirdly enough it works when I navigate form the root domain

Message 722 - 2025-05-13 11:46
From: Hubert Stefanski
----------------------------------------
ahhh, I think I know what's wrong

Message 723 - 2025-05-13 11:47
From: Hubert Stefanski
----------------------------------------
I might need to drop a rewrite condition for directories

Message 724 - 2025-05-13 11:47
From: Hubert Stefanski
----------------------------------------
and only keep it for files

Message 725 - 2025-05-13 11:47
From: Hubert Stefanski
----------------------------------------
actually, wait, it works on autosd.stg.sig.centos.org/AutoSD-9/nightly/
(http://autosd.stg.sig.centos.org/AutoSD-9/nightly/) for me

Message 726 - 2025-05-13 11:48
From: Juanje Ojeda
----------------------------------------
But that's staging

Message 727 - 2025-05-13 11:48
From: Juanje Ojeda
----------------------------------------
What about production?

Message 728 - 2025-05-13 11:51
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski ^

Message 729 - 2025-05-13 11:52
From: Hubert Stefanski
----------------------------------------
oh :facepalm:

Message 730 - 2025-05-13 11:53
From: Hubert Stefanski
----------------------------------------
Thankfully seems like programatic access works for folks, this is just a frontend issue

Message 731 - 2025-05-13 11:53
From: Hubert Stefanski
----------------------------------------
looking into it

Message 732 - 2025-05-13 11:57
From: Ozan Unsal
----------------------------------------
@Hubert Stefanski, @Eitan Raviv i don't know why but I am having runner system failure issue in this
job https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/34510176

Message 733 - 2025-05-13 12:47
From: Michael Ho
----------------------------------------
@Hubert Stefanski is https://autosd.sig.centos.org/AutoSD-9/ and https://autosd.sig.centos.org/
meant to be like this?

Message 734 - 2025-05-13 14:04
From: Juanje Ojeda
----------------------------------------
So, it looks like it works fine now, unless you tested before and your browser kept the config
:thinking_face:

Message 735 - 2025-05-13 14:31
From: Hubert Stefanski
----------------------------------------
Mind taking a look again now?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/517

Message 736 - 2025-05-13 14:31
From: Hubert Stefanski
----------------------------------------
just increasing the replica count

Message 737 - 2025-05-13 14:32
From: Hubert Stefanski
----------------------------------------
ah, it didn't push...

Message 738 - 2025-05-13 14:33
From: Hubert Stefanski
----------------------------------------
now it's ready

Message 739 - 2025-05-13 14:33
From: Juanje Ojeda
----------------------------------------
I'm testing again with the production URL the aib test, building an image using aib and installing a
package with the character `+` from inside an autosd image to be sure that all the main features
work and they worked :slightly_smiling_face:

Message 740 - 2025-05-13 14:39
From: Juanje Ojeda
----------------------------------------
I've also checked the smoke-test triggers from the base-image's pipeline
(https://gitlab.com/redhat/edge/tests/base-image/-/blob/main/.gitlab-ci.yml?ref_type=heads#L41) that
failed at some point and it works as well :partying_face:

Message 741 - 2025-05-13 15:57
From: Hubert Stefanski
----------------------------------------
@Ryan Smith Do you have a contact or anywhere we can look into that?

Message 742 - 2025-05-13 17:03
From: Hubert Stefanski
----------------------------------------
I hope this is the last update in this migration saga:
I just cleaned up the root directory of the bucket, (it's backed up to a different one just in
case), so now the root of the autosd.sig.centos.org (http://autosd.sig.centos.org) only has one
folder, as expected

Message 743 - 2025-05-13 17:03
From: Hubert Stefanski
----------------------------------------
^^ @Michael Ho

Message 744 - 2025-05-13 17:04
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv If you could hold off on merging your
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/518 until tomorrow,
until I merge https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/517

Message 745 - 2025-05-13 17:05
From: Hubert Stefanski
----------------------------------------
This one fixes the origin reference to point to the s3 static website, to make those fancy packages
with `+` signs in their names work properly

Message 746 - 2025-05-14 07:45
From: Ozan Unsal
----------------------------------------
Hi all! We're currently experiencing issues with downstream runners — they're failing, and the
nightly pipeline hasn't started. This is blocking the RC2 respin we planned to kick off today. Could
someone please take a look as soon as possible?

Message 747 - 2025-05-14 07:45
From: Hubert Stefanski
----------------------------------------
Yep I just opened up 517 to merge my changes

Message 748 - 2025-05-14 07:45
From: Hubert Stefanski
----------------------------------------
and will then merge Eitans right after

Message 749 - 2025-05-14 07:48
From: Avihai Efrat
----------------------------------------
Got it, thank you all for jumping on it in the hope of a quick resolution!

Message 750 - 2025-05-14 07:59
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv are you happy with this comment?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/518#note_15739783

Message 751 - 2025-05-14 07:59
From: Hubert Stefanski
----------------------------------------
Juanje tested it so I guess it's fine

Message 752 - 2025-05-14 07:59
From: Hubert Stefanski
----------------------------------------
but wanted to make sure before I merged anything

Message 753 - 2025-05-14 09:01
From: Hubert Stefanski
----------------------------------------
I'll resolve the comment and merge it

Message 754 - 2025-05-14 09:17
From: Ozan Unsal
----------------------------------------
I am still seeing some instabilities, for example this job
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/34555852

Message 755 - 2025-05-14 09:18
From: Hubert Stefanski
----------------------------------------
ahhh, the plan failed to apply...

Message 756 - 2025-05-14 09:18
From: Hubert Stefanski
----------------------------------------
fixing it now

Message 757 - 2025-05-14 09:22
From: Hubert Stefanski
----------------------------------------
This one is hiting the very issue it's trying to fix :see_no_evil:

Message 758 - 2025-05-14 09:23
From: Hubert Stefanski
----------------------------------------
Off-topic: *AutoSD Web Server Emergency Protocol:*
https://docs.google.com/document/d/1ZAUlY_VOTeQMhpd0p6p-qSBBRY8EW2GYVmkKFfrtEVg/edit?usp=sharing

Message 759 - 2025-05-14 09:24
From: Hubert Stefanski
----------------------------------------
Use the rollback as a last ditch effort, however, I'll be back before the summit demo, so it
shouldn't come to that

Message 760 - 2025-05-15 09:46
From: Michael Ho
----------------------------------------
@Eitan Raviv Can you please take a look at
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/521 ? This should
fix our gitlab-runner artifacts issue :)

Message 761 - 2025-05-15 12:18
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Kanitha Chim does anyone know the upstream gitlab-runner host and ssh key? I'm
checking in BitWarden but there is a bunch of old stuff and it's not clear to me which one it is.

Message 762 - 2025-05-15 13:20
From: Avihai Efrat
----------------------------------------
About this thread (https://redhat-internal.slack.com/archives/C04JDFLHJN6/p1747301801310779)...
@Hubert Stefanski is on PTO till May20 so this is not ideal to change anything right now unless it's
urgent or breaking urgent stuff I know.
IIUC the root cause is due to CloudFront cache issues. This was mitigated manually for now due to
Kanitha invalidating the cache for the repodata.
Just so we do not need to do it in summit time(May20) or daily going forward, the CentOS infra
folks(@U013NFL4MN0 message
(https://redhat-internal.slack.com/archives/D04RWM2D1M2/p1747310211956939)) mentioned they use a 5
min TTL caching policy for metadata files (as we have in the /repodata compose folder).
Is there a way we can add this new custom cache policy to avoid manually needing to invalidate the
cache daily?
@Juanje Ojeda @Kanitha Chim @Eitan Raviv WDYT?
Maybe use something like below at our IaC cloudfront config file
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/main/aws/terraform/toolchain/upstream/autosd_cloudfront.tf?ref_type=heads):
```# Define a CloudFront cache policy with 5-minute TTL for repodata resource
"aws_cloudfront_cache_policy" "repodata" { name = "RepodataCachePolicy" comment = "Cache repodata
files with short TTL" default_ttl = 300 max_ttl = 300 min_ttl = 0
parameters_in_cache_key_and_forwarded_to_origin { cookies_config { cookie_behavior = "none" }
headers_config { header_behavior = "none" } query_strings_config { query_string_behavior = "none" }
} }
# Example CloudFront distribution (partial) using the policy resource "aws_cloudfront_distribution"
"example" { # ... (origins, logging, etc.) ...
# Cache behavior for repodata files ordered_cache_behavior { path_pattern = "repodata/*"
target_origin_id = "MyOrigin" viewer_protocol_policy = "redirect-to-https" allowed_methods = ["GET",
"HEAD"] cache_policy_id = aws_cloudfront_cache_policy.repodata.id # (You can also specify an
origin_request_policy_id if needed) }
# ... (default_cache_behavior, etc.) ... }```

Message 763 - 2025-05-15 13:23
From: Ozan Unsal
----------------------------------------
@Eitan Raviv gator-container-build job in RC2 pipeline takes longer time
https://gitlab.cee.redhat.com/automotive/fences/gating/gator/-/jobs/34627259, can you check what is
going on this runner?

Message 764 - 2025-05-15 18:40
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Ozan Unsal I changed the upstream pipeline's nightly trigger, so it starts an hour
earlier, to avoid having the bucket syncing when ppl is already using it. I also changed the cache
policy for the nightly directory, so it refresh every 3 hours, instead of every 12. If that new
policy works and allow us to avoid the issue from this morning, we should move it to the infra repo,
so we don't override it on the next deployment. I think those two things should avoid any issues
during the summit. I'll be checking on Monday anyway.

Message 765 - 2025-05-16 12:02
From: Luigi Pellecchia
----------------------------------------
Can I have some eyes at
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/523? thanks in
advance

Message 766 - 2025-05-19 11:48
From: Juanje Ojeda
----------------------------------------
The nightly clean up has been failing for a few days, it turns out that it was caused by the new
AutoSD's bucket structure. The cleaning job was looking at the root of the bucket and not under
`AutoSD-9/`. This made the command fail, which made the script fail and exit the job. So, it wasn't
cleaning up the upstream nightlies, nor the downstream ones. Here is a MR for fixing that. I tested
it locally (without running the actual `aws s3 mv ..`) and it fox the issue:
https://gitlab.cee.redhat.com/automotive/pipe-x/scheduled-jobs/-/merge_requests/61

Message 767 - 2025-05-19 12:48
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv Autosd's last night had some issue related with the runners. A bunch of jobs failing
with this error: ```ERROR: Job failed (system failure): aborted: terminated``` Here is one of he
job: https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/jobs/10070624703 Any idea what
could have happened?

Message 768 - 2025-05-19 16:31
From: Avihai Efrat
----------------------------------------
Hi @Juanje Ojeda @Eitan Raviv, Thanks for raising and taking care of AutoSD runners issue. Let’s be
extra careful with AutoSD and keep a close eye out especially as tomorrow on Red Hat summit demo
event h
(https://events.experiences.redhat.com/widget/redhat/sum25/SessionCatalog2025/session/1731489950376001pjgw)ere
(https://events.experiences.redhat.com/widget/redhat/sum25/SessionCatalog2025/session/1731489950376001pjgw)
schedulaed Tuesday, May 20 10:30 AM - 12:00 PM EDT(US time) will heavily depend on AutoSD. If the
are any planned maintenance or work/changes that might risk AutoSD server functionality let’s
postpone it after the summit tomorrow’s event.
CC: @Hubert Stefanski

Message 769 - 2025-05-20 07:34
From: Hubert Stefanski
----------------------------------------
:howdy:  back from PTO Any immediate fires that need putting out?

Message 770 - 2025-05-20 07:46
From: Avihai Efrat
----------------------------------------
Welcome back @Hubert Stefanski :partydoge: We just need to make sure AutoSD is ready for today's
Summit Demo 10:30 AM - 12:00 PM EDT. The main use case that's relevant to us/ATC is the building
image via AIB part mentioned here
(https://github.com/rhpds/lab2255-software-templates/blob/main/templates/autosd-app-template/skeleton/src/images/build.sh#L22)
as it points AIB to our autosd URL
(https://gitlab.com/CentOS/automotive/src/automotive-image-builder/-/blob/main/distro/autosd9.ipp.yml#L6)
(which is the usual way AIB is working). We should be fine but just to be on the safe side to check
AIB related tasks are working well and we do not have any caching issues.
I did see an issue via UI (
(https://redhat-internal.slack.com/archives/C05BYR06B0V/p1747724323814859?thread_ts=1747672277.834609&amp;cid=C05BYR06B0V)does
not seem related to the Demo as Demo/AIB is using curl) - not sure if it's a new/old issue. If AIB
is working well for the Demo, we can wait until we're changing anything else.

Message 771 - 2025-05-20 10:00
From: Hubert Stefanski
----------------------------------------
Hey @Kanitha Chim Are those autosd volumes still in use somewhere?

Message 772 - 2025-05-20 10:01
From: Hubert Stefanski
----------------------------------------
the AutoSD one might be out-of-date with our cloudfront approach

Message 773 - 2025-05-20 10:02
From: Hubert Stefanski
----------------------------------------
not sure if the RHIVOS one was ever used, but my memory is blurry

Message 774 - 2025-05-20 10:05
From: Kanitha Chim
----------------------------------------
Nope, they both are not in used anywhere

Message 775 - 2025-05-20 10:06
From: Hubert Stefanski
----------------------------------------
Cool, ty, just checking in case

Message 776 - 2025-05-20 10:24
From: Avihai Efrat
----------------------------------------
Yep , https://dnf.readthedocs.io/en/latest/conf_ref.html ^^

Message 777 - 2025-05-20 11:50
From: Hubert Stefanski
----------------------------------------
I'll be watching this page with great interest

Message 778 - 2025-05-20 12:18
From: Daniel Farrell
----------------------------------------
This in general is an interesting dashboard to watch … is there a way to drill this down to
locations? For example would it be possible to see an uptick in India or Japan ?

Message 779 - 2025-05-20 12:24
From: Hubert Stefanski
----------------------------------------
yep

Message 780 - 2025-05-20 12:33
From: Daniel Farrell
----------------------------------------
How can I get access to this view?

Message 781 - 2025-05-20 12:44
From: Hubert Stefanski
----------------------------------------
We don't have a way for non-admins to access that account, it would be quite a bit of work to set up
for essentially a one-time thing

Message 782 - 2025-05-20 12:44
From: Hubert Stefanski
----------------------------------------
I can send a report later on though

Message 783 - 2025-05-20 12:57
From: Daniel Farrell
----------------------------------------
Nah, it’s not worth doing if it’s too much work. But its a nice derived metric to track
adoption/usage

Message 784 - 2025-05-20 14:05
From: Avihai Efrat
----------------------------------------
@Daniel Farrell I was asked if there where a live or a recording link to the Demo .. do you know of
any? If you can share with the team it will be great!
All I'm aware of is this formal link
(https://events.experiences.redhat.com/widget/redhat/sum25/SessionCatalog2025/session/1731489950376001pjgw).
@Juanje Ojeda ^^

Message 785 - 2025-05-20 14:06
From: Avihai Efrat
----------------------------------------
Good luck @Daniel Farrell @U04JMECPXLZ @Miguel Angel Ajo Pelayo
:fingers_crossed::fingers_crossed::fingers_crossed:

Message 786 - 2025-05-20 14:10
From: Daniel Farrell
----------------------------------------
I am not aware of a video stream or a recording @U04JMECPXLZ, are you?

Message 787 - 2025-05-20 14:10
From: Daniel Farrell
----------------------------------------
https://redhat-scholars.github.io/course-template/modules/index.html
(https://redhat-scholars.github.io/course-template/modules/index.html)

Message 788 - 2025-05-20 14:10
From: Daniel Farrell
----------------------------------------
The link above should provide detailed instructions of the lab

Message 789 - 2025-05-20 14:14
From: Juanje Ojeda
----------------------------------------
@Daniel Farrell

Message 790 - 2025-05-20 14:17
From: Daniel Farrell
----------------------------------------
https://rhpds.github.io/showroom-lb2255-jumpstarter/modules/intro-jmp.html
(https://rhpds.github.io/showroom-lb2255-jumpstarter/modules/intro-jmp.html)

Message 791 - 2025-05-20 15:01
From: Jochen Breuer
----------------------------------------
Hey folks, can this email be ignored? `[AWS-A-Team] Your AWS CloudShell data is scheduled for
deletion on May 30, 2025 [AWS Account: 339712814647]`

Message 792 - 2025-05-20 15:03
From: Hubert Stefanski
----------------------------------------
Yep, as far as I'm aware no one in ATC uses that

Message 793 - 2025-05-20 15:20
From: Jochen Breuer
----------------------------------------
Great. Thanks!

Message 794 - 2025-05-20 19:04
From: Miguel Angel Ajo Pelayo
----------------------------------------
Thank you all, it wen @Avihai Efrat @Juanje Ojeda @Daniel Farrell everything well very very smooth.
:slightly_smiling_face:

Message 795 - 2025-05-20 19:05
From: Miguel Angel Ajo Pelayo
----------------------------------------
Sadly we didn't have as many participants as we wanted, I guess it was too niche for the conference,
we had people from lockheed martin, amazon kuiper, NXP, ... @U04JMECPXLZ am I forgetting some?, also
I guess we will probably get access to the list of participants.

Message 796 - 2025-05-21 02:00
From: U04JMECPXLZ
----------------------------------------
Corellium ...

Message 797 - 2025-05-21 02:01
From: U04JMECPXLZ
----------------------------------------
... and we could follow up with NXP, Intel and Corellium later in the day, during our Automotive
round table in the Boston office ...

Message 798 - 2025-05-21 11:07
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Hubert Stefanski @Kanitha Chim @Ozan Unsal This job is failing in a post-merge
pipeline. It doesn't have anything to do with the change. I retried and it failed again. I've seen
this in the past in some repos and normally is related to the credentials. Although, I don't think
anyone has changed them in the CI/CD, right? Any ideas? ```$ git push origin main:gitlab-ci fatal:
could not read Username for 'https://gitlab.com': No such device or address```
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/jobs/10103463775

Message 799 - 2025-05-21 11:10
From: Juanje Ojeda
----------------------------------------
Ok, I think it was it. The token has expired.

Message 800 - 2025-05-21 11:11
From: Juanje Ojeda
----------------------------------------
Oh, that's another token, but `PIPELINE_GIT_TOKEN` has also expired. A few of them has expired. We
should check them to avoid other stuff failing.

Message 801 - 2025-05-21 15:46
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski should we merge this? Or should we wait? I think you need to do something before
merging it, right? Feel free to change it to "Ready" and merge it when you are ready.
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/527

Message 802 - 2025-05-27 10:00
From: Hubert Stefanski
----------------------------------------
Hey @Eitan Raviv, @Marcin Sobczyk noticed some differences in network performance on FoA validator
repositories, we're wondering whether we could move these closer to us-east?

Message 803 - 2025-05-27 17:03
From: Ozan Unsal
----------------------------------------
@Eitan Raviv I am having weird error in this MR
(https://gitlab.com/redhat/edge/ci-cd/pipe-x/autosd/-/merge_requests/54) pipeline, it can't trigger
the p-a-c and initiate-workspace job fails
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/jobs/10166780990 with ```ERROR: Job
failed (system failure): Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the
docker daemon running? (docker.go:1041:0s)```

Message 804 - 2025-05-28 08:35
From: Robert O'Brien
----------------------------------------
@Simon Walter @Hubert Stefanski I was trying to find a good home for some ansible playbooks that
I've been working on for BOS2 setup and also thinking ahead for new hardware platforms. I was
thinking of a new subgroup under https://gitlab.cee.redhat.com/automotive/testing-farm/ For example
https://gitlab.cee.redhat.com/automotive/testing-farm/infrastructure/flasher-vm/
https://gitlab.cee.redhat.com/automotive/testing-farm/infrastructure/sidekicks/ There are some
playbooks in personal repos that could be included here for transparency and re-use. Not something
to do today, but soon. WDYT?

Message 805 - 2025-06-02 14:34
From: Michael Ho
----------------------------------------
@Eitan Raviv Do you have some documentation explaining the set up of the custom runner pools? i.e.
what machine/s are involved and how they're scaled?

Message 806 - 2025-06-03 10:48
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Hubert Stefanski did something change on the downstream runners? The last two days,
the nigthly has been failing downstream because it can't find a runner :confused:

Message 807 - 2025-06-03 10:50
From: Eitan Raviv
----------------------------------------
link?

Message 808 - 2025-06-03 10:50
From: Juanje Ojeda
----------------------------------------

https://gitlab-prod-west.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/35337654

Message 809 - 2025-06-03 10:51
From: Juanje Ojeda
----------------------------------------
it's been happening since Sunday night:
https://gitlab-prod-west.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/pipelines
Maybe it's related with the update?

Message 810 - 2025-06-03 10:52
From: Eitan Raviv
----------------------------------------
the update of the gitlab instace? could be. lemme check one more thing

Message 811 - 2025-06-03 10:53
From: Juanje Ojeda
----------------------------------------
Sorry, it seems like CEE did it again. It redirected me to a different instance. The URL there is
not the normal one. The normal one, has the pipeline fine, but that one is failing.

Message 812 - 2025-06-03 10:53
From: Juanje Ojeda
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/pipelines

Message 813 - 2025-06-03 10:55
From: Eitan Raviv
----------------------------------------
IIUC IT moved the gitlab prod instance last weekend. maybe this is why you are getting the redirect

Message 814 - 2025-06-03 10:56
From: Eitan Raviv
----------------------------------------
from aws side - the pool has been up since 28 May with no issues documented in the activity log

Message 815 - 2025-06-03 10:56
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv sorry about the noise, I got login into that instance somehow and I saw a few nights
with a failing pipeline, so I got worried

Message 816 - 2025-06-03 10:56
From: Eitan Raviv
----------------------------------------
sure NP

Message 817 - 2025-06-03 11:28
From: Ozan Unsal
----------------------------------------
@Eitan Raviv we have also issue with the post merge pipeline
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/commit/4e8e9ac52f9721cb8e4fa9aba73bae6a68ac6743
do you have what is going on?

Message 818 - 2025-06-03 11:28
From: Ozan Unsal
----------------------------------------
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/jobs/10237248408 This is strange
:confused: ```remote: You are not allowed to upload code. fatal: unable to access
'https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/': The requested URL returned error:
403```

Message 819 - 2025-06-03 13:33
From: Michael Ho
----------------------------------------
@Eitan Raviv Do you know how we can raise the timeout on the foa runners? Apparently ours is set to
1h. Is this just to be done in the project level ci-cd settings or do the runners also have a number
that needs adjusting?

Message 820 - 2025-06-05 11:14
From: Michael Ho
----------------------------------------
@Eitan Raviv Hey Eitan, we're seeing lots of fluctuating performance with the ec2 based runners. I
want to see if shifting from r5.xlarge to r5d.xlarge changes something. This would change the runner
block device from ebs backed (affected by network usage and location) to local storage (nvme).

Message 821 - 2025-06-05 14:00
From: Juanje Ojeda
----------------------------------------
@Eitan Raviv @Hubert Stefanski I believe this is what I saw that ppl was using for the case we were
talking about, using Cloudfront for internal network:
https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-s3.html
https://medium.com/vectoscalar/use-cloudfront-for-api-gateway-s3-both-cc0e30e0962a

Message 822 - 2025-06-05 15:04
From: Hubert Stefanski
----------------------------------------
@Juanje Ojeda @Eitan Raviv
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/544/diffs

Message 823 - 2025-06-07 11:33
From: Michael Ho
----------------------------------------
@Eitan Raviv Not sure yet if this is a real problem but a heads up for you on Sunday: The aws
terraform apply job failed with the script being terminated at the end: ```Apply complete!
Resources: 0 added, 10 changed, 0 destroyed. Outputs: account_alias = [ { "account_alias" =
"it-cloud-aws-internal-ateam" "id" = "it-cloud-aws-internal-ateam" }, ]
rhel9_ami_id_ds_runner_us_east_2 = "ami-008cdd3e57e8995a2" rhel9_ami_id_release_runner_us_east_2 =
"ami-008cdd3e57e8995a2" Saving cache for successful job 00:07 Creating cache
aws-internal-protected... aws-internal/.terraform/: found 15 matching artifact files and directories
Terminated ERROR: Failed to cleanup volumes ERROR: Job failed (system failure): aborted:
terminated``` https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/35701258 And
also this happened now when I was testing the new runners (but in the middle of the script): ```TASK
[synchronise-scripts : chmod all scripts to executable] ******************* ok: [localhost] TASK
[synchronise-scripts : create merge-request (if needed)] ****************** Terminated WARNING:
after_script failed, but job will continue unaffected: context canceled ERROR: Failed to cleanup
volumes ERROR: Job failed (system failure): aborted: terminated```
https://gitlab.cee.redhat.com/automotive/contcert/foa-validators/ci-selbstrenovierung/-/jobs/35701596
I'm going to give it some time to stabilise in case the instances are still coming up properly.

Message 824 - 2025-06-09 10:17
From: Robert O'Brien
----------------------------------------
Could I get some eyes on a big-ish MR that relate to
https://dashboard.auto-toolchain.redhat.com/overview ? Python code. I will be on PTO tomorrow
morning and from Thursday for about 10 days. The MR removes duplicate code from 2 features: nightly
pipelines and metrics, DUT pool monitoring. Also working on the webserver code (autosd, rhivos and
download mirror) which may be added to MR today.
https://gitlab.cee.redhat.com/automotive/services/auto-toolchain-dashboard/-/merge_requests/31/diffs

Message 825 - 2025-06-09 13:55
From: Hubert Stefanski
----------------------------------------
Hey @Robert O'Brien @Simon Walter I've got this
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/548/diffs#83d339ca4da28d00335a8b5d4cd788440f860a19
to provision the VM on BOS2, I'm still a bit confused on how to deploy and configure flasher with
tftp and other services that it relies on, do you have any existing playbooks or scripts that you
use for it?
Ideally we can just drop them in at the end of this playbook to configure all of it via automation

Message 826 - 2025-06-12 09:48
From: Michael Ho
----------------------------------------
@Eitan Raviv Can you take a look at
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/551 please?

Message 827 - 2025-06-12 15:20
From: Nisha Saini
----------------------------------------
Hi SMEs, With the conditional SOA period ending soon(14-21 July 2025), renewal tickets have been
created and assigned. *Your action is required:* 1. Please follow *Step 9* on this document
(https://spaces.redhat.com/pages/viewpage.action?pageId=599001420) to generate the required SOA
attachments. 2. Upload those attachments to your assigned JIRA ticket &amp; mark "Pending Approval".
You may also refer to a completed renewal ticket: https://issues.redhat.com/browse/SOAR-3622. Please
reach out to me if you have any questions.

Message 828 - 2025-06-17 11:58
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski @Eitan Raviv did anyone changed the downstream workspace s3 bucket policy for the
static website? it looks like now it's trying to redirect to https and failing due lack of proper
cert: https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/36132306
Or can you think on another reason for that error?

Message 829 - 2025-06-17 13:48
From: Hubert Stefanski
----------------------------------------
:howdy: @Eitan Raviv, @Lev Veyde reached out to me requesting a new ec2 instance for the rhivos
dashboard, since you're more in the loop around the VPCs and subnets, which one can I use to create
that ec2 in? and how many addresses do we have left in it? I don't want to consume one from the
already strained runner pool is all

Message 830 - 2025-06-18 09:09
From: Michael Ho
----------------------------------------
@Eitan Raviv I'd like to try switch the FoA runners to the general compute ec2 type, m6a. Can you
take a look at https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/561
please? Thank you.

Message 831 - 2025-06-18 13:09
From: Ozan Unsal
----------------------------------------
@Eitan Raviv @Hubert Stefanski I have created MR
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/564) according to
our e-mail thread. Is it enough to add rhivos.git to terraform?

Message 832 - 2025-06-18 14:03
From: Michael Ho
----------------------------------------
@Hubert Stefanski I need to remount https://rhivos.auto-toolchain.redhat.com/evidence-warehouse/ to
a different bucket. Can you help?

Message 833 - 2025-06-19 09:54
From: Hubert Stefanski
----------------------------------------
:howdy: https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/567
straightforward review for anyone willing, this just adds cost center tags, we don't have an
immediate use for them ourselves, but they're synced back to some centralized service somwhere that
I'm now forgetting the name for

Message 834 - 2025-06-19 13:05
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv Do we have anything to discuss on todays Infra call? Think we got most of the current
issues discussed during yesterdays 1:1?

Message 835 - 2025-06-19 13:06
From: Hubert Stefanski
----------------------------------------
@Michael Ho @Lev Veyde
https://gitlab.cee.redhat.com/automotive/services/supply-chain-webserver/-/merge_requests/47/diffs I
caught up on our rhivos webserver situation, seems like this is the only change we need to do :)

Message 836 - 2025-06-24 21:51
From: Ryan Smith
----------------------------------------
Hi everyone, Could I get some ACKs here
(https://gitlab.com/redhat/edge/ci-cd/pipe-x/tools/auto-toolchain-containers/-/merge_requests/90) as
you have time?

Message 837 - 2025-06-30 10:16
From: Ozan Unsal
----------------------------------------
@Michael Ho do you have any idea about who created `CBS_ATCBOT_SSL_CERT` certificate for cbs koji?
We are having certificate expired error in upstream pipeline, so we should renew the certificate
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/jobs/10509117358. I am trying to get
some information about how to renew this certificate. I will be glad, if you have any idea about
this :smile:

Message 838 - 2025-07-08 16:26
From: Juanje Ojeda
----------------------------------------
Can I have some reviews here?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/579

Message 839 - 2025-07-08 16:40
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski qq, how do we manage the users/members in projects for gitlab.cee? I added a
project to pipe-x, but I need to add a maintainer that is not in our ldap group :thinking_face: Do I
do it manually or do we manage those cases with tf as well. I didn't see anything in other projects,
but maybe I missed it.

Message 840 - 2025-07-08 16:42
From: Hubert Stefanski
----------------------------------------
It's in
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/main/gitlab/cee/modules/toolchain/group_pipe-x.tf?ref_type=heads
the common name (cn) corresponds to the rover group name, so whatever group level you need to add
users, either add them to the respective group in rover, or create a new rover group and refer to it
in a new `gitlab_group_ldap_link` for the specific gitlab project, or gitlab repo you want

Message 841 - 2025-07-08 16:48
From: Juanje Ojeda
----------------------------------------
I wanted to add them just to that project, which is under pipe-x, but I didn't want to add them to
our rover group, just to that project.

Message 842 - 2025-07-08 16:54
From: Hubert Stefanski
----------------------------------------
https://registry.terraform.io/providers/gitlabhq/gitlab/latest/docs/resources/project_membership
Then this would be the way to do it, refer to the project (through the terraform module with dot
notation) and the user ID and their access level

Message 843 - 2025-07-08 17:05
From: Michael Ho
----------------------------------------
Did you try asking AI first before asking Hubert???

Message 844 - 2025-07-08 17:05
From: Michael Ho
----------------------------------------
We need to optimise

Message 845 - 2025-07-08 17:07
From: Hubert Stefanski
----------------------------------------
Real Stupidity &gt; Artifical Intelligence :think_1:

Message 846 - 2025-07-08 17:08
From: Hubert Stefanski
----------------------------------------
Actually there is a notebookLM with the infra repo loaded in

Message 847 - 2025-07-08 17:08
From: Hubert Stefanski
----------------------------------------
so Maybe it would work? but maybe it also needs to have context of the terraform provider as a whole

Message 848 - 2025-07-08 17:10
From: Juanje Ojeda
----------------------------------------
> Did you try asking AI first before asking Hubert??? I didn't, but I doubt the AI knows about our
conventions. Maybe that NotebookLM does :thinking_face: But as we didn't have any examples, it
probably doesn't

Message 849 - 2025-07-08 17:15
From: Michael Ho
----------------------------------------
We should put the notebooklm with the infra repo loaded in into the readme for that repo

Message 850 - 2025-07-08 17:15
From: Michael Ho
----------------------------------------
As in linked there I mean

Message 851 - 2025-07-08 17:16
From: Michael Ho
----------------------------------------
So someone who jumps into that repo can quickly head off to the notebooklm to ask it questions

Message 852 - 2025-07-08 17:21
From: Juanje Ojeda
----------------------------------------
This should work, right?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/580

Message 853 - 2025-07-08 17:23
From: Hubert Stefanski
----------------------------------------
Should, let's see what the terraform plan says

Message 854 - 2025-07-08 17:23
From: Juanje Ojeda
----------------------------------------
does that notebook has also the terraform docs? that would make it more powerful

Message 855 - 2025-07-08 17:26
From: Hubert Stefanski
----------------------------------------
I think those documents are directly compiled from git repos for each provider, so maybe we could
repomix it

Message 856 - 2025-07-08 17:26
From: Hubert Stefanski
----------------------------------------
I tried adding the URL directly but that failed

Message 857 - 2025-07-08 17:27
From: Michael Ho
----------------------------------------
:brainintensifies: :notebooklm:

Message 858 - 2025-07-08 17:28
From: Juanje Ojeda
----------------------------------------
I asked notebooklm and answered me kinda the same as the first response from hubes, but a bit more
verbose :thinking_face:

Message 859 - 2025-07-08 17:28
From: Michael Ho
----------------------------------------
s/but a bit more verbose/but better/g :sweat_smile:

Message 860 - 2025-07-08 17:28
From: Michael Ho
----------------------------------------
jk

Message 861 - 2025-07-08 17:40
From: Juanje Ojeda
----------------------------------------
It worked :slightly_smiling_face: Thanks

Message 862 - 2025-07-10 12:09
From: Hubert Stefanski
----------------------------------------
Does anyone have experience with sonarqube? For context:
https://sonarqube.corp.redhat.com/account/projects was set up by Eitan on the infra repo, i'm trying
to merge a change that technically has a security violation (not really, it's fully reasonable in my
opinion) but I need admin privileges for the project (pipe-x/infra) in order to review the security
concern and make it pass gating Eitan is on PTO today, so he'll probably answer me on Sunday, but
just thought to pop this question out there to see if anyone encountered this before

Message 863 - 2025-07-10 12:10
From: Michael Ho
----------------------------------------
me puts on leadership hat: "Could we somehow give AI the privileges??"

Message 864 - 2025-07-10 12:11
From: Hubert Stefanski
----------------------------------------
If AI makes browsing "The Source" less infuriating, i'm all for it

Message 865 - 2025-07-10 12:12
From: Hubert Stefanski
----------------------------------------
:tableflip:

Message 866 - 2025-07-10 12:13
From: Hubert Stefanski
----------------------------------------
1. Query for a topic in the Source 2. Find somethjing that sounds exactly like what you need 3.
Click the link and it's 50/50 on permissions denied or not found

Message 867 - 2025-07-10 12:14
From: Hubert Stefanski
----------------------------------------
For those using slack in the future to find something actually useful:
https://source.redhat.com/groups/public/sonarqubecorp/user_documentation/getting_started_guide

Message 868 - 2025-07-11 11:52
From: Ryan Smith
----------------------------------------
Hi everyone, could I get some ACKs on this MR
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/585) to un-break
infra pipelines?

Message 869 - 2025-07-14 08:05
From: Hubert Stefanski
----------------------------------------
Hey @Avihai Efrat or @Juanje Ojeda I'm trying to get access to sonarqube According to the response I
got here:
https://redhat.service-now.com/help?id=rh_ticket&amp;table=incident&amp;sys_id=121a25ab3322a618c8c5abb13d5c7be4
either of you two should have ownership, I'm not aware if either of you set it up in the first
place, I thought it inherited permissions from gitlab, but apparently not (since I would have them
as an owner of infra repo and the parent namespace)

Message 870 - 2025-07-14 09:13
From: Avihai Efrat
----------------------------------------
Hi @Hubert Stefanski , Juanje is on on leave till mid Aug. I believe @Eitan Raviv or @Roni Eliezer
might know more around Sonarqube (I did not set it up)

Message 871 - 2025-07-14 10:21
From: Avihai Efrat
----------------------------------------
Let me check the ticket as well ... I was not aware I was the owners of this project as I did not do
anything with Sonarqube but as manager someone might have wrote my as owner which is OK
:slightly_smiling_face:
@Hubert Stefanski Let me know how can I assist or what to change to help you out. Can you send me
the URL to SonarQube and I'll give it a shot

Message 872 - 2025-07-14 12:35
From: Michael Ho
----------------------------------------
Hi @Eitan Raviv, how can we move the registration of our self hosted runners from
https://gitlab.cee.redhat.com/automotive/contcert/foa-validators/ to
https://gitlab.cee.redhat.com/automotive/contcert ?

Message 873 - 2025-07-14 15:02
From: Eitan Raviv
----------------------------------------
@Michael Ho you need to: • change the group reference of the foa runner registration
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blob/main/gitlab/cee/runners.tf?ref_type=heads#L77)
to the concert group and push a new commit • after `tf apply` is executed by the merge, download the
app-state and extract the runner token (according to the runner name) [1] • replace the new token in
the ci-cd (https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/settings/ci_cd) variable
named CONFIG_TF_VAR of the `aws-internal` environment (this variable contains a map. replace the
value of the `foa_validators_ds_pool_runner_token` entry). This is for future redeployments via
terraform. • ssh to each FoA ec2s and unregister the runner [2] • re-register the runners to concert
using the new token[3] then check that the runner
https://gitlab.cee.redhat.com/groups/automotive/contcert/-/runners shows the registrations • if you
need to enlarge the number of instances
(https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/blame/main/aws-internal/main.tf?ref_type=heads#L221)
in the pool please do so via an MR and not manually. please note that there are currently only 6
free IPs available on the subnet where the pool is deployed so you cannot add more instances than
that. I am working on enlarging (https://issues.redhat.com/browse/VROOM-30683) it. [1] aws s3api
get-object --bucket "toolchain-tfstate" --key "gitlab-app-state" "./app-state" [2] sudo
gitlab-runner unregister --all-runners [3] cat /tmp/log.txt | grep 'gitlab-runner register' and
using the new token run the command with sudo

Message 874 - 2025-07-15 06:12
From: U04QDQYQ0SF
----------------------------------------
Sorry, @Avihai Efrat. I couldn't find information about `give me a summery of this thread`. I've
saved your query so I can continue to learn. Here are a couple things you can try right now:
1.) Type `/feedback` to provide Shadowbot feedback 2.) Type `concierge` to talk with some humans 3.)
Click *here (https://source.redhat.com/?search=give+me+a+summery+of+this+thread)* to search on
source

Message 875 - 2025-07-24 14:30
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv Do you want to mvoe our Pipeline-Infra office hours to now? if you're around?

Message 876 - 2025-07-24 14:30
From: Eitan Raviv
----------------------------------------
sure, let's

Message 877 - 2025-07-24 14:30
From: Eitan Raviv
----------------------------------------
2 minutes

Message 878 - 2025-07-30 12:35
From: Ozan Unsal
----------------------------------------
@Eitan Raviv @Hubert Stefanski do you know what happened to webserver
https://rhivos.auto-toolchain.redhat.com/ ? The builds are not mounted

Message 879 - 2025-07-30 12:48
From: Eitan Raviv
----------------------------------------
Fixed

Message 880 - 2025-07-30 12:50
From: Ozan Unsal
----------------------------------------
thanks Eitan, what was the issue?

Message 881 - 2025-07-30 13:26
From: Eitan Raviv
----------------------------------------
I can't find a reason why the container failed. But the keepalive service failed to restart it due
to missing execute permissions on the keepalive script. This is very strange, because journalctl
shows keepalive worked 8 days ago, which is after the server migration to the new subnet.

Message 882 - 2025-07-30 14:22
From: Hubert Stefanski
----------------------------------------
I think this is ready for a review:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/581 Setting the
groundwork for a near-future RHIVOS artifact server through cloudfront

Message 883 - 2025-07-31 12:16
From: Ozan Unsal
----------------------------------------
@Eitan Raviv I guess container failed again, https://rhivos.auto-toolchain.redhat.com/ we can't see
the product builds

Message 884 - 2025-07-31 12:23
From: Eitan Raviv
----------------------------------------
up and running. for some reason the keepalive service is not picking the failure up on its own, only
when invoked manually. i will investigate

Message 885 - 2025-07-31 12:26
From: Ryan Smith
----------------------------------------
Just wanted to raise that the intermittent availability of the web server has been causing issues in
FoA validator runs while we're trying to prepare our milestone submission report.

Message 886 - 2025-07-31 14:27
From: Michael Ho
----------------------------------------
The server is having issues again

Message 887 - 2025-07-31 14:28
From: Michael Ho
----------------------------------------
This is really hampering our 3.5 submission...

Message 888 - 2025-07-31 14:49
From: Michael Ho
----------------------------------------
It appears to have been restarted just now - Sergei is proceeding with validator re-runs for
submission 3.5 - we will ping here if the server goes down again.

Message 889 - 2025-07-31 14:49
From: Michael Ho
----------------------------------------
@Avihai Efrat FYI

Message 890 - 2025-07-31 14:59
From: Avihai Efrat
----------------------------------------
@Eitan Raviv @Hubert Stefanski can we drop all the rest of the work and give the RHIVOS webserver
attention and priority so it's fixed for good ? All the rest can wait until this is resolved.

Message 891 - 2025-07-31 15:00
From: Avihai Efrat
----------------------------------------
I know you are busy with many other incoming requests as well and thank you both Eitan and Hubert
for all your hard work so far :pray:

Message 892 - 2025-07-31 15:01
From: Eitan Raviv
----------------------------------------
I think the container is facing a load issue with both FoA accessing it and a heavy load from QE
download right now (the one Priyanka asked to help me with). I am trying to figure out where the
bottleneck is exactly

Message 893 - 2025-07-31 15:04
From: Hubert Stefanski
----------------------------------------
can we increase the size? i hope the bottleneck isn't the s3 fs mount from goofys

Message 894 - 2025-07-31 15:05
From: Eitan Raviv
----------------------------------------
the size of?

Message 895 - 2025-07-31 15:09
From: Michael Ho
----------------------------------------
Please don't touch it right now as Sergei is running validators

Message 896 - 2025-08-03 21:04
From: Hubert Stefanski
----------------------------------------
@Ryan Smith @Michael Ho there's an email CC'd to you in your inboxes, looks like a contcert token
for JIRA created in the auto-cki-bot account is about to expire, double-messaging just in case, also
thanks @Eitan Raviv for spotting it (my filters are too good and it got thrown away into a labeleld
drawer)

Message 897 - 2025-08-04 08:39
From: Michael Ho
----------------------------------------
Aha, thank you.

Message 898 - 2025-08-05 11:21
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv
https://docs.google.com/spreadsheets/d/1NN1dFDUh789_u1qV7afXROAXiLdfD1AiGmZymligKO0/edit?usp=sharing

Message 899 - 2025-08-05 11:21
From: Hubert Stefanski
----------------------------------------
Looks like a bulk of the work was done for us WRT IAM auditing

Message 900 - 2025-08-05 11:22
From: Hubert Stefanski
----------------------------------------
Tab 3  "Access Key Issues" even highlights best guess owners

Message 901 - 2025-08-05 11:22
From: Hubert Stefanski
----------------------------------------
We still need to send this out to a wider audience to have people self-report ownership before we
start the rotation

Message 902 - 2025-08-06 13:10
From: Hubert Stefanski
----------------------------------------
Vibe coded rhivos-cloudfront
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/602/diffs (at least
the first part of it, there's other MRs) (@Eitan Raviv if you can take a look)

Message 903 - 2025-08-06 13:10
From: Hubert Stefanski
----------------------------------------
overall the approach here makes sense, but I might be echo chambering myself, so LMK

Message 904 - 2025-08-07 09:03
From: Hubert Stefanski
----------------------------------------
:wave:@Eitan Raviv, @Roni Eliezer wants to add a new project in our gitlab terraform config, but
seems like his plan is overwriting some of your recent changes
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/jobs/38397638 thought you might
want to check on those before we merge it

Message 905 - 2025-08-07 14:21
From: Ozan Unsal
----------------------------------------
@Eitan Raviv @Hubert Stefanski I was checking monthly builds for AutoSD and I cannot see the monthly
build in webserver https://autosd.sig.centos.org/AutoSD-9/monthly/, although I can see it in S3
bucket. Do you have any idea?

Message 906 - 2025-08-07 14:23
From: Ozan Unsal
----------------------------------------
I mean `autosd9-202508010003` is missing in webserver

Message 907 - 2025-08-07 14:30
From: Hubert Stefanski
----------------------------------------
I'll put that on my todo list

Message 908 - 2025-08-07 15:37
From: Tomas Golembiovsky
----------------------------------------
@Eitan Raviv Do you still need this one or can we close it?
https://gitlab.cee.redhat.com/automotive/contcert/foa-validators/dbus-broker-tests/-/merge_requests/23

Message 909 - 2025-08-08 11:42
From: Ozan Unsal
----------------------------------------
Hey @Hubert Stefanski I guess there is an issue with the cloudfront. Since I can see today's nightly
build in S3 but it is not available in webserver https://autosd.sig.centos.org/AutoSD-9/

Message 910 - 2025-08-11 09:57
From: Ozan Unsal
----------------------------------------
Hi @Hubert Stefanski @Eitan Raviv, is there any update regarding to builds in
https://autosd.sig.centos.org/AutoSD-9/. I still see the last build from Aug 1st, although there are
builds for Aug 9th, 10th and 11th in S3 bucket

Message 911 - 2025-08-11 10:00
From: Hubert Stefanski
----------------------------------------
Fighting fires, looking into that now though.

Message 912 - 2025-08-12 07:45
From: Hubert Stefanski
----------------------------------------
Can we get one more review/approval here please?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/617

Message 913 - 2025-08-12 09:39
From: Hubert Stefanski
----------------------------------------
And another one for reviews
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/616 This one cleans
up orphaned directories (ones that don't exist in s3 anymore) so they won't be indexed on the
webserver and cause confusion when they get redireted to a non-existent clodfront artifact

Message 914 - 2025-08-12 09:44
From: Ozan Unsal
----------------------------------------
I can see the latest builds in https://autosd.sig.centos.org/AutoSD-9/ thanks @Hubert Stefanski for
fixing it.

Message 915 - 2025-08-12 10:25
From: Ozan Unsal
----------------------------------------
@Eitan Raviv, @Hubert Stefanski any idea why this job couldn't be started
https://gitlab.cee.redhat.com/automotive/pipe-x/downstream-pipelines-as-code/-/jobs/38598477?

Message 916 - 2025-08-12 10:37
From: Hubert Stefanski
----------------------------------------
initially, no idea why, we might need to look into the runner logs

Message 917 - 2025-08-12 10:42
From: Ozan Unsal
----------------------------------------
I was checking EC2 instances for us-east-2 region and there is only one instance and the status is
stopped https://us-east-2.console.aws.amazon.com/ec2/home?region=us-east-2#Instances:

Message 918 - 2025-08-12 10:50
From: Hubert Stefanski
----------------------------------------
Those runners are served from the aws-internal account

Message 919 - 2025-08-12 10:50
From: Hubert Stefanski
----------------------------------------
think you might be looking at the "public" one

Message 920 - 2025-08-12 10:51
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv are these instances plugged into splunk in any way? just wondering if I need to ssh
into them to see the logs, or if theres a splunk index for it

Message 921 - 2025-08-12 10:56
From: Eitan Raviv
----------------------------------------
there are splunk indexes for them. see https://dashboard.auto-toolchain.redhat.com/resources
VHCL-008 monitoring

Message 922 - 2025-08-12 11:04
From: Eitan Raviv
----------------------------------------
I see errors on both runners. analyzing

Message 923 - 2025-08-12 11:10
From: Hubert Stefanski
----------------------------------------
@Roni Eliezer also found this on the infra repo
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/pipelines/12520559

Message 924 - 2025-08-12 11:17
From: Eitan Raviv
----------------------------------------
on one of the two instances, I was trying out something. this is probably the reason for the error
that Roni saw on the infra repo. I will regenerate the instance so pipelines can continue. On the
other instance there is an error which I can't find a reason for.

Message 925 - 2025-08-12 12:41
From: Hubert Stefanski
----------------------------------------
:howdy: @Roni Eliezer needs one more review here to resolve part of the issue he discussed in the
Open Sync meeting just now
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/618

Message 926 - 2025-08-12 13:17
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv Do you remember the IT ticket we had to increase our resource quotas on MP+ ?

Message 927 - 2025-08-12 13:17
From: Hubert Stefanski
----------------------------------------
I just wanna take a peek at that to file one for Roni for TC

Message 928 - 2025-08-12 14:14
From: Hubert Stefanski
----------------------------------------
one review/approval here from anyone willing :)
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/620

Message 929 - 2025-08-12 15:48
From: Roni Eliezer
----------------------------------------
@Hubert Stefanski @Eitan Raviv I got the following error
(https://gitlab.cee.redhat.com/automotive/services/test-console/-/jobs/38614821): ```fatal: unable
to access 'https://gitlab.cee.redhat.com/automotive/services/test-console.git/': Error while
processing content unencoding: invalid stored block lengths```

Message 930 - 2025-08-14 12:28
From: Michael Ho
----------------------------------------
Just following up on our discussion in the auto-toolchain team meeting, did we now increase the size
of the RHIVOS webserver ec2 instance?

Message 931 - 2025-08-18 11:52
From: Roni Eliezer
----------------------------------------
Hi we get the following error when uploading to S3 bucket any idea? ```Unable to locate
credentials```

Message 932 - 2025-08-18 12:02
From: Avihai Efrat
----------------------------------------
Can we somehow add the script output link (stats ) to the ATC dashboard monitoring per service
resource page here (https://dashboard.auto-toolchain.redhat.com/resources)?

Message 933 - 2025-08-18 12:04
From: Avihai Efrat
----------------------------------------
Make sense @Michael Ho, if it's too much work to add it there leave it

Message 934 - 2025-08-18 18:54
From: Avihai Efrat
----------------------------------------
Thank you @Eitan Raviv for pulling the data from current web server instances .
About priority: My point before was to get the baseline monitoring on the current and past webserver
availability and issues as one of our critical ATC services and part of Infrastructure availability
improvements (AUTOBU-886). @Eitan Raviv can you add an Epic for monitoring the RHIVOS webserver
service ? We will also need to keep monitoring it after we switch to cloudfront and pulp (which will
take a while especially with pulp VPN blockers for DS)
This will help us with understanding how much we improved (hopefully) by moving to cloud front so we
should definitely be investing in it .
@Petr Sabata please correct me if I’m off about monitoring this service not on the top priority
list.

Message 935 - 2025-08-19 16:02
From: Petr Sabata
----------------------------------------
For this initiative for sure; we need to figure out what to monitor and how to monitor it to get
some baseline data.

Message 936 - 2025-08-21 12:35
From: Juanje Ojeda
----------------------------------------
@Hubert Stefanski I think it's time to implement this. I was thinking on taking this tasks. I might
refine the ticket to specify that it should be a job in the upstream pipeline, but I think this
capture the task. Would you ming to review it and give me your blasing to work on that? hehe
https://issues.redhat.com/browse/VROOM-32269

Message 937 - 2025-08-26 09:16
From: Hubert Stefanski
----------------------------------------
:howdy: can i get some eyes on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/602? I've left some
more context in the MR description

Message 938 - 2025-08-26 13:20
From: Ozan Unsal
----------------------------------------
I have a dumb question, can we create gitlab runners close to iad2 datacenter for downstream
generate-compose job? Since the generated composes are stored there
https://download-01.beak-001.prod.iad2.dc.redhat.com/odcs/prod/odcs-4399323/ maybe having runners
closer to this region shortens the compose download time.

Message 939 - 2025-08-28 13:04
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/632 One more review,
the merge in !602 had some Terraform apply failures, these should fix that..

Message 940 - 2025-08-28 20:06
From: Juanje Ojeda
----------------------------------------
Please, have a look to this MR:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/633 That one is
required for making this one work:
https://gitlab.com/redhat/edge/ci-cd/pipe-x/pipelines-as-code/-/merge_requests/424

Message 941 - 2025-09-01 06:40
From: Luigi Pellecchia
----------------------------------------
Hi everyone, I was thinking to change Test Console OpenShift strategy configuration from Recreate to
Rolling to avoid disruptions in user experience during deployment updates. wdyt? Is there any reason
we are using Recreate or any concerns on using Rolling?

Message 942 - 2025-09-01 07:23
From: Hubert Stefanski
----------------------------------------
No specific reason IIRC, though if you're planning on major updates and major incompatibilities
between versions, I'd say keep recreate, but if it's a fairly "clean" update, then no obstacles to
rolling

Message 943 - 2025-09-01 12:39
From: Hubert Stefanski
----------------------------------------
The previous cloudfront apply failed again :sad_meow:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/635 this one should
hopefully fix that...

Message 944 - 2025-09-01 14:30
From: Hubert Stefanski
----------------------------------------
I really hope this is the last one
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/637 my sanity is
begging for it

Message 945 - 2025-09-01 15:11
From: Hubert Stefanski
----------------------------------------
Spoiler alert: it wasn't ....

Message 946 - 2025-09-01 15:11
From: Hubert Stefanski
----------------------------------------
```│ Error: creating WAFv2 WebACL (rhivos-internal-vpc-only): WAFInvalidParameterException: Error
reason: You have used none or multiple values for a field that requires exactly one value., field:
RULE, parameter: Rule │ { │ RespMetadata: { │ StatusCode: 400, │ RequestID:
"bb14f413-e774-4af9-8faa-d29fcc99d264" │ }, │ Field: "RULE", │ Message_: "Error reason: You have
used none or multiple values for a field that requires exactly one value., field: RULE, parameter:
Rule", │ Parameter: "Rule", │ Reason: "You have used none or multiple values for a field that
requires exactly one value." │ } │ │ with
module.rhivos_cloudfront.aws_wafv2_web_acl.rhivos_internal_vpc_only, │ on
modules/rhivos-cloudfront/waf.tf line 25, in resource "aws_wafv2_web_acl"
"rhivos_internal_vpc_only": │ 25: resource "aws_wafv2_web_acl" "rhivos_internal_vpc_only" { │ ╵```

Message 947 - 2025-09-01 15:12
From: Hubert Stefanski
----------------------------------------
I'll try to set this up manually instead of fidgeting with terraform, maybe that way I'll at least
get something deployed and then re-applied retroactively to that config, so I don't need to bother
anyone anymore (for a while)

Message 948 - 2025-09-01 15:19
From: Juanje Ojeda
----------------------------------------
I find that way always shorter and less troublesome (unless it's a straightforward change) for infra
changes

Message 949 - 2025-09-04 13:40
From: Hubert Stefanski
----------------------------------------
Can I get some eyes on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/616? this one
slipped through the cracks somehow

Message 950 - 2025-09-05 11:16
From: Luigi Pellecchia
----------------------------------------
Morning, I see this error building container in gitlab CI ```curl: (28) Failed to connect to
repository-basic.engineering.redhat.com port 443: Connection timed out error building image: error
building stage: failed to execute command: waiting for process to exit: exit status 28``` any
insights? https://gitlab.cee.redhat.com/automotive/services/test-console/-/jobs/40043527

Message 951 - 2025-09-05 11:24
From: Kanitha Chim
----------------------------------------
seems that this `https://repository-basic.engineering.redhat.com` is not reacheable, maybe wait and
try again

Message 952 - 2025-09-05 11:34
From: Ryan Smith
----------------------------------------
Seems internal Nexus is down right now - nothing shows up in outage-list about this so Im going to
report to middleware

Message 953 - 2025-09-05 11:45
From: Ryan Smith
----------------------------------------
There is ongoing network maintenance in the IAD2 data center today that seems to be affecting RERC
availability. According to outage list the scheduled maintenance window is over at 1400UTC and
things should be okay then

Message 954 - 2025-09-05 11:45
From: Ryan Smith
----------------------------------------
cc: @Luigi Pellecchia @Kanitha Chim

Message 955 - 2025-09-05 11:46
From: Kanitha Chim
----------------------------------------
thanks @Ryan Smith :meow_thx:

Message 956 - 2025-09-05 11:48
From: Ryan Smith
----------------------------------------
Just FYSA there's also scheduled resilience testing for the same data center next week from 8 - 12
Sep. The notice says there shouldn't be any impact to users, but if things are acting funny we
should keep it in mind and file a ticket for anything fatal

Message 957 - 2025-09-08 08:42
From: Robert O'Brien
----------------------------------------
Good morning, the ATC dashboard expired on Friday. No issues on Firefox, but I'd like to fix the
issue. I've looked at the dashboard code, the RH certs there expire in 2055. When I run locally, the
webpage is not secured. the gitlab-ci.yml includes pipeline-as-code gitlab files, but I haven't
found what I'm looking for. Anyone here any suggestions on how to update a cert for ATC dashboard?

Message 958 - 2025-09-08 08:49
From: Hubert Stefanski
----------------------------------------
&gt; certs there expire in 2055 Cool, so we're covered for the next 30 years :wink: (jk, I know it's
a typo) So, generally that process isn't difficult, but the first step is to re-submit a certificate
request to IT. let me find the docs for that

Message 959 - 2025-09-08 08:51
From: Hubert Stefanski
----------------------------------------

https://spaces.redhat.com/spaces/Automotive/pages/339597128/Auto+Toolchain+SSL+Certificates#AutoToolchainSSLCertificat[…]d.auto-toolchain.redhat.com
(https://spaces.redhat.com/spaces/Automotive/pages/339597128/Auto+Toolchain+SSL+Certificates#AutoToolchainSSLCertificates-dashboard.auto-toolchain.redhat.com)

Message 960 - 2025-09-08 08:54
From: Robert O'Brien
----------------------------------------
```auto-toolchain-dashboard (update-cert) $ openssl x509 --enddate -noout -in
certs/RH-IT-Root-CA.crt notAfter=Jun 26 17:38:11 2055 GMT```

Message 961 - 2025-09-08 08:57
From: Kanitha Chim
----------------------------------------
wow 2055 for real

Message 962 - 2025-09-08 08:58
From: Kanitha Chim
----------------------------------------
:hehecat:

Message 963 - 2025-09-08 09:03
From: Hubert Stefanski
----------------------------------------
Ah, but that's for the CA expiry date, not the .crt that we use to sign for SSL

Message 964 - 2025-09-10 10:55
From: Roni Eliezer
----------------------------------------
Hi, any idea why this stopped working
https://gitlab.cee.redhat.com/automotive/services/test-console/-/jobs/40257504 ```INFO[0154]
Running: [/bin/sh -c curl -X GET
https://repository-basic.engineering.redhat.com/nexus/repository/dno-raw/droute-client/1.2.2/droute-linux-386
-o "${DROUTE_PATH}" &amp;&amp; chmod +x "${DROUTE_PATH}"] % Total % Received % Xferd Average Speed
Time Time Time Current Dload Upload Total Spent Left Speed 0 0 0 0 0 0 0 0 --:--:-- --:--:--
--:--:-- 0 curl: (60) SSL certificate problem: unable to get local issuer certificate```

Message 965 - 2025-09-10 12:31
From: Ozan Unsal
----------------------------------------
Hi @Ryan Smith any idea why the contcert-client is not installed in gator container-build?
https://gitlab.cee.redhat.com/automotive/fences/gating/gator/-/jobs/40261940

Message 966 - 2025-09-11 12:41
From: Nisha Saini
----------------------------------------
Hi All, Can I get some reviews on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/639

Message 967 - 2025-09-12 13:04
From: Hubert Stefanski
----------------------------------------
small review for anyone willing,
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/640 no rush on this,
i'll probably only merge this on Monday

Message 968 - 2025-09-12 13:56
From: Luigi Pellecchia
----------------------------------------
Hi everyone, I see we have the following definition in Test Console preprod ```annotations:
deployment.kubernetes.io/revision (http://deployment.kubernetes.io/revision): '64'
turbo.ibm.com/override (http://turbo.ibm.com/override): 'true'``` and this error ```Invalid value
'true' for annotation 'turbo.ibm.com/override (http://turbo.ibm.com/override)'. Valid values are:
false, cpu, all``` Which value is suggested here?

Message 969 - 2025-09-14 19:37
From: Avihai Efrat
----------------------------------------
Seems like this helped :

Message 970 - 2025-09-15 08:09
From: Hubert Stefanski
----------------------------------------
:howdy: https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/640 If
anyone could lend a review :)

Message 971 - 2025-09-15 09:02
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/642 - PEBKAC on my
end, copy pasting policies and not noticing I didn't change some paths... :facepalm:

Message 972 - 2025-09-16 06:27
From: Luigi Pellecchia
----------------------------------------
HI everyone, I see CI jobs stuck
https://gitlab.cee.redhat.com/automotive/services/test-console/-/merge_requests/487 But I checked
and there are available runners, any idea?

Message 973 - 2025-09-16 11:23
From: Hubert Stefanski
----------------------------------------
@Robert O'Brien you're going to have to re-submit that CSR with a proper cname in the request, @Ozan
Unsal noticed you requested atcdashboard-rhivos.int.paas.dev.redhat.com
(http://atcdashboard-rhivos.int.paas.dev.redhat.com)

Message 974 - 2025-09-16 11:23
From: Hubert Stefanski
----------------------------------------
this time around please note the private key you use to generate the csr, we'll need that when we
add it to the deployment, also the cname should match the current dashboard url

Message 975 - 2025-09-16 13:22
From: Hubert Stefanski
----------------------------------------
:howdy: can I get one more approval here?
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/645

Message 976 - 2025-09-16 14:13
From: Hubert Stefanski
----------------------------------------
and one more please:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/646

Message 977 - 2025-09-17 09:50
From: Hubert Stefanski
----------------------------------------
@Eitan Raviv Mind taking another glance at
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/616 ? I think i
addressed all of your comments

Message 978 - 2025-09-17 09:58
From: Eitan Raviv
----------------------------------------
Hi !channel, Attn: If you are accessing AWS from the command line manually or programmaticaly
We have recently received a communication from IT that we should change the way we login to AWS from
the command line. Using static personal users is no longer allowed starting November, and SSO should
be used instead. I have created a page (https://spaces.redhat.com/x/C4BTKQ) that explains how to
migrate and I will also give a demonstration in the Toolchain Demo this afternoon. Please take a few
minutes to complete the migration for your personal user if you have one, because starting November,
IT will automatically delete AWS users risking lockout. Also please alert me on the Jira Epic
(https://issues.redhat.com/browse/VROOM-31311) comments to any use cases you might have around using
static AWS credentials so that I can address them in time. Thanks a lot

Message 979 - 2025-09-17 12:09
From: Ozan Unsal
----------------------------------------
Hi @Hubert Stefanski @Eitan Raviv autosd webserver seems down, I cannot reach
http://autosd.sig.centos.org/AutoSD-9/nightly/repos/AutoSD/compose/AutoSD

Message 980 - 2025-09-17 13:16
From: Hubert Stefanski
----------------------------------------
Quite an MR for reviews :please-cat:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/644

Message 981 - 2025-09-19 08:57
From: Michael Ho
----------------------------------------
I guess I've discovered where that token was being used... It was still in place for the
rhivos-webserver. I've knocked that offline and @Kanitha Chim said she'll fix it.

Message 982 - 2025-09-19 09:00
From: Luigi Pellecchia
----------------------------------------
It was announced somewhere the introduction of SonarQube? I see my CI failing now and I don't
expected to spend time fixing those stuff today!

Message 983 - 2025-09-22 13:05
From: Hubert Stefanski
----------------------------------------
:howdy: Can I get some eyes on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/644 ?
Eitan kindly added a commit where he addressed his own comment (thank you!) so I think we're ready
to deploy this. still some more work to do, but getting close

Message 984 - 2025-09-22 14:18
From: Hubert Stefanski
----------------------------------------
One more :meow_pwettyplease:

Message 985 - 2025-09-23 10:59
From: Hubert Stefanski
----------------------------------------
May I get some eyes on
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/652? the apply for
!644 failed, unfortunately with terraform some fields aren't validated prior to hitting the API, so,
sometimes we're left with this ugly "validated" but not "correct" terraform config...

Message 986 - 2025-09-23 14:05
From: Hubert Stefanski
----------------------------------------
@Kanitha Chim I see you're having some unrelated pipeline failures in:
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/653

Message 987 - 2025-09-23 14:06
From: Hubert Stefanski
----------------------------------------
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/649/diffs Should fix
the one of the changes in the plan

Message 988 - 2025-09-23 14:06
From: Hubert Stefanski
----------------------------------------
as for the bucket failure, I'll address that now

Message 989 - 2025-09-25 08:30
From: Kanitha Chim
----------------------------------------
one more review here pls
https://gitlab.cee.redhat.com/automotive/services/supply-chain-webserver/-/merge_requests/51

Message 990 - 2025-09-29 06:44
From: Roni Eliezer
----------------------------------------
Hi Good morning, I can't login to RHIVOS server, not sure if it's a known issue or my local issue:

Message 991 - 2025-09-29 08:41
From: Michael Ho
----------------------------------------
@Hubert Stefanski Do you want to double check
https://gitlab.cee.redhat.com/automotive/pipe-x/infrastructure/-/merge_requests/657 before I just
hit merge?

Message 992 - 2025-10-01 12:31
From: Juanje Ojeda
----------------------------------------
@Kanitha Chim I see you already added the `/mnt/buckets/in-vehicle-os` to the webserver, but I don't
see it working. Was that change deployed?
https://gitlab.cee.redhat.com/automotive/services/supply-chain-webserver/-/commit/7f307213e08f818ddef7fda6df2d74163b52928a

Message 993 - 2025-10-01 12:31
From: Kanitha Chim
----------------------------------------
i haven't pulled that into ec2 and rebuild the container yet

Message 994 - 2025-10-01 12:31
From: Juanje Ojeda
----------------------------------------
Ah, ok

Message 995 - 2025-10-01 12:32
From: Kanitha Chim
----------------------------------------
sorry been busy with Errata stuff

Message 996 - 2025-10-01 12:32
From: Juanje Ojeda
----------------------------------------
no worries, just worndering. Do you have a ticket for that chnage?

Message 997 - 2025-10-01 12:32
From: Kanitha Chim
----------------------------------------
nope, I don't have

Message 998 - 2025-10-01 12:33
From: Juanje Ojeda
----------------------------------------
Ok, I'll create one under this epic and we add your change and the deployment. Sounds good?
https://issues.redhat.com/browse/VROOM-33349

Message 999 - 2025-10-01 12:36
From: Juanje Ojeda
----------------------------------------
BTW, now that we're cleaning/renaming things, maybe we should rename the `supply-chain-webserver`
repo to `rhivos-webserver`, which is how we normally refers to and that is more clear. WDYT?

Message 1000 - 2025-10-01 12:38
From: Kanitha Chim
----------------------------------------
it's fine by me

