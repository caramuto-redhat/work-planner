# Email Configuration for Work Planner MCP Server
# Inspired by jira-report-mpc project for clean, effective reporting

# Data Collection Time Ranges Configuration
# Centralized configuration for all data collection time ranges
time_ranges:
  # Slack data collection ranges
  slack:
    channel_activity_days: 7      # How many days of Slack activity to show in email
    history_collection_days: 30    # How far back to collect Slack history
    paul_todo_search_days: 30     # How far back to search for Paul mentions
  
  # Jira data collection ranges  
  jira:
    ticket_limit_per_team: 15     # Maximum tickets to show per team
    ticket_limit_per_org: 10      # Maximum tickets to show per organization
  
  # AI analysis ranges
  ai_analysis:
    message_preview_count: 5      # Number of recent messages to show in preview
    max_messages_for_analysis: 10 # Maximum messages to include in AI analysis

# Email Provider Configuration
provider:
  type: "gmail_smtp"
  smtp_server: "smtp.gmail.com"
  smtp_port: 587
  security: "tls"

# Environment Variables Required:
# EMAIL_USERNAME: Your email address (e.g., pacaramu@redhat.com)
# EMAIL_PASSWORD: App password or SMTP password
# EMAIL_FROM: Sender email address (usually same as EMAIL_USERNAME)

# Recipients Configuration
recipients:
  default: ["pacaramu@redhat.com"]
  email: "pacaramu@redhat.com"

# Email Templates - Clean format inspired by jira-report-mpc
templates:
  daily_summary:
    subject: "ğŸ“Š Daily Team Summary - {team} - {date}"
    format: "html"
    body_template: |
      <h2>ğŸ“Š Daily Team Summary</h2>
      
      <p><strong>Team:</strong> {team}</p>
      <p><strong>Date:</strong> {date}</p>
      <p><strong>Generated:</strong> {generated_time}</p>
      
      {content}
      
      <hr>
      <p><em>Generated by Work Planner MCP Server</em></p>
  
  data_collection_report:
    subject: "ğŸ“Š Data Collection Report - {team} - {date}"
    format: "html"
    body_template: |
      <h2>ğŸ“Š Data Collection Report</h2>
      
      <p><strong>Team:</strong> {team}</p>
      <p><strong>Date:</strong> {date}</p>
      <p><strong>Generated:</strong> {generated_time}</p>
      
      <h3>ğŸ“± Slack Data Collection</h3>
      <p>{slack_summary}</p>
      
      <h3>ğŸ« Jira Data Collection</h3>
      <p>{jira_summary}</p>
      
      <h3>ğŸ“Š Collection Statistics</h3>
      <p>{collection_stats}</p>
      
      <hr>
      <p><em>Generated by Work Planner MCP Server</em></p>
  
  alert:
    subject: "ğŸš¨ Alert - {alert_type} - {date}"
    format: "html"
    body_template: |
      <h2>ğŸš¨ Alert Notification</h2>
      
      <p><strong>Alert Type:</strong> {alert_type}</p>
      <p><strong>Date:</strong> {date}</p>
      <p><strong>Time:</strong> {timestamp}</p>
      
      <h3>Alert Details</h3>
      <p>{content}</p>
      
      <hr>
      <p><em>Generated by Work Planner MCP Server</em></p>
  
  team_daily_report:
    subject: "ğŸ“Š {team} Team Daily Report - {date}"
    format: "html"
    body_template: |
      <h2>ğŸ“Š {team} Team Daily Report</h2>
      
      <p><strong>Date:</strong> {date}</p>
      <p><strong>Team:</strong> {team}</p>
      <p><strong>Generated:</strong> {generated_time}</p>
      
      <h3>ğŸ“± Slack Activity</h3>
      <p>{slack_summary}</p>
      
      <h3>ğŸ« Jira Tickets - In Progress</h3>
      <p><strong>{jira_summary}</strong></p>
      
      {jira_details}
      
      <h3>ğŸ¤– AI Analysis</h3>
      <p>{ai_summary}</p>
      
      <hr>
      <p><em>Generated by Work Planner MCP Server</em></p>
  
  detailed_report:
    subject: "ğŸ“‹ Detailed Team Report - {team} - {date}"
    format: "html"
    body_template: |
      <h2>ğŸ“‹ Detailed Team Report</h2>
      
      <p><strong>Team:</strong> {team}</p>
      <p><strong>Date:</strong> {date}</p>
      
      <h3>ğŸ« Individual Ticket Details</h3>
      {ticket_details}
      
      <h3>ğŸ“± Slack Channel Activity</h3>
      {slack_details}
      
      <h3>ğŸ¤– AI-Generated Insights</h3>
      <p>{ai_insights}</p>
      
      <hr>
      <p><em>Generated by Work Planner MCP Server</em></p>
  
  executive_summary:
    subject: "ğŸ“Š Executive Summary - {team} - {date}"
    format: "html"
    body_template: |
      <h2>ğŸ“Š Executive Summary</h2>
      
      <p><strong>Team:</strong> {team}</p>
      <p><strong>Date:</strong> {date}</p>
      
      <h3>ğŸ“‹ Planned Work</h3>
      <p>{planned_work_summary}</p>
      
      <h3>âœ… Actual Work Completed</h3>
      <p>{actual_work_summary}</p>
      
      <h3>ğŸ¯ Key Insights</h3>
      <p>{key_insights}</p>
      
      <hr>
      <p><em>Generated by Work Planner MCP Server</em></p>
  
  team_daily_report_with_todo:
    subject: "ğŸ“Š {team} Team Daily Report - {date}"
    format: "html"
    body_template: |
      <!-- Team Daily Report Template -->
      <!-- This template generates comprehensive team reports with AI analysis and TODO items -->
      
      <div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px;">
        
        <!-- Header Section -->
        <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #e0e0e0;">
          <h1 style="color: #333; margin: 0 0 10px 0; font-size: 28px;">ğŸ“Š {team} Team Daily Report</h1>
          <div style="color: #666; font-size: 14px;">
            <span style="margin-right: 20px;"><strong>Date:</strong> {date}</span>
            <span style="margin-right: 20px;"><strong>Team:</strong> {team}</span>
            <span><strong>Generated:</strong> {generated_time}</span>
          </div>
        </div>
        
        <!-- Executive Summary Section -->
        <div style="margin: 25px 0; padding: 20px; background: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%); border-left: 5px solid #007acc; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <h2 style="margin: 0 0 15px 0; color: #007acc; font-size: 20px; display: flex; align-items: center;">
            <span style="margin-right: 10px;">ğŸ¤–</span> Executive Summary
          </h2>
          <p style="margin: 0; line-height: 1.6; color: #333; font-size: 16px;">{executive_summary}</p>
        </div>
        
        <!-- Paul TODO Section -->
        <div style="margin: 25px 0; padding: 20px; background: linear-gradient(135deg, #fff3cd 0%, #fff8e1 100%); border-left: 5px solid #ffc107; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <h2 style="margin: 0 0 15px 0; color: #856404; font-size: 20px; display: flex; align-items: center;">
            <span style="margin-right: 10px;">ğŸ“</span> Paul Caramuto: Action Items
          </h2>
          <div style="margin: 0; line-height: 1.6; color: #333; font-size: 15px; white-space: pre-line; background: white; padding: 15px; border-radius: 5px;">{paul_todo_items}</div>
        </div>
        
        <!-- Slack Activity Section -->
        <div style="margin: 30px 0;">
          <h2 style="color: #333; font-size: 22px; margin-bottom: 10px; display: flex; align-items: center;">
            <span style="margin-right: 10px;">ğŸ“±</span> Slack Channel Activity
          </h2>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <p style="margin: 0; color: #666; font-size: 14px; font-style: italic;">
              ğŸ“Š Showing activity from the last {slack_activity_days} days â€¢ Each channel includes AI analysis and recent message previews
            </p>
          </div>
          {slack_channel_details}
        </div>
        
        <!-- Jira Tickets Section -->
        <div style="margin: 30px 0;">
          <h2 style="color: #333; font-size: 22px; margin-bottom: 10px; display: flex; align-items: center;">
            <span style="margin-right: 10px;">ğŸ«</span> {sprint_title}
          </h2>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
            <p style="margin: 0; color: #666; font-size: 14px; font-style: italic;">
              ğŸ“‹ Tickets organized by team and SP organization members â€¢ Limited to {jira_ticket_limit} tickets per team
            </p>
          </div>
          {jira_ticket_details}
        </div>
        
        <!-- Footer Section -->
        <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #e0e0e0; text-align: center;">
          <p style="font-size: 12px; color: #999; margin: 0;">
            ğŸ¤– Generated by Work Planner MCP Server | {generated_time}
          </p>
          <p style="font-size: 11px; color: #ccc; margin: 5px 0 0 0;">
            Data collected from Slack channels and Jira tickets â€¢ AI analysis powered by Gemini
          </p>
        </div>
        
      </div>